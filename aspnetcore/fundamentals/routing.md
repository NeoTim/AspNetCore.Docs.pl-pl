---
title: Routing w ASP.NET Core
author: rick-anderson
description: Dowiedz się, w jaki sposób Routing ASP.NET Core jest odpowiedzialny za mapowanie identyfikatorów URI żądań na selektory punktów końcowych i wysyłanie żądań przychodzących do punktów końcowych.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 09/24/2019
uid: fundamentals/routing
ms.openlocfilehash: c8037d79c79c5b7eb3b99d9724aa3e5361f92b8c
ms.sourcegitcommit: 5d25a7f22c50ca6fdd0f8ecd8e525822e1b35b7a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/28/2019
ms.locfileid: "71482043"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="4cedd-103">Routing w ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="4cedd-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="4cedd-104">[Ryan Nowak](https://github.com/rynowak), [Steve Kowalski](https://ardalis.com/)i [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="4cedd-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="4cedd-105">Routing jest odpowiedzialny za mapowanie identyfikatorów URI żądań na punkty końcowe i wysyłanie żądań przychodzących do tych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-105">Routing is responsible for mapping request URIs to endpoints and dispatching incoming requests to those endpoints.</span></span> <span data-ttu-id="4cedd-106">Trasy są zdefiniowane w aplikacji i konfigurowane podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-106">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="4cedd-107">Trasa może opcjonalnie wyodrębnić wartości z adresu URL zawartego w żądaniu. te wartości mogą być następnie używane do przetwarzania żądań.</span><span class="sxs-lookup"><span data-stu-id="4cedd-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="4cedd-108">Przy użyciu informacji o trasie z aplikacji Routing jest również w stanie generować adresy URL mapowane na punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="4cedd-108">Using route information from the app, routing is also able to generate URLs that map to endpoints.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4cedd-109">Ten dokument obejmuje Routing ASP.NET Core niskiego poziomu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-109">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="4cedd-110">Aby uzyskać informacje na temat ASP.NET Core routingu MVC <xref:mvc/controllers/routing>, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-110">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="4cedd-111">Aby uzyskać informacje na temat Konwencji routingu w Razor Pages <xref:razor-pages/razor-pages-conventions>, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-111">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="4cedd-112">[Wyświetlanie lub pobieranie przykładowego kodu](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([sposobu pobierania](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="4cedd-112">[View or download sample code](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="4cedd-113">Podstawy routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-113">Routing basics</span></span>

<span data-ttu-id="4cedd-114">Większość aplikacji powinna wybrać podstawowy i opisowy schemat routingu, aby adresy URL były czytelne i zrozumiałe.</span><span class="sxs-lookup"><span data-stu-id="4cedd-114">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="4cedd-115">Domyślna trasa `{controller=Home}/{action=Index}/{id?}`konwencjonalna:</span><span class="sxs-lookup"><span data-stu-id="4cedd-115">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="4cedd-116">Obsługuje podstawowy i opisowy schemat routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-116">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="4cedd-117">Jest użytecznym punktem wyjścia dla aplikacji opartych na interfejsie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4cedd-117">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="4cedd-118">Deweloperzy często dodają dodatkowe trasy zwięzła do obszarów o dużym ruchu w aplikacji w wyspecjalizowanych sytuacjach (na przykład blog i punkty końcowe handlu elektronicznego) przy użyciu [routingu atrybutów](xref:mvc/controllers/routing#attribute-routing) lub dedykowanych tras konwencjonalnych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-118">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations (for example, blog and ecommerce endpoints) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="4cedd-119">Interfejsy API sieci Web powinny używać routingu atrybutów do modelowania funkcjonalności aplikacji jako zestawu zasobów, w których operacje są reprezentowane przez zlecenia HTTP.</span><span class="sxs-lookup"><span data-stu-id="4cedd-119">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="4cedd-120">Oznacza to, że wiele operacji (na przykład GET, POST) dla tego samego zasobu logicznego będzie używać tego samego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-120">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="4cedd-121">Routing atrybutu zapewnia poziom kontroli, który jest wymagany do dokładnego projektowania układu publicznego punktu końcowego interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-121">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="4cedd-122">Aplikacje Razor Pages używają domyślnego routingu konwencjonalnego do obsłużenia nazwanych zasobów w folderze *strony* aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-122">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="4cedd-123">Dostępne są dodatkowe konwencje, które umożliwiają dostosowanie Razor Pages zachowaniem routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-123">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="4cedd-124">Aby uzyskać więcej informacji, zobacz <xref:razor-pages/index> i <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-124">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="4cedd-125">Obsługa generowania adresów URL umożliwia tworzenie aplikacji bez adresów URL, które mają być połączone ze sobą.</span><span class="sxs-lookup"><span data-stu-id="4cedd-125">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="4cedd-126">Ta obsługa pozwala rozpocząć od podstawowej konfiguracji routingu i zmodyfikować trasy po ustaleniu układu zasobów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-126">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

<span data-ttu-id="4cedd-127">Routing używa *punktów końcowych* (`Endpoint`) do reprezentowania logicznych punktów końcowych w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-127">Routing uses *endpoints* (`Endpoint`) to represent logical endpoints in an app.</span></span>

<span data-ttu-id="4cedd-128">Punkt końcowy definiuje delegata do przetwarzania żądań i kolekcji dowolnych metadanych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-128">An endpoint defines a delegate to process requests and a collection of arbitrary metadata.</span></span> <span data-ttu-id="4cedd-129">Metadane służą do implementowania zagadnień związanych z wycinaniem w oparciu o zasady i konfigurację dołączone do każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-129">The metadata is used to implement cross-cutting concerns based on policies and configuration attached to each endpoint.</span></span>

<span data-ttu-id="4cedd-130">System routingu ma następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-130">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="4cedd-131">Składnia szablonu trasy służy do definiowania tras z parametrami trasy z tokenami.</span><span class="sxs-lookup"><span data-stu-id="4cedd-131">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="4cedd-132">Dozwolona jest konfiguracja języka końcowego w stylu konwencjonalnym i stylu atrybutu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-132">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="4cedd-133"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint>służy do określenia, czy parametr adresu URL zawiera prawidłową wartość dla danego ograniczenia punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-133"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="4cedd-134">Modele aplikacji, takie jak MVC/Razor Pages, rejestrują wszystkie punkty końcowe, które mają przewidywalne implementację scenariuszy routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-134">App models, such as MVC/Razor Pages, register all of their endpoints, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="4cedd-135">Implementacja routingu podejmuje decyzje dotyczące routingu w dowolnym miejscu w potoku programu pośredniczącego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-135">The routing implementation makes routing decisions wherever desired in the middleware pipeline.</span></span>
* <span data-ttu-id="4cedd-136">Oprogramowanie pośredniczące, które pojawia się po utworzeniu oprogramowania pośredniczącego, może sprawdzić wynik decyzji punktu końcowego usługi routingu dla danego identyfikatora URI żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-136">Middleware that appears after a Routing Middleware can inspect the result of the Routing Middleware's endpoint decision for a given request URI.</span></span>
* <span data-ttu-id="4cedd-137">Można wyliczyć wszystkie punkty końcowe w aplikacji w dowolnym miejscu w potoku programu pośredniczącego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-137">It's possible to enumerate all of the endpoints in the app anywhere in the middleware pipeline.</span></span>
* <span data-ttu-id="4cedd-138">Aplikacja może używać routingu do generowania adresów URL (na przykład w przypadku przekierowania lub linków) na podstawie informacji o punkcie końcowym, a tym samym unikania zakodowanych adresów URL, co ułatwia łatwość utrzymania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-138">An app can use routing to generate URLs (for example, for redirection or links) based on endpoint information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="4cedd-139">Generowanie adresów URL jest oparte na adresach, które obsługują arbitralną rozszerzalność:</span><span class="sxs-lookup"><span data-stu-id="4cedd-139">URL generation is based on addresses, which support arbitrary extensibility:</span></span>

  * <span data-ttu-id="4cedd-140">Interfejs API generatora linków<xref:Microsoft.AspNetCore.Routing.LinkGenerator>() można rozpoznać w dowolnym miejscu przy użyciu [iniekcji zależności (di)](xref:fundamentals/dependency-injection) do generowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-140">The Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) can be resolved anywhere using [dependency injection (DI)](xref:fundamentals/dependency-injection) to generate URLs.</span></span>
  * <span data-ttu-id="4cedd-141">Gdy interfejs API generatora linków nie jest dostępny za <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> pośrednictwem programu di, oferuje metody tworzenia adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-141">Where the Link Generator API isn't available via DI, <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

> [!NOTE]
> <span data-ttu-id="4cedd-142">Łączenie punktów końcowych jest ograniczone do akcji i stron programu MVC/Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-142">Endpoint linking is limited to MVC/Razor Pages actions and pages.</span></span> <span data-ttu-id="4cedd-143">Rozszerzenia punktów końcowych konsolidacji są planowane dla przyszłych wersji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-143">The expansions of endpoint-linking capabilities is planned for future releases.</span></span>

<span data-ttu-id="4cedd-144">Routing jest połączony z potokiem [pośredniczącym](xref:fundamentals/middleware/index) przez <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> klasę.</span><span class="sxs-lookup"><span data-stu-id="4cedd-144">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="4cedd-145">[ASP.NET Core MVC](xref:mvc/overview) dodaje Routing do potoku oprogramowania pośredniczącego w ramach swojej konfiguracji i obsługuje routing w aplikacjach MVC i Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-145">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="4cedd-146">Aby dowiedzieć się, jak używać routingu jako składnika autonomicznego, zapoznaj się z sekcją [Korzystanie z oprogramowania do routingu](#use-routing-middleware) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-146">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="4cedd-147">Dopasowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-147">URL matching</span></span>

<span data-ttu-id="4cedd-148">Dopasowywanie adresów URL to proces, za pomocą którego Routing wysyła żądanie przychodzące do *punktu końcowego*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-148">URL matching is the process by which routing dispatches an incoming request to an *endpoint*.</span></span> <span data-ttu-id="4cedd-149">Ten proces jest oparty na danych w ścieżce URL, ale można go rozszerzyć w celu uwzględnienia wszelkich danych w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-149">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="4cedd-150">Możliwość wysyłania żądań do oddzielnych programów obsługi jest kluczem do skalowania rozmiaru i złożoności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-150">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="4cedd-151">Po zakończeniu routingu oprogramowanie pośredniczące ustawia punkt końcowy (`Endpoint`) i kieruje wartości do funkcji <xref:Microsoft.AspNetCore.Http.HttpContext>w.</span><span class="sxs-lookup"><span data-stu-id="4cedd-151">When a Routing Middleware executes, it sets an endpoint (`Endpoint`) and route values to a feature on the <xref:Microsoft.AspNetCore.Http.HttpContext>.</span></span> <span data-ttu-id="4cedd-152">Dla bieżącego żądania:</span><span class="sxs-lookup"><span data-stu-id="4cedd-152">For the current request:</span></span>

* <span data-ttu-id="4cedd-153">Wywołanie `HttpContext.GetEndpoint` Pobiera punkt końcowy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-153">Calling `HttpContext.GetEndpoint` gets the endpoint.</span></span>
* <span data-ttu-id="4cedd-154">`HttpRequest.RouteValues`Pobiera kolekcję wartości tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-154">`HttpRequest.RouteValues` gets the collection of route values.</span></span>

<span data-ttu-id="4cedd-155">Oprogramowanie pośredniczące działające po stronie routingu pośredniczącego może zobaczyć punkt końcowy i podjąć odpowiednie działania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-155">Middleware running after the Routing Middleware can see the endpoint and take action.</span></span> <span data-ttu-id="4cedd-156">Na przykład, oprogramowanie pośredniczące autoryzacji może przejrzeć kolekcję metadanych punktu końcowego dla zasad autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-156">For example, an Authorization Middleware can interrogate the endpoint's metadata collection for an authorization policy.</span></span> <span data-ttu-id="4cedd-157">Gdy zostanie wykonane wszystkie oprogramowanie pośredniczące w potoku przetwarzania żądań, zostanie wywołany delegat wybranego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-157">After all of the middleware in the request processing pipeline is executed, the selected endpoint's delegate is invoked.</span></span>

<span data-ttu-id="4cedd-158">System routingu w ramach routingu punktów końcowych jest odpowiedzialny za wszystkie decyzje dotyczące wysyłania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-158">The routing system in endpoint routing is responsible for all dispatching decisions.</span></span> <span data-ttu-id="4cedd-159">Ponieważ oprogramowanie pośredniczące stosuje zasady oparte na wybranym punkcie końcowym, ważne jest, aby wszystkie decyzje, które mogą mieć wpływ na wysyłanie lub stosowanie zasad zabezpieczeń, zostały wprowadzone w systemie routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-159">Since the middleware applies policies based on the selected endpoint, it's important that any decision that can affect dispatching or the application of security policies is made inside the routing system.</span></span>

<span data-ttu-id="4cedd-160">Po wykonaniu delegata punktu końcowego właściwości [RouteContext. RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) są ustawiane na odpowiednie wartości na podstawie przetwarzania żądania wykonanego do tej pory.</span><span class="sxs-lookup"><span data-stu-id="4cedd-160">When the endpoint delegate is executed, the properties of [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) are set to appropriate values based on the request processing performed thus far.</span></span>

<span data-ttu-id="4cedd-161">[RouteData. Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) to słownik *wartości tras* uzyskanych z trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-161">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="4cedd-162">Te wartości są zwykle określane przez tokenizowanie jako adres URL i mogą służyć do akceptowania danych wejściowych użytkownika lub do dalszej akceptacji decyzji w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-162">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="4cedd-163">[RouteData. DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) to zbiór właściwości dodatkowych danych dotyczących dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-163">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="4cedd-164"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*>zapewnia obsługę kojarzenia danych stanu z każdą trasą, dzięki czemu aplikacja może podejmować decyzje na podstawie dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-164"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="4cedd-165">Te wartości są zdefiniowane przez dewelopera i **nie** mają wpływu na zachowanie routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-165">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="4cedd-166">Ponadto wartości umieszczane w [RouteData. Datatokeny](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) mogą być dowolnego typu, w przeciwieństwie do [RouteData. wartości](xref:Microsoft.AspNetCore.Routing.RouteData.Values), które muszą być konwertowane do i z ciągów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-166">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="4cedd-167">[RouteData. routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) to lista tras, które brały udział w pomyślnie dopasowane do żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-167">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="4cedd-168">Trasy mogą być zagnieżdżone wewnątrz siebie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-168">Routes can be nested inside of one another.</span></span> <span data-ttu-id="4cedd-169"><xref:Microsoft.AspNetCore.Routing.RouteData.Routers> Właściwość odzwierciedla ścieżkę przez logiczne drzewo tras, które spowodowały dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-169">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="4cedd-170">Ogólnie rzecz biorąc, pierwszy element <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> w jest kolekcją tras i powinien być używany do generowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-170">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="4cedd-171">Ostatnim elementem w programie <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> jest program obsługi trasy, który został dopasowany.</span><span class="sxs-lookup"><span data-stu-id="4cedd-171">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

<a name="lg"></a>

### <a name="url-generation-with-linkgenerator"></a><span data-ttu-id="4cedd-172">Generowanie adresu URL za pomocą LinkGenerator</span><span class="sxs-lookup"><span data-stu-id="4cedd-172">URL generation with LinkGenerator</span></span>

<span data-ttu-id="4cedd-173">Generowanie adresu URL to proces, za pomocą którego Routing może utworzyć ścieżkę URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-173">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="4cedd-174">Pozwala to na logiczne rozdzielenie między punktami końcowymi i adresami URL, które uzyskują do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="4cedd-174">This allows for a logical separation between your endpoints and the URLs that access them.</span></span>

<span data-ttu-id="4cedd-175">Routing punktów końcowych obejmuje interfejs API generatora linków (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span><span class="sxs-lookup"><span data-stu-id="4cedd-175">Endpoint routing includes the Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span></span> <span data-ttu-id="4cedd-176"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>jest usługą singleton, którą można pobrać z programu DI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-176"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is a singleton service that can be retrieved from DI.</span></span> <span data-ttu-id="4cedd-177">Interfejsu API można używać poza kontekstem żądania wykonania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-177">The API can be used outside of the context of an executing request.</span></span> <span data-ttu-id="4cedd-178">MVC i scenariusze, które opierają <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>się na, takie jak [pomocnicy tagów](xref:mvc/views/tag-helpers/intro), pomocników HTML i [wyniki akcji](xref:mvc/controllers/actions), używają generatora linków, aby zapewnić możliwości generowania linków. <xref:Microsoft.AspNetCore.Mvc.IUrlHelper></span><span class="sxs-lookup"><span data-stu-id="4cedd-178">MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> and scenarios that rely on <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, such as [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Helpers, and [Action Results](xref:mvc/controllers/actions), use the link generator to provide link generating capabilities.</span></span>

<span data-ttu-id="4cedd-179">Generator łącza jest objęty koncepcją i *schematami* *adresów.*</span><span class="sxs-lookup"><span data-stu-id="4cedd-179">The link generator is backed by the concept of an *address* and *address schemes*.</span></span> <span data-ttu-id="4cedd-180">Schemat adresów jest sposobem określania punktów końcowych, które należy wziąć pod uwagę podczas generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-180">An address scheme is a way of determining the endpoints that should be considered for link generation.</span></span> <span data-ttu-id="4cedd-181">Na przykład nazwa trasy i wartości trasy scenariusze wielu użytkowników są znane z programu z MVC/Razor Pages są implementowane jako schemat adresów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-181">For example, the route name and route values scenarios many users are familiar with from MVC/Razor Pages are implemented as an address scheme.</span></span>

<span data-ttu-id="4cedd-182">Generator łącza może łączyć się z akcjami i stronami MVC/Razor Pages za pośrednictwem następujących metod rozszerzających:</span><span class="sxs-lookup"><span data-stu-id="4cedd-182">The link generator can link to MVC/Razor Pages actions and pages via the following extension methods:</span></span>

* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetPathByAction*>
* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetUriByAction*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetPathByPage*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetUriByPage*>

<span data-ttu-id="4cedd-183">Przeciążenie tych metod przyjmuje argumenty, które zawierają `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-183">An overload of these methods accepts arguments that include the `HttpContext`.</span></span> <span data-ttu-id="4cedd-184">Metody te są funkcjonalnie równoważne z `Url.Action` i `Url.Page` oferują dodatkową elastyczność i opcje.</span><span class="sxs-lookup"><span data-stu-id="4cedd-184">These methods are functionally equivalent to `Url.Action` and `Url.Page` but offer additional flexibility and options.</span></span>

<span data-ttu-id="4cedd-185">Metody są najbardziej podobne do `Url.Action` i `Url.Page` w tym, że generują identyfikator URI zawierający ścieżkę bezwzględną. `GetPath*`</span><span class="sxs-lookup"><span data-stu-id="4cedd-185">The `GetPath*` methods are most similar to `Url.Action` and `Url.Page` in that they generate a URI containing an absolute path.</span></span> <span data-ttu-id="4cedd-186">`GetUri*` Metody zawsze generują bezwzględny identyfikator URI zawierający schemat i hosta.</span><span class="sxs-lookup"><span data-stu-id="4cedd-186">The `GetUri*` methods always generate an absolute URI containing a scheme and host.</span></span> <span data-ttu-id="4cedd-187">Metody, które akceptują `HttpContext` identyfikator URI w kontekście żądania wykonania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-187">The methods that accept an `HttpContext` generate a URI in the context of the executing request.</span></span> <span data-ttu-id="4cedd-188">Użycie wartości tras w otoczeniu, ścieżki podstawowej adresu URL, schematu i hosta z żądania wykonania jest używane, chyba że zostaną zastąpione.</span><span class="sxs-lookup"><span data-stu-id="4cedd-188">The ambient route values, URL base path, scheme, and host from the executing request are used unless overridden.</span></span>

<span data-ttu-id="4cedd-189"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>jest wywoływana przy użyciu adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-189"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is called with an address.</span></span> <span data-ttu-id="4cedd-190">Generowanie identyfikatora URI występuje w dwóch krokach:</span><span class="sxs-lookup"><span data-stu-id="4cedd-190">Generating a URI occurs in two steps:</span></span>

1. <span data-ttu-id="4cedd-191">Adres jest powiązany z listą punktów końcowych, które pasują do adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-191">An address is bound to a list of endpoints that match the address.</span></span>
1. <span data-ttu-id="4cedd-192">Wszystkie punkty końcowe `RoutePattern` są oceniane do momentu znalezienia wzorca tras pasującego do dostarczonych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-192">Each endpoint's `RoutePattern` is evaluated until a route pattern that matches the supplied values is found.</span></span> <span data-ttu-id="4cedd-193">Wynikowe dane wyjściowe są łączone z innymi częściami identyfikatora URI dostarczanymi do generatora linków i zwracanymi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-193">The resulting output is combined with the other URI parts supplied to the link generator and returned.</span></span>

<span data-ttu-id="4cedd-194">Metody zapewniane przez <xref:Microsoft.AspNetCore.Routing.LinkGenerator> obsługę funkcji generowania linków standardowych dla dowolnego typu adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-194">The methods provided by <xref:Microsoft.AspNetCore.Routing.LinkGenerator> support standard link generation capabilities for any type of address.</span></span> <span data-ttu-id="4cedd-195">Najbardziej wygodnym sposobem korzystania z generatora łączy są metody rozszerzające, które wykonują operacje dla określonego typu adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-195">The most convenient way to use the link generator is through extension methods that perform operations for a specific address type.</span></span>

| <span data-ttu-id="4cedd-196">Metoda rozszerzenia</span><span class="sxs-lookup"><span data-stu-id="4cedd-196">Extension Method</span></span> | <span data-ttu-id="4cedd-197">Opis</span><span class="sxs-lookup"><span data-stu-id="4cedd-197">Description</span></span> |
| ---------------- | ----------- |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*> | <span data-ttu-id="4cedd-198">Generuje identyfikator URI z ścieżką bezwzględną na podstawie podanych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-198">Generates a URI with an absolute path based on the provided values.</span></span> |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetUriByAddress*> | <span data-ttu-id="4cedd-199">Generuje bezwzględny identyfikator URI na podstawie podanych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-199">Generates an absolute URI based on the provided values.</span></span>             |

> [!WARNING]
> <span data-ttu-id="4cedd-200">Należy zwrócić uwagę na następujące konsekwencje wywoływania <xref:Microsoft.AspNetCore.Routing.LinkGenerator> metod:</span><span class="sxs-lookup"><span data-stu-id="4cedd-200">Pay attention to the following implications of calling <xref:Microsoft.AspNetCore.Routing.LinkGenerator> methods:</span></span>
>
> * <span data-ttu-id="4cedd-201">Użyj `GetUri*` metod rozszerzających z zachowaniem ostrożności w konfiguracji aplikacji, która `Host` nie weryfikuje nagłówka żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="4cedd-201">Use `GetUri*` extension methods with caution in an app configuration that doesn't validate the `Host` header of incoming requests.</span></span> <span data-ttu-id="4cedd-202">`Host` Jeśli nagłówek żądań przychodzących nie jest zweryfikowany, dane wejściowe żądania niezaufanego mogą być wysyłane z powrotem do klienta w identyfikatorach URI w widoku/stronie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-202">If the `Host` header of incoming requests isn't validated, untrusted request input can be sent back to the client in URIs in a view/page.</span></span> <span data-ttu-id="4cedd-203">Zaleca się, aby wszystkie aplikacje produkcyjne skonfigurowali swój serwer do `Host` sprawdzania poprawności nagłówka pod kątem znanych prawidłowych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-203">We recommend that all production apps configure their server to validate the `Host` header against known valid values.</span></span>
>
> * <span data-ttu-id="4cedd-204">Należy <xref:Microsoft.AspNetCore.Routing.LinkGenerator> używać z zachowaniem ostrożności w oprogramowaniu `Map` pośredniczącym w połączeniu z lub `MapWhen`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-204">Use <xref:Microsoft.AspNetCore.Routing.LinkGenerator> with caution in middleware in combination with `Map` or `MapWhen`.</span></span> <span data-ttu-id="4cedd-205">`Map*`zmienia ścieżkę podstawową żądania wykonania, która ma wpływ na dane wyjściowe generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-205">`Map*` changes the base path of the executing request, which affects the output of link generation.</span></span> <span data-ttu-id="4cedd-206"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> Wszystkie interfejsy API umożliwiają określanie ścieżki podstawowej.</span><span class="sxs-lookup"><span data-stu-id="4cedd-206">All of the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> APIs allow specifying a base path.</span></span> <span data-ttu-id="4cedd-207">Zawsze określaj pustą ścieżkę bazową `Map*`, która ma wpływ na generowanie linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-207">Always specify an empty base path to undo `Map*`'s affect on link generation.</span></span>

## <a name="differences-from-earlier-versions-of-routing"></a><span data-ttu-id="4cedd-208">Różnice wynikające z wcześniejszych wersji usługi Routing</span><span class="sxs-lookup"><span data-stu-id="4cedd-208">Differences from earlier versions of routing</span></span>

<span data-ttu-id="4cedd-209">Istnieje kilka różnic między routingiem punktu końcowego i wersjami routingu wcześniejszego niż w ASP.NET Core 2,2:</span><span class="sxs-lookup"><span data-stu-id="4cedd-209">A few differences exist between endpoint routing and versions of routing earlier than in ASP.NET Core 2.2:</span></span>

* <span data-ttu-id="4cedd-210">System routingu punktu końcowego nie obsługuje <xref:Microsoft.AspNetCore.Routing.IRouter>rozszerzalności opartej na systemie, w <xref:Microsoft.AspNetCore.Routing.Route>tym dziedziczenie z.</span><span class="sxs-lookup"><span data-stu-id="4cedd-210">The endpoint routing system doesn't support <xref:Microsoft.AspNetCore.Routing.IRouter>-based extensibility, including inheriting from <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>

* <span data-ttu-id="4cedd-211">Routing punktów końcowych nie obsługuje [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span><span class="sxs-lookup"><span data-stu-id="4cedd-211">Endpoint routing doesn't support [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span></span> <span data-ttu-id="4cedd-212">Użyj [wersji zgodności](xref:mvc/compatibility-version) 2,1 (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`), aby nadal korzystać z podkładki zgodności.</span><span class="sxs-lookup"><span data-stu-id="4cedd-212">Use the 2.1 [compatibility version](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) to continue using the compatibility shim.</span></span>

* <span data-ttu-id="4cedd-213">Routing punktów końcowych ma inne zachowanie dla wielkości liter wygenerowanych identyfikatorów URI podczas korzystania z konwencjonalnych tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-213">Endpoint Routing has different behavior for the casing of generated URIs when using conventional routes.</span></span>

  <span data-ttu-id="4cedd-214">Rozważmy następujący szablon trasy domyślnej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-214">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="4cedd-215">Załóżmy, że generujesz link do akcji przy użyciu następującej trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-215">Suppose you generate a link to an action using the following route:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "blog", new { id = 17, });
  ```

  <span data-ttu-id="4cedd-216">W <xref:Microsoft.AspNetCore.Routing.IRouter>przypadku routingu opartego na systemie ten kod generuje `/blog/ReadPost/17`identyfikator URI, który uwzględnia wielkość liter podanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-216">With <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, this code generates a URI of `/blog/ReadPost/17`, which respects the casing of the provided route value.</span></span> <span data-ttu-id="4cedd-217">Routing punktów końcowych w ASP.NET Core 2,2 lub `/Blog/ReadPost/17` późniejszych produkuje ("blog" jest pisane wielkimi literami).</span><span class="sxs-lookup"><span data-stu-id="4cedd-217">Endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` ("Blog" is capitalized).</span></span> <span data-ttu-id="4cedd-218">Routing punktów końcowych `IOutboundParameterTransformer` udostępnia interfejs, którego można użyć do dostosowania tego zachowania globalnie lub w celu zastosowania różnych konwencji do mapowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-218">Endpoint routing provides the `IOutboundParameterTransformer` interface that can be used to customize this behavior globally or to apply different conventions for mapping URLs.</span></span>

  <span data-ttu-id="4cedd-219">Aby uzyskać więcej informacji, zobacz sekcję [informacje dotyczące transformatora parametrów](#parameter-transformer-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-219">For more information, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

* <span data-ttu-id="4cedd-220">Generowanie linków używane przez MVC/Razor Pages z trasami konwencjonalnymi działa inaczej podczas próby połączenia z kontrolerem/akcją lub stroną, która nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="4cedd-220">Link Generation used by MVC/Razor Pages with conventional routes behaves differently when attempting to link to an controller/action or page that doesn't exist.</span></span>

  <span data-ttu-id="4cedd-221">Rozważmy następujący szablon trasy domyślnej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-221">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="4cedd-222">Załóżmy, że generowany jest link do akcji przy użyciu szablonu domyślnego z następującymi:</span><span class="sxs-lookup"><span data-stu-id="4cedd-222">Suppose you generate a link to an action using the default template with the following:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "Blog", new { id = 17, });
  ```

  <span data-ttu-id="4cedd-223">W `IRouter`przypadku routingu opartego na systemie wynik jest `/Blog/ReadPost/17`zawsze, nawet jeśli `BlogController` nie istnieje lub nie ma `ReadPost` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-223">With `IRouter`-based routing, the result is always `/Blog/ReadPost/17`, even if the `BlogController` doesn't exist or doesn't have a `ReadPost` action method.</span></span> <span data-ttu-id="4cedd-224">Zgodnie z oczekiwaniami Routing punktów końcowych w ASP.NET Core 2,2 lub `/Blog/ReadPost/17` nowszej generuje, czy istnieje metoda akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-224">As expected, endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` if the action method exists.</span></span> <span data-ttu-id="4cedd-225">*Jednak w przypadku, gdy akcja nie istnieje, routing punktu końcowego tworzy pusty ciąg.*</span><span class="sxs-lookup"><span data-stu-id="4cedd-225">*However, endpoint routing produces an empty string if the action doesn't exist.*</span></span> <span data-ttu-id="4cedd-226">Koncepcyjnie, routing punktu końcowego nie zakłada, że punkt końcowy istnieje, jeśli akcja nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="4cedd-226">Conceptually, endpoint routing doesn't assume that the endpoint exists if the action doesn't exist.</span></span>

* <span data-ttu-id="4cedd-227">*Algorytm unieważniania wartości otoczenia* generacji linku działa inaczej, gdy jest używany z routingiem punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-227">The link generation *ambient value invalidation algorithm* behaves differently when used with endpoint routing.</span></span>

  <span data-ttu-id="4cedd-228">*Nieprawidłowa wartość otoczenia* , która decyduje o tym, które wartości trasy z aktualnie wykonywanego żądania (wartości otoczenia) mogą być używane w operacjach generowania linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-228">*Ambient value invalidation* is the algorithm that decides which route values from the currently executing request (the ambient values) can be used in link generation operations.</span></span> <span data-ttu-id="4cedd-229">Routowanie konwencjonalne zawsze unieważnia dodatkowe wartości trasy podczas łączenia z inną akcją.</span><span class="sxs-lookup"><span data-stu-id="4cedd-229">Conventional routing always invalidated extra route values when linking to a different action.</span></span> <span data-ttu-id="4cedd-230">Routing atrybutów nie miał tego zachowania przed wydaniem ASP.NET Core 2,2.</span><span class="sxs-lookup"><span data-stu-id="4cedd-230">Attribute routing didn't have this behavior prior to the release of ASP.NET Core 2.2.</span></span> <span data-ttu-id="4cedd-231">We wcześniejszych wersjach ASP.NET Core linki do innej akcji, która używa tych samych nazw parametrów trasy, spowodowały błędy generacji łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-231">In earlier versions of ASP.NET Core, links to another action that use the same route parameter names resulted in link generation errors.</span></span> <span data-ttu-id="4cedd-232">W ASP.NET Core 2,2 lub nowszej, obie formy routingu unieważnią wartości podczas łączenia z inną akcją.</span><span class="sxs-lookup"><span data-stu-id="4cedd-232">In ASP.NET Core 2.2 or later, both forms of routing invalidate values when linking to another action.</span></span>

  <span data-ttu-id="4cedd-233">Rozważmy następujący przykład w ASP.NET Core 2,1 lub starszej.</span><span class="sxs-lookup"><span data-stu-id="4cedd-233">Consider the following example in ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="4cedd-234">W przypadku łączenia z inną akcją (lub inną stroną) wartości trasy mogą być ponownie używane na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="4cedd-234">When linking to another action (or another page), route values can be reused in undesirable ways.</span></span>

  <span data-ttu-id="4cedd-235">W */Pages/Store/Product.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="4cedd-235">In */Pages/Store/Product.cshtml*:</span></span>

  ```cshtml
  @page "{id}"
  @Url.Page("/Login")
  ```

  <span data-ttu-id="4cedd-236">W */Pages/login.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="4cedd-236">In */Pages/Login.cshtml*:</span></span>

  ```cshtml
  @page "{id?}"
  ```

  <span data-ttu-id="4cedd-237">Jeśli identyfikator URI znajduje `/Store/Product/18` się w ASP.NET Core 2,1 lub starszej, link wygenerowany na `@Url.Page("/Login")` stronie Sklep/informacje w usłudze `/Login/18`ma wartość.</span><span class="sxs-lookup"><span data-stu-id="4cedd-237">If the URI is `/Store/Product/18` in ASP.NET Core 2.1 or earlier, the link generated on the Store/Info page by `@Url.Page("/Login")` is `/Login/18`.</span></span> <span data-ttu-id="4cedd-238">`id` Wartość 18 jest ponownie używana, mimo że miejsce docelowe linku jest częścią aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-238">The `id` value of 18 is reused, even though the link destination is different part of the app entirely.</span></span> <span data-ttu-id="4cedd-239">Wartość trasy w kontekście `/Login` strony jest prawdopodobnie wartością identyfikatora użytkownika, a nie wartością identyfikatora produktu w sklepie. `id`</span><span class="sxs-lookup"><span data-stu-id="4cedd-239">The `id` route value in the context of the `/Login` page is probably a user ID value, not a store product ID value.</span></span>

  <span data-ttu-id="4cedd-240">W przypadku routingu punktów końcowych z ASP.NET Core 2,2 lub nowszym wynik `/Login`jest.</span><span class="sxs-lookup"><span data-stu-id="4cedd-240">In endpoint routing with ASP.NET Core 2.2 or later, the result is `/Login`.</span></span> <span data-ttu-id="4cedd-241">Wartości otoczenia nie są ponownie używane, gdy połączone miejsce docelowe jest inną akcją lub stroną.</span><span class="sxs-lookup"><span data-stu-id="4cedd-241">Ambient values aren't reused when the linked destination is a different action or page.</span></span>

* <span data-ttu-id="4cedd-242">Składnia parametru trasy okrężnej: Ukośniki do przodu nie są kodowane przy użyciu podwójnej gwiazdki`**`() składni parametrów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-242">Round-tripping route parameter syntax: Forward slashes aren't encoded when using a double-asterisk (`**`) catch-all parameter syntax.</span></span>

  <span data-ttu-id="4cedd-243">Podczas generowania łącza system routingu koduje wartość przechwyconą w dwugwiazdkowym (`**`) parametrem catch-all (na przykład), `{**myparametername}`z wyjątkiem ukośników.</span><span class="sxs-lookup"><span data-stu-id="4cedd-243">During link generation, the routing system encodes the value captured in a double-asterisk (`**`) catch-all parameter (for example, `{**myparametername}`) except the forward slashes.</span></span> <span data-ttu-id="4cedd-244">Podwójna gwiazdka catch-all jest obsługiwana w `IRouter`przypadku routingu opartego na systemie ASP.NET Core 2,2 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="4cedd-244">The double-asterisk catch-all is supported with `IRouter`-based routing in ASP.NET Core 2.2 or later.</span></span>

  <span data-ttu-id="4cedd-245">Pojedyncza gwiazdka "catch-all" w poprzednich wersjach ASP.NET Core (`{*myparametername}`) pozostanie obsługiwana, a ukośniki są zakodowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-245">The single asterisk catch-all parameter syntax in prior versions of ASP.NET Core (`{*myparametername}`) remains supported, and forward slashes are encoded.</span></span>

  | <span data-ttu-id="4cedd-246">Szlak</span><span class="sxs-lookup"><span data-stu-id="4cedd-246">Route</span></span>              | <span data-ttu-id="4cedd-247">Wygenerowano łącze</span><span class="sxs-lookup"><span data-stu-id="4cedd-247">Link generated with</span></span><br>`Url.Action(new { category = "admin/products" })`&hellip; |
  | ------------------ | --------------------------------------------------------------------- |
  | `/search/{*page}`  | <span data-ttu-id="4cedd-248">`/search/admin%2Fproducts`(ukośnik zostanie zakodowany)</span><span class="sxs-lookup"><span data-stu-id="4cedd-248">`/search/admin%2Fproducts` (the forward slash is encoded)</span></span>             |
  | `/search/{**page}` | `/search/admin/products`                                              |

### <a name="middleware-example"></a><span data-ttu-id="4cedd-249">Przykład oprogramowania pośredniczącego</span><span class="sxs-lookup"><span data-stu-id="4cedd-249">Middleware example</span></span>

<span data-ttu-id="4cedd-250">W poniższym przykładzie oprogramowanie pośredniczące używa <xref:Microsoft.AspNetCore.Routing.LinkGenerator> interfejsu API do tworzenia linku do metody akcji, która wyświetla listę produktów ze sklepu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-250">In the following example, a middleware uses the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API to create link to an action method that lists store products.</span></span> <span data-ttu-id="4cedd-251">Przy użyciu generatora linków poprzez wstrzyknięcie go do klasy i wywołanie `GenerateLink` jest dostępne dla dowolnej klasy w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-251">Using the link generator by injecting it into a class and calling `GenerateLink` is available to any class in an app.</span></span>

```csharp
using Microsoft.AspNetCore.Routing;

public class ProductsLinkMiddleware
{
    private readonly LinkGenerator _linkGenerator;

    public ProductsLinkMiddleware(RequestDelegate next, LinkGenerator linkGenerator)
    {
        _linkGenerator = linkGenerator;
    }

    public async Task InvokeAsync(HttpContext httpContext)
    {
        var url = _linkGenerator.GetPathByAction("ListProducts", "Store");

        httpContext.Response.ContentType = "text/plain";

        await httpContext.Response.WriteAsync($"Go to {url} to see our products.");
    }
}
```

### <a name="create-routes"></a><span data-ttu-id="4cedd-252">Tworzenie tras</span><span class="sxs-lookup"><span data-stu-id="4cedd-252">Create routes</span></span>

<span data-ttu-id="4cedd-253">Większość aplikacji tworzy trasy przez wywołanie <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> lub jedną z podobnych metod rozszerzających zdefiniowanych w <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>systemie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-253">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="4cedd-254">Dowolna z <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> metod rozszerzających tworzy <xref:Microsoft.AspNetCore.Routing.Route> wystąpienie i dodaje je do kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-254">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="4cedd-255"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>nie akceptuje parametru procedury obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-255"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="4cedd-256"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>dodaje tylko trasy, które są obsługiwane przez <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-256"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="4cedd-257">Aby dowiedzieć się więcej na temat routingu w <xref:mvc/controllers/routing>MVC, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-257">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="4cedd-258">Poniższy przykład kodu jest przykładem <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wywołania używanego przez typową definicję trasy MVC ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="4cedd-258">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="4cedd-259">Ten szablon dopasowuje ścieżkę URL i wyodrębnia wartości tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-259">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="4cedd-260">Na przykład ścieżka `/Products/Details/17` generuje następujące wartości trasy: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-260">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="4cedd-261">Wartości tras są określane przez podzielenie ścieżki URL na segmenty i dopasowanie do każdego segmentu przy użyciu nazwy *parametru trasy* w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-261">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="4cedd-262">Parametry trasy są nazywane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-262">Route parameters are named.</span></span> <span data-ttu-id="4cedd-263">Parametry zdefiniowane przez ujęcie nazwy parametru w nawiasach klamrowych `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-263">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="4cedd-264">Poprzedni szablon może również pasować do ścieżki `/` URL i generować wartości. `{ controller = Home, action = Index }`</span><span class="sxs-lookup"><span data-stu-id="4cedd-264">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="4cedd-265">Dzieje się tak, `{controller}` ponieważ `{action}` parametry i trasy `id` mają wartości domyślne, a parametr trasy jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-265">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="4cedd-266">Znak równości (`=`), po którym następuje wartość po nazwie parametru trasy definiuje wartość domyślną dla parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-266">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="4cedd-267">Znak zapytania (`?`) po nazwie parametru trasy definiuje opcjonalny parametr.</span><span class="sxs-lookup"><span data-stu-id="4cedd-267">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="4cedd-268">Parametry trasy z wartością domyślną *zawsze* generują wartość trasy w przypadku dopasowania trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-268">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="4cedd-269">Parametry opcjonalne nie generują wartości trasy, jeśli nie ma odpowiedniego segmentu ścieżki adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-269">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span> <span data-ttu-id="4cedd-270">Szczegółowe opisy scenariuszy i składni szablonów tras można znaleźć w sekcji [Dokumentacja dotycząca szablonu trasy](#route-template-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-270">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="4cedd-271">W poniższym przykładzie definicja `{id:int}` parametru trasy definiuje [](#route-constraint-reference) `id` ograniczenie trasy dla parametru trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-271">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="4cedd-272">Ten szablon dopasowuje ścieżkę URL, `/Products/Details/17` taką jak `/Products/Details/Apples`, ale nie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-272">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="4cedd-273">Ograniczenia trasy implementują <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> i sprawdzają wartości routingu w celu ich zweryfikowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-273">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="4cedd-274">W tym przykładzie wartość `id` trasy musi być możliwa do przekonwertowania na liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="4cedd-274">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="4cedd-275">Aby uzyskać wyjaśnienie ograniczeń trasy dostarczonych przez platformę, zobacz temat [ograniczenia trasy](#route-constraint-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-275">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="4cedd-276">Dodatkowe przeciążenia <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wartości akceptują dla `constraints`, `dataTokens`i. `defaults`</span><span class="sxs-lookup"><span data-stu-id="4cedd-276">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="4cedd-277">Typowym użyciem tych parametrów jest przekazanie anonimowo wpisanego obiektu, gdzie nazwy właściwości typu anonimowego są zgodne z nazwami parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-277">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="4cedd-278">Poniższe <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> przykłady tworzą równoważne trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-278">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="4cedd-279">Wbudowana Składnia służąca do definiowania ograniczeń i wartości domyślnych może być wygodna dla prostych tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-279">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="4cedd-280">Istnieją jednak scenariusze, takie jak tokeny danych, które nie są obsługiwane przez składnię wbudowaną.</span><span class="sxs-lookup"><span data-stu-id="4cedd-280">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="4cedd-281">Poniższy przykład ilustruje kilka dodatkowych scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-281">The following example demonstrates a few additional scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{**article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="4cedd-282">Poprzedni szablon pasuje do ścieżki URL, tak `/Blog/All-About-Routing/Introduction` jak i wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-282">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="4cedd-283">Domyślne wartości trasy dla `controller` i `action` są generowane przez trasę, nawet jeśli w szablonie nie ma odpowiednich parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-283">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="4cedd-284">Wartości domyślne można określić w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-284">Default values can be specified in the route template.</span></span> <span data-ttu-id="4cedd-285">Parametr Route jest zdefiniowany jako *przechwycenie* przez wygląd podwójnej gwiazdki (`**`) przed nazwą parametru trasy. `article`</span><span class="sxs-lookup"><span data-stu-id="4cedd-285">The `article` route parameter is defined as a *catch-all* by the appearance of an double asterisk (`**`) before the route parameter name.</span></span> <span data-ttu-id="4cedd-286">Catch-wszystkie parametry tras przechwytują resztę ścieżki URL i mogą również pasować do pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-286">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="4cedd-287">Poniższy przykład dodaje ograniczenia trasy i tokeny danych:</span><span class="sxs-lookup"><span data-stu-id="4cedd-287">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="4cedd-288">Poprzedni szablon pasuje do ścieżki URL, na `/en-US/Products/5` przykład i wyodrębnia wartości `{ controller = Products, action = Details, id = 5 }` i tokeny `{ locale = en-US }`danych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-288">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Lokalne tokeny systemu Windows](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="4cedd-290">Generowanie adresu URL klasy trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-290">Route class URL generation</span></span>

<span data-ttu-id="4cedd-291"><xref:Microsoft.AspNetCore.Routing.Route> Klasa może również wykonywać generowanie adresów URL przez połączenie zestawu wartości tras z jego szablonem trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-291">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="4cedd-292">Jest to logicznie proces odwrotny pasujący do ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-292">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-293">Aby lepiej zrozumieć generowanie adresów URL, Załóżmy, jaki adres URL ma zostać wygenerowany, a następnie pomyśl o sposobie dopasowania szablonu trasy do tego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-293">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="4cedd-294">Jakie wartości zostałyby wygenerowane?</span><span class="sxs-lookup"><span data-stu-id="4cedd-294">What values would be produced?</span></span> <span data-ttu-id="4cedd-295">Jest to sztywny odpowiednik działania generowania adresów URL w <xref:Microsoft.AspNetCore.Routing.Route> klasie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-295">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="4cedd-296">Poniższy przykład używa ogólnej trasy domyślnej ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="4cedd-296">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="4cedd-297">W przypadku wartości `{ controller = Products, action = List }`trasy zostanie wygenerowany adres `/Products/List` URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-297">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="4cedd-298">Wartości trasy są zastępowane odpowiednimi parametrami trasy w celu utworzenia ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-298">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="4cedd-299">Ponieważ `id` jest to opcjonalny parametr trasy, adres URL został pomyślnie wygenerowany bez wartości dla `id`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-299">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="4cedd-300">W przypadku wartości `{ controller = Home, action = Index }`trasy zostanie wygenerowany adres `/` URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-300">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="4cedd-301">Podane wartości trasy są zgodne z wartościami domyślnymi, a segmenty odpowiadające wartościom domyślnym są bezpiecznie pomijane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-301">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="4cedd-302">Oba adresy URL wygenerowały rundę z następującą definicją`/Home/Index` trasy `/`(i) tworzą te same wartości trasy, które zostały użyte do wygenerowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-302">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="4cedd-303">Aplikacja używająca ASP.NET Core MVC powinna używać <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> do generowania adresów URL zamiast bezpośredniego wywoływania routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-303">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="4cedd-304">Aby uzyskać więcej informacji na temat generowania adresów URL, zobacz sekcję [informacje dotyczące generowania adresów URL](#url-generation-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-304">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="4cedd-305">Korzystanie z oprogramowania pośredniczącego routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-305">Use Routing Middleware</span></span>

<span data-ttu-id="4cedd-306">Odwołuje się do [pakietu Microsoft. AspNetCore. app](xref:fundamentals/metapackage-app) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-306">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="4cedd-307">Dodaj Routing do kontenera usługi w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="4cedd-307">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="4cedd-308">Trasy muszą być skonfigurowane w `Startup.Configure` metodzie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-308">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="4cedd-309">Przykładowa aplikacja używa następujących interfejsów API:</span><span class="sxs-lookup"><span data-stu-id="4cedd-309">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="4cedd-310"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>&ndash; Dopasowuje tylko żądania HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="4cedd-310"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/3.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="4cedd-311">W poniższej tabeli przedstawiono odpowiedzi z podanym identyfikatorem URI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-311">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="4cedd-312">Identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="4cedd-312">URI</span></span>                    | <span data-ttu-id="4cedd-313">Odpowiedź</span><span class="sxs-lookup"><span data-stu-id="4cedd-313">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="4cedd-314">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-314">Hello!</span></span> <span data-ttu-id="4cedd-315">Wartości trasy: [Operation, Create], [ID, 3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-315">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="4cedd-316">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-316">Hello!</span></span> <span data-ttu-id="4cedd-317">Wartości trasy: [Operation, Track], [ID,-3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-317">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="4cedd-318">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-318">Hello!</span></span> <span data-ttu-id="4cedd-319">Wartości trasy: [Operation, Track], [ID,-3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-319">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="4cedd-320">Żądanie przepada w, brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-320">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="4cedd-321">Witaj, Jan!</span><span class="sxs-lookup"><span data-stu-id="4cedd-321">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="4cedd-322">Żądanie przepada w, dopasowuje tylko HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="4cedd-322">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="4cedd-323">Żądanie przepada w, brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-323">The request falls through, no match.</span></span>              |

<span data-ttu-id="4cedd-324">Struktura zawiera zestaw metod rozszerzających do tworzenia tras (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span><span class="sxs-lookup"><span data-stu-id="4cedd-324">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

<span data-ttu-id="4cedd-325">`Map[Verb]` Metody służą do ograniczania trasy do zlecenia HTTP w nazwie metody.</span><span class="sxs-lookup"><span data-stu-id="4cedd-325">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="4cedd-326">Na przykład zobacz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> i <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-326">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="4cedd-327">Odwołanie do szablonu trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-327">Route template reference</span></span>

<span data-ttu-id="4cedd-328">Tokeny w nawiasach klamrowych (`{ ... }`) definiują *Parametry trasy* , które są powiązane w przypadku dopasowania trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-328">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="4cedd-329">Można zdefiniować więcej niż jeden parametr trasy w segmencie trasy, ale muszą one być oddzielone wartością literału.</span><span class="sxs-lookup"><span data-stu-id="4cedd-329">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="4cedd-330">Na przykład `{controller=Home}{action=Index}` nie jest prawidłową trasą, ponieważ nie ma wartości literału między `{controller}` i `{action}`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-330">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="4cedd-331">Te parametry trasy muszą mieć nazwę i mogą mieć określone dodatkowe atrybuty.</span><span class="sxs-lookup"><span data-stu-id="4cedd-331">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="4cedd-332">Tekst literału inny niż parametry trasy (na przykład `{id}`) i separator `/` ścieżki muszą być zgodne z tekstem w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-332">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="4cedd-333">W dopasowaniu do tekstu nie jest rozróżniana wielkość liter i w oparciu o zdekodowaną reprezentację ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-333">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="4cedd-334">Aby dopasować Ogranicznik parametru`{` trasy literału (lub `}`), należy wprowadzić ogranicznik przez powtórzenie znaku (`{{` lub `}}`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-334">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="4cedd-335">Wzorce adresów URL, które próbują przechwycić nazwę pliku z opcjonalnym rozszerzeniem pliku, mają dodatkowe uwagi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-335">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="4cedd-336">Rozważmy na przykład szablon `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-336">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="4cedd-337">Gdy wartości obu `filename` i `ext` istnieją, są wypełniane obie wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-337">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="4cedd-338">Jeśli w adresie URL `filename` znajduje się tylko wartość parametru, trasa pasuje do, ponieważ końcowy okres (`.`) jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-338">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="4cedd-339">Następujące adresy URL pasują do tej trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-339">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="4cedd-340">Możesz użyć gwiazdki (`*`) lub podwójnej gwiazdki (`**`) jako prefiksu do parametru trasy, aby powiązać z pozostałą częścią identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-340">You can use an asterisk (`*`) or double asterisk (`**`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="4cedd-341">Są one nazywane parametrami *przechwycenia* .</span><span class="sxs-lookup"><span data-stu-id="4cedd-341">These are called a *catch-all* parameters.</span></span> <span data-ttu-id="4cedd-342">Na przykład `blog/{**slug}` dopasowuje dowolny identyfikator URI, który `/blog` rozpoczyna się od i ma dowolną wartość, `slug` która jest przypisana do wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-342">For example, `blog/{**slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="4cedd-343">Catch-wszystkie parametry można także dopasować do pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-343">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="4cedd-344">Parametr catch-all wyprowadza odpowiednie znaki, gdy trasa jest używana do generowania adresu URL, włącznie z separatorami ścieżki (`/`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-344">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="4cedd-345">Na przykład trasa `foo/{*path}` z wartościami `{ path = "my/path" }` trasy jest generowana `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-345">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="4cedd-346">Zwróć uwagę na odwrócony ukośnik.</span><span class="sxs-lookup"><span data-stu-id="4cedd-346">Note the escaped forward slash.</span></span> <span data-ttu-id="4cedd-347">Aby zaokrąglić znaki separatora ścieżki, użyj `**` prefiksu parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-347">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="4cedd-348">Trasa `foo/{**path}` z `{ path = "my/path" }` generowaniem `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-348">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

<span data-ttu-id="4cedd-349">Parametry trasy mogą mieć *wartości domyślne* , określając wartość domyślną po nazwie parametru oddzielone znakiem równości (`=`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-349">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="4cedd-350">Na przykład `{controller=Home}` definiuje `Home` jako wartość domyślną dla `controller`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-350">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="4cedd-351">Wartość domyślna jest używana, jeśli żadna wartość nie jest obecna w adresie URL dla parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-351">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="4cedd-352">Parametry trasy są opcjonalne przez dołączenie znaku zapytania (`?`) na końcu nazwy parametru, jak w. `id?`</span><span class="sxs-lookup"><span data-stu-id="4cedd-352">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="4cedd-353">Różnica między wartościami opcjonalnymi i domyślnymi parametrami trasy polega na tym, że parametr trasy z wartością domyślną zawsze&mdash;tworzy wartość, a opcjonalny parametr ma wartość tylko wtedy, gdy wartość jest dostarczana przez adres URL żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-353">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="4cedd-354">Parametry trasy mogą mieć ograniczenia, które muszą być zgodne z wartością trasy powiązaną z adresem URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-354">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="4cedd-355">Dodanie dwukropka`:`() i nazwy ograniczenia po nazwie parametru trasy określa *ograniczenie wbudowane* dla parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-355">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="4cedd-356">Jeśli ograniczenie wymaga argumentów, są one ujęte w nawiasy (`(...)`) po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-356">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="4cedd-357">Można określić wiele ograniczeń wbudowanych, dołączając inną dwukropek (`:`) i nazwę ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-357">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="4cedd-358">Nazwa i argumenty ograniczenia są przekazane do <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> usługi w celu utworzenia <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> wystąpienia do użycia w przetwarzaniu adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-358">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="4cedd-359">Na przykład szablon `blog/{article:minlength(10)}` trasy `minlength` określa ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-359">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="4cedd-360">Aby uzyskać więcej informacji na temat ograniczeń trasy i listę ograniczeń zapewnianych przez platformę, zobacz sekcję [odwołanie do ograniczenia trasy](#route-constraint-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-360">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

<span data-ttu-id="4cedd-361">Parametry trasy mogą także mieć Transformatory parametrów, które przekształcają wartość parametru podczas generowania linków i dopasowywania stron do adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-361">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URLs.</span></span> <span data-ttu-id="4cedd-362">Podobnie jak ograniczenia, transformatory parametrów mogą być dodawane wewnętrznie do parametru trasy przez dodanie dwukropka (`:`) i nazwy transformatora po nazwie parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-362">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="4cedd-363">Na przykład szablon `blog/{article:slugify}` trasy `slugify` określa transformator.</span><span class="sxs-lookup"><span data-stu-id="4cedd-363">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span> <span data-ttu-id="4cedd-364">Aby uzyskać więcej informacji na temat transformatorów parametrów, zobacz sekcję [informacje dotyczące transformatora parametrów](#parameter-transformer-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-364">For more information on parameter transformers, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

<span data-ttu-id="4cedd-365">W poniższej tabeli przedstawiono przykładowe szablony tras i ich zachowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-365">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="4cedd-366">Szablon trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-366">Route Template</span></span>                           | <span data-ttu-id="4cedd-367">Przykładowy pasujący identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="4cedd-367">Example Matching URI</span></span>    | <span data-ttu-id="4cedd-368">Identyfikator URI żądania&hellip;</span><span class="sxs-lookup"><span data-stu-id="4cedd-368">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="4cedd-369">Dopasowuje tylko jedną ścieżkę `/hello`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-369">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="4cedd-370">Dopasowuje i `Page` ustawia `Home`jako.</span><span class="sxs-lookup"><span data-stu-id="4cedd-370">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="4cedd-371">Dopasowuje i `Page` ustawia `Contact`jako.</span><span class="sxs-lookup"><span data-stu-id="4cedd-371">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="4cedd-372">Mapuje do `Products` kontrolera i `List` akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-372">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="4cedd-373">Mapuje do `Products` kontrolera i `Details` akcji (`id` ustawienie na 123).</span><span class="sxs-lookup"><span data-stu-id="4cedd-373">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="4cedd-374">Mapuje na `Home` kontroler i `Index` metodę (`id` jest ignorowana).</span><span class="sxs-lookup"><span data-stu-id="4cedd-374">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="4cedd-375">Użycie szablonu jest ogólnie najprostszym podejściem do routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-375">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="4cedd-376">Ograniczenia i wartości domyślne można także określić poza szablonem trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-376">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-377">Włącz [Rejestrowanie](xref:fundamentals/logging/index) , aby zobaczyć, jak wbudowane implementacje routingu, takie jak <xref:Microsoft.AspNetCore.Routing.Route>, dopasowują żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-377">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="4cedd-378">Zastrzeżone nazwy routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-378">Reserved routing names</span></span>

<span data-ttu-id="4cedd-379">Następujące słowa kluczowe są nazwami zarezerwowanymi i nie mogą być używane jako nazwy tras lub parametry:</span><span class="sxs-lookup"><span data-stu-id="4cedd-379">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="4cedd-380">Odwołanie do ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-380">Route constraint reference</span></span>

<span data-ttu-id="4cedd-381">Ograniczenia trasy są wykonywane, gdy nastąpiło dopasowanie do przychodzącego adresu URL, a Ścieżka adresu URL jest zgodna z wartościami trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-381">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="4cedd-382">Ograniczenia trasy zwykle sprawdzają wartość trasy skojarzoną za pośrednictwem szablonu trasy i podejmują decyzję o tym, czy wartość jest akceptowalna.</span><span class="sxs-lookup"><span data-stu-id="4cedd-382">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="4cedd-383">Niektóre ograniczenia trasy używają danych poza wartością trasy, aby uwzględnić, czy żądanie może być kierowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-383">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="4cedd-384">Na przykład <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> może akceptować lub odrzucać żądanie na podstawie jego zlecenia http.</span><span class="sxs-lookup"><span data-stu-id="4cedd-384">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="4cedd-385">Ograniczenia są używane w żądaniach routingu i generowania linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-385">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="4cedd-386">Nie używaj ograniczeń **sprawdzania poprawności danych wejściowych**.</span><span class="sxs-lookup"><span data-stu-id="4cedd-386">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="4cedd-387">Jeśli ograniczenia są używane do **sprawdzania poprawności danych wejściowych**, nieprawidłowe dane wejściowe w odpowiedzi *404 — nie znaleziono* , zamiast *żądania 400-złe* z odpowiednim komunikatem o błędzie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-387">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="4cedd-388">Ograniczenia trasy są **używane do** odróżniania podobnych tras, a nie do sprawdzania danych wejściowych dla określonej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-388">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="4cedd-389">W poniższej tabeli przedstawiono przykładowe ograniczenia trasy i ich oczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-389">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="4cedd-390">ograniczenie</span><span class="sxs-lookup"><span data-stu-id="4cedd-390">constraint</span></span> | <span data-ttu-id="4cedd-391">Przykład</span><span class="sxs-lookup"><span data-stu-id="4cedd-391">Example</span></span> | <span data-ttu-id="4cedd-392">Przykładowe dopasowania</span><span class="sxs-lookup"><span data-stu-id="4cedd-392">Example Matches</span></span> | <span data-ttu-id="4cedd-393">Uwagi</span><span class="sxs-lookup"><span data-stu-id="4cedd-393">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="4cedd-394">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="4cedd-394">`123456789`, `-123456789`</span></span> | <span data-ttu-id="4cedd-395">Dopasowuje dowolną liczbę całkowitą</span><span class="sxs-lookup"><span data-stu-id="4cedd-395">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="4cedd-396">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="4cedd-396">`true`, `FALSE`</span></span> | <span data-ttu-id="4cedd-397">`true` Dopasowuje `false` lub (bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="4cedd-397">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="4cedd-398">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="4cedd-398">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="4cedd-399">Dopasowuje prawidłową `DateTime` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-399">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="4cedd-400">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="4cedd-400">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="4cedd-401">Dopasowuje prawidłową `decimal` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-401">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="4cedd-402">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="4cedd-402">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="4cedd-403">Dopasowuje prawidłową `double` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-403">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="4cedd-404">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="4cedd-404">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="4cedd-405">Dopasowuje prawidłową `float` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-405">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="4cedd-406">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="4cedd-406">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="4cedd-407">Dopasowuje prawidłową `Guid` wartość</span><span class="sxs-lookup"><span data-stu-id="4cedd-407">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="4cedd-408">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="4cedd-408">`123456789`, `-123456789`</span></span> | <span data-ttu-id="4cedd-409">Dopasowuje prawidłową `long` wartość</span><span class="sxs-lookup"><span data-stu-id="4cedd-409">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="4cedd-410">Ciąg musi składać się z co najmniej 4 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-410">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="4cedd-411">Ciąg nie może zawierać więcej niż 8 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-411">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="4cedd-412">Ciąg musi zawierać dokładnie 12 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-412">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="4cedd-413">Ciąg musi mieć długość co najmniej 8 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-413">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="4cedd-414">Wartość całkowita musi być równa co najmniej 18</span><span class="sxs-lookup"><span data-stu-id="4cedd-414">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="4cedd-415">Wartość całkowita nie może być większa niż 120</span><span class="sxs-lookup"><span data-stu-id="4cedd-415">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="4cedd-416">Wartość całkowita musi być równa co najmniej 18, ale nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="4cedd-416">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="4cedd-417">Ciąg musi zawierać co najmniej jeden znak alfabetyczny (`a`-`z`bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="4cedd-417">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="4cedd-418">Ciąg musi być zgodny z wyrażeniem regularnym (zobacz Porady dotyczące definiowania wyrażenia regularnego)</span><span class="sxs-lookup"><span data-stu-id="4cedd-418">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="4cedd-419">Służy do wymuszania, że podczas generowania adresu URL jest obecna wartość, która nie jest wartością parametru</span><span class="sxs-lookup"><span data-stu-id="4cedd-419">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="4cedd-420">Wielokrotne ograniczenia rozdzielane średnikami można zastosować do jednego parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-420">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="4cedd-421">Na przykład następujące ograniczenie ogranicza parametr do wartości całkowitej 1 lub wyższej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-421">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="4cedd-422">Ograniczenia trasy, które weryfikują adres URL i są konwertowane na typ CLR (takie `int` jak `DateTime`lub), zawsze używają niezmiennej kultury.</span><span class="sxs-lookup"><span data-stu-id="4cedd-422">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="4cedd-423">W tych ograniczeniach przyjęto założenie, że adres URL nie jest Lokalizowalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-423">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="4cedd-424">Ograniczenia trasy dostarczone przez platformę nie modyfikują wartości przechowywanych w wartościach trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-424">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="4cedd-425">Wszystkie wartości tras analizowane na podstawie adresu URL są przechowywane jako ciągi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-425">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="4cedd-426">Na przykład, `float` ograniczenie próbuje przekonwertować wartość trasy na float, ale przekonwertowana wartość jest używana tylko do sprawdzenia, czy może być konwertowana na typ float.</span><span class="sxs-lookup"><span data-stu-id="4cedd-426">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="4cedd-427">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="4cedd-427">Regular expressions</span></span>

<span data-ttu-id="4cedd-428">ASP.NET Core Framework dodaje `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` do konstruktora wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-428">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="4cedd-429">Aby <xref:System.Text.RegularExpressions.RegexOptions> uzyskać opis tych elementów członkowskich, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-429">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="4cedd-430">Wyrażenia regularne używają ograniczników i tokenów podobnych do tych używanych w ramach routingu i C# języka.</span><span class="sxs-lookup"><span data-stu-id="4cedd-430">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="4cedd-431">Tokeny wyrażenia regularnego muszą być zmienione.</span><span class="sxs-lookup"><span data-stu-id="4cedd-431">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="4cedd-432">Aby użyć wyrażenia `^\d{3}-\d{2}-\d{4}$` regularnego w routingu, wyrażenie musi `\` mieć (pojedynczy ukośnik odwrotny) podany w ciągu jako `\\` znak (podwójny ukośnik odwrotny) w pliku C# źródłowym w celu ucieczki `\` znak ucieczki ciągu (chyba, że używane są [literały ciągu Verbatim](/dotnet/csharp/language-reference/keywords/string)).</span><span class="sxs-lookup"><span data-stu-id="4cedd-432">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing, the expression must have the `\` (single backslash) characters provided in the string as `\\` (double backslash) characters in the C# source file in order to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string)).</span></span> <span data-ttu-id="4cedd-433">Na znaki ogranicznika parametru routingu ucieczki (`{`, `}`, `[` `]`,) `[[``{{` ,podwójne`}`znaki w wyrażeniu (,,, ).`]]`</span><span class="sxs-lookup"><span data-stu-id="4cedd-433">To escape routing parameter delimiter characters (`{`, `}`, `[`, `]`), double the characters in the expression (`{{`, `}`, `[[`, `]]`).</span></span> <span data-ttu-id="4cedd-434">W poniższej tabeli przedstawiono wyrażenie regularne i wersja z ucieczką.</span><span class="sxs-lookup"><span data-stu-id="4cedd-434">The following table shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="4cedd-435">Wyrażenie regularne</span><span class="sxs-lookup"><span data-stu-id="4cedd-435">Regular Expression</span></span>    | <span data-ttu-id="4cedd-436">Wyrażenie regularne o zmienionym znaczeniu</span><span class="sxs-lookup"><span data-stu-id="4cedd-436">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="4cedd-437">Wyrażenia regularne używane w routingu często zaczynają się od znaku`^`daszka () i dopasowują pozycję początkową ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-437">Regular expressions used in routing often start with the caret (`^`) character and match starting position of the string.</span></span> <span data-ttu-id="4cedd-438">Wyrażenia często kończą się znakiem dolara (`$`) i końcem ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-438">The expressions often end with the dollar sign (`$`) character and match end of the string.</span></span> <span data-ttu-id="4cedd-439">Znaki `^` i`$` zapewniają, że wyrażenie regularne dopasowuje całą wartość parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-439">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="4cedd-440">Bez znaków `$` i wyrażenie regularne dopasowuje dowolny podciąg w ciągu, co jest często niepożądane. `^`</span><span class="sxs-lookup"><span data-stu-id="4cedd-440">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="4cedd-441">W poniższej tabeli przedstawiono przykłady i wyjaśniono, dlaczego są one zgodne lub niezgodne.</span><span class="sxs-lookup"><span data-stu-id="4cedd-441">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="4cedd-442">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="4cedd-442">Expression</span></span>   | <span data-ttu-id="4cedd-443">String</span><span class="sxs-lookup"><span data-stu-id="4cedd-443">String</span></span>    | <span data-ttu-id="4cedd-444">Dopasowanie</span><span class="sxs-lookup"><span data-stu-id="4cedd-444">Match</span></span> | <span data-ttu-id="4cedd-445">Komentarz</span><span class="sxs-lookup"><span data-stu-id="4cedd-445">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-446">Cześć</span><span class="sxs-lookup"><span data-stu-id="4cedd-446">hello</span></span>     | <span data-ttu-id="4cedd-447">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-447">Yes</span></span>   | <span data-ttu-id="4cedd-448">Dopasowania podciągów</span><span class="sxs-lookup"><span data-stu-id="4cedd-448">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-449">123abc456</span><span class="sxs-lookup"><span data-stu-id="4cedd-449">123abc456</span></span> | <span data-ttu-id="4cedd-450">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-450">Yes</span></span>   | <span data-ttu-id="4cedd-451">Dopasowania podciągów</span><span class="sxs-lookup"><span data-stu-id="4cedd-451">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-452">mz</span><span class="sxs-lookup"><span data-stu-id="4cedd-452">mz</span></span>        | <span data-ttu-id="4cedd-453">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-453">Yes</span></span>   | <span data-ttu-id="4cedd-454">Wyrażenie dopasowania</span><span class="sxs-lookup"><span data-stu-id="4cedd-454">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-455">MZ</span><span class="sxs-lookup"><span data-stu-id="4cedd-455">MZ</span></span>        | <span data-ttu-id="4cedd-456">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-456">Yes</span></span>   | <span data-ttu-id="4cedd-457">Bez uwzględniania wielkości liter</span><span class="sxs-lookup"><span data-stu-id="4cedd-457">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="4cedd-458">Cześć</span><span class="sxs-lookup"><span data-stu-id="4cedd-458">hello</span></span>     | <span data-ttu-id="4cedd-459">Nie</span><span class="sxs-lookup"><span data-stu-id="4cedd-459">No</span></span>    | <span data-ttu-id="4cedd-460">Zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="4cedd-460">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="4cedd-461">123abc456</span><span class="sxs-lookup"><span data-stu-id="4cedd-461">123abc456</span></span> | <span data-ttu-id="4cedd-462">Nie</span><span class="sxs-lookup"><span data-stu-id="4cedd-462">No</span></span>    | <span data-ttu-id="4cedd-463">Zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="4cedd-463">See `^` and `$` above</span></span> |

<span data-ttu-id="4cedd-464">Aby uzyskać więcej informacji na temat składni wyrażeń regularnych, zobacz [.NET Framework wyrażeń regularnych](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="4cedd-464">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="4cedd-465">Aby ograniczyć parametr do znanego zestawu możliwych wartości, użyj wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-465">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="4cedd-466">`{action:regex(^(list|get|create)$)}` Na przykład `list` `get`dopasowuje wartość `create`trasy do,, lub. `action`</span><span class="sxs-lookup"><span data-stu-id="4cedd-466">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="4cedd-467">Jeśli przeszedł do słownika ograniczeń, ciąg `^(list|get|create)$` jest równoważny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-467">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="4cedd-468">Ograniczenia, które są przesyłane w słowniku ograniczenia (nie wbudowane w szablon), które nie pasują do jednego ze znanych ograniczeń, są również traktowane jako wyrażenia regularne.</span><span class="sxs-lookup"><span data-stu-id="4cedd-468">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="4cedd-469">Niestandardowe ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-469">Custom Route Constraints</span></span>

<span data-ttu-id="4cedd-470">Oprócz wbudowanych ograniczeń trasy niestandardowe ograniczenia trasy mogą być tworzone przez implementację <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-470">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="4cedd-471">Interfejs zawiera jedną metodę, która zwraca `Match` `true` , jeśli ograniczenie jest spełnione i `false` w przeciwnym razie. <xref:Microsoft.AspNetCore.Routing.IRouteConstraint></span><span class="sxs-lookup"><span data-stu-id="4cedd-471">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="4cedd-472">Aby użyć niestandardowego <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, typ ograniczenia trasy musi być zarejestrowany <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> w aplikacji w kontenerze usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-472">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="4cedd-473">Jest słownikiem, który mapuje klucze ograniczeń trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> do implementacji, które weryfikują te ograniczenia. <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap></span><span class="sxs-lookup"><span data-stu-id="4cedd-473">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="4cedd-474">Aplikację <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> można zaktualizować w `Startup.ConfigureServices` ramach [usług. Wywołanie addrouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) lub przez skonfigurowanie <xref:Microsoft.AspNetCore.Routing.RouteOptions> bezpośrednio w `services.Configure<RouteOptions>`usłudze.</span><span class="sxs-lookup"><span data-stu-id="4cedd-474">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="4cedd-475">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="4cedd-475">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="4cedd-476">Ograniczenie można następnie zastosować do tras w zwykły sposób, przy użyciu nazwy określonej podczas rejestrowania typu ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-476">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="4cedd-477">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="4cedd-477">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

## <a name="parameter-transformer-reference"></a><span data-ttu-id="4cedd-478">Odwołanie do transformatora parametrów</span><span class="sxs-lookup"><span data-stu-id="4cedd-478">Parameter transformer reference</span></span>

<span data-ttu-id="4cedd-479">Transformatory parametrów:</span><span class="sxs-lookup"><span data-stu-id="4cedd-479">Parameter transformers:</span></span>

* <span data-ttu-id="4cedd-480">Wykonaj podczas generowania linku dla elementu <xref:Microsoft.AspNetCore.Routing.Route>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-480">Execute when generating a link for a <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>
* <span data-ttu-id="4cedd-481">Implementacja `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-481">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="4cedd-482">Są konfigurowane przy <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>użyciu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-482">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="4cedd-483">Wypełnij wartość trasy parametru i Przekształć ją na nową wartość ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-483">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="4cedd-484">Wynikiem jest użycie przekształconej wartości w wygenerowanym łączu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-484">Result in using the transformed value in the generated link.</span></span>

<span data-ttu-id="4cedd-485">Na przykład niestandardowy `slugify` transformator parametrów w wzorcu `blog\{article:slugify}` trasy z `Url.Action(new { article = "MyTestArticle" })` generowaniem `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-485">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="4cedd-486">Aby użyć transformatora parametrów w wzorcu trasy, skonfiguruj go najpierw za <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> pomocą `Startup.ConfigureServices`polecenia w programie:</span><span class="sxs-lookup"><span data-stu-id="4cedd-486">To use a parameter transformer in a route pattern, configure it first using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddRouting(options =>
{
    // Replace the type and the name used to refer to it with your own
    // IOutboundParameterTransformer implementation
    options.ConstraintMap["slugify"] = typeof(SlugifyParameterTransformer);
});
```

<span data-ttu-id="4cedd-487">Transformatory parametrów są używane przez platformę do przekształcania identyfikatora URI, w którym jest rozpoznawany punkt końcowy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-487">Parameter transformers are used by the framework to transform the URI where an endpoint resolves.</span></span> <span data-ttu-id="4cedd-488">Na przykład ASP.NET Core MVC używa transformatorów parametrów do przekształcenia wartości trasy używanej do `area`dopasowania do `action`, `controller`,, i `page`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-488">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller:slugify=Home}/{action:slugify=Index}/{id?}");
```

<span data-ttu-id="4cedd-489">W przypadku poprzedniej trasy Akcja `SubscriptionManagementController.GetAll()` jest dopasowywana do identyfikatora URI. `/subscription-management/get-all`</span><span class="sxs-lookup"><span data-stu-id="4cedd-489">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="4cedd-490">Transformator parametrów nie zmienia wartości trasy użytych do wygenerowania linku.</span><span class="sxs-lookup"><span data-stu-id="4cedd-490">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="4cedd-491">Na przykład `Url.Action("GetAll", "SubscriptionManagement")` dane wyjściowe `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-491">For example, `Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="4cedd-492">ASP.NET Core udostępnia konwencje interfejsu API do używania transformatorów parametrów z wygenerowanymi trasami:</span><span class="sxs-lookup"><span data-stu-id="4cedd-492">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="4cedd-493">ASP.NET Core MVC ma `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` Konwencję interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-493">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="4cedd-494">Ta Konwencja stosuje określony transformator parametrów do wszystkich tras atrybutów w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-494">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="4cedd-495">Transformator parametrów przekształca tokeny trasy atrybutów po ich wymianie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-495">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="4cedd-496">Aby uzyskać więcej informacji, zobacz [używanie transformatora parametrów do dostosowywania zastępowania tokenu](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="4cedd-496">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="4cedd-497">Razor Pages ma `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` Konwencję interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-497">Razor Pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="4cedd-498">Ta Konwencja stosuje określony transformator parametrów do wszystkich automatycznie odnalezionych Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-498">This convention applies a specified parameter transformer to all automatically discovered Razor Pages.</span></span> <span data-ttu-id="4cedd-499">Transformator parametrów przekształca segmenty i nazwy plików Razor Pages tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-499">The parameter transformer transforms the folder and file name segments of Razor Pages routes.</span></span> <span data-ttu-id="4cedd-500">Aby uzyskać więcej informacji, zobacz [używanie transformatora parametrów do dostosowywania tras stron](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="4cedd-500">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="4cedd-501">Odwołanie do generacji adresów URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-501">URL generation reference</span></span>

<span data-ttu-id="4cedd-502">Poniższy przykład pokazuje, jak wygenerować link do trasy, używając słownika wartości tras i <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-502">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/3.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="4cedd-503">Wygenerowano na końcu powyższego `/package/create/123`przykładu. <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath></span><span class="sxs-lookup"><span data-stu-id="4cedd-503">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="4cedd-504">Słownik `operation` zawiera wartości i `id` trasy szablonu "śledzenie trasy `package/{operation}/{id}`pakietu".</span><span class="sxs-lookup"><span data-stu-id="4cedd-504">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="4cedd-505">Aby uzyskać szczegółowe informacje, zapoznaj się z przykładowym kodem w sekcji [Używanie oprogramowania pośredniczącego usługi routingu](#use-routing-middleware) lub [przykładowej aplikacji](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="4cedd-505">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="4cedd-506">Drugi parametr <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> konstruktora jest kolekcją *wartości otoczenia*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-506">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="4cedd-507">Wartości otoczenia są wygodne do użycia, ponieważ ograniczają liczbę wartości, które Deweloper musi określić w kontekście żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-507">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="4cedd-508">Bieżące wartości trasy bieżącego żądania są uznawane za wartości otoczenia dla generacji łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-508">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="4cedd-509">`About` W akcji `Index` `Home` &mdash;aplikacji ASP.NET Core MVC ,nietrzebaokreślaćwartościtrasykontroleradołączeniazakcją,wktórejjestużywanawartośćotoczenia.`HomeController`</span><span class="sxs-lookup"><span data-stu-id="4cedd-509">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="4cedd-510">Wartości otoczenia, które nie pasują do parametru, są ignorowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-510">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="4cedd-511">Wartości otoczenia są również ignorowane, gdy jawnie podana wartość przesłania wartość otoczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-511">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="4cedd-512">Dopasowanie występuje od lewej do prawej w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-512">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="4cedd-513">Wartości jawnie podane, ale które nie pasują do segmentu trasy, są dodawane do ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-513">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="4cedd-514">W poniższej tabeli przedstawiono wynik przy użyciu szablonu `{controller}/{action}/{id?}`trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-514">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="4cedd-515">Wartości otoczenia</span><span class="sxs-lookup"><span data-stu-id="4cedd-515">Ambient Values</span></span>                     | <span data-ttu-id="4cedd-516">Wartości jawne</span><span class="sxs-lookup"><span data-stu-id="4cedd-516">Explicit Values</span></span>                        | <span data-ttu-id="4cedd-517">Wynik</span><span class="sxs-lookup"><span data-stu-id="4cedd-517">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="4cedd-518">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-518">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-519">Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-519">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="4cedd-520">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-520">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-521">Controller = "Order", Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-521">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="4cedd-522">Controller = "Home", Color = "Red"</span><span class="sxs-lookup"><span data-stu-id="4cedd-522">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="4cedd-523">Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-523">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="4cedd-524">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-524">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-525">Action = "informacje", Color = "Red"</span><span class="sxs-lookup"><span data-stu-id="4cedd-525">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="4cedd-526">Jeśli trasa ma wartość domyślną, która nie odpowiada parametrowi, a ta wartość jest jawnie określona, musi być zgodna z wartością domyślną:</span><span class="sxs-lookup"><span data-stu-id="4cedd-526">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="4cedd-527">Generowanie linku generuje tylko łącze do tej trasy, gdy zostaną podane pasujące `action` wartości dla `controller` i.</span><span class="sxs-lookup"><span data-stu-id="4cedd-527">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="4cedd-528">Złożone segmenty</span><span class="sxs-lookup"><span data-stu-id="4cedd-528">Complex segments</span></span>

<span data-ttu-id="4cedd-529">Złożone segmenty (na `[Route("/x{token}y")]`przykład) są przetwarzane przez dopasowanie literałów z prawej strony do lewej w sposób niezachłanney.</span><span class="sxs-lookup"><span data-stu-id="4cedd-529">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="4cedd-530">[Ten kod](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) zawiera szczegółowy opis sposobu dopasowywania segmentów złożonych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-530">See [this code](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="4cedd-531">[Przykład kodu](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) nie jest używany przez ASP.NET Core, ale zapewnia dobre wyjaśnienie złożonych segmentów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-531">The [code sample](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>
<!-- While that code is no longer used by ASP.NET Core for complex segment matching, it provides a good match to the current algorithm. The [current code](https://github.com/aspnet/AspNetCore/blob/91514c9af7e0f4c44029b51f05a01c6fe4c96e4c/src/Http/Routing/src/Matching/DfaMatcherBuilder.cs#L227-L244) is too abstracted from matching to be useful for understanding complex segment matching.
-->

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="4cedd-532">Routing jest odpowiedzialny za mapowanie identyfikatorów URI żądań na punkty końcowe i wysyłanie żądań przychodzących do tych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-532">Routing is responsible for mapping request URIs to endpoints and dispatching incoming requests to those endpoints.</span></span> <span data-ttu-id="4cedd-533">Trasy są zdefiniowane w aplikacji i konfigurowane podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-533">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="4cedd-534">Trasa może opcjonalnie wyodrębnić wartości z adresu URL zawartego w żądaniu. te wartości mogą być następnie używane do przetwarzania żądań.</span><span class="sxs-lookup"><span data-stu-id="4cedd-534">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="4cedd-535">Przy użyciu informacji o trasie z aplikacji Routing jest również w stanie generować adresy URL mapowane na punkty końcowe.</span><span class="sxs-lookup"><span data-stu-id="4cedd-535">Using route information from the app, routing is also able to generate URLs that map to endpoints.</span></span>

<span data-ttu-id="4cedd-536">Aby użyć najnowszych scenariuszy routingu w ASP.NET Core 2,2, określ [wersję zgodności](xref:mvc/compatibility-version) do rejestracji usług MVC w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="4cedd-536">To use the latest routing scenarios in ASP.NET Core 2.2, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="4cedd-537">Opcja <xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> określa, czy funkcja routingu powinna wewnętrznie używać logiki opartej na punkcie <xref:Microsoft.AspNetCore.Routing.IRouter>końcowym lub logiki opartej na ASP.NET Core 2,1 lub starszej.</span><span class="sxs-lookup"><span data-stu-id="4cedd-537">The <xref:Microsoft.AspNetCore.Mvc.MvcOptions.EnableEndpointRouting> option determines if routing should internally use endpoint-based logic or the <xref:Microsoft.AspNetCore.Routing.IRouter>-based logic of ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="4cedd-538">Gdy wersja zgodności jest ustawiona na 2,2 lub nowszej, wartość domyślna to `true`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-538">When the compatibility version is set to 2.2 or later, the default value is `true`.</span></span> <span data-ttu-id="4cedd-539">Ustaw wartość `false` na, aby użyć poprzedniej logiki routingu:</span><span class="sxs-lookup"><span data-stu-id="4cedd-539">Set the value to `false` to use the prior routing logic:</span></span>

```csharp
// Use the routing logic of ASP.NET Core 2.1 or earlier:
services.AddMvc(options => options.EnableEndpointRouting = false)
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_2);
```

<span data-ttu-id="4cedd-540">Więcej informacji na temat <xref:Microsoft.AspNetCore.Routing.IRouter>routingu opartego na usłudze można znaleźć w [wersji ASP.NET Core 2,1 tego tematu](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span><span class="sxs-lookup"><span data-stu-id="4cedd-540">For more information on <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, see the [ASP.NET Core 2.1 version of this topic](/aspnet/core/fundamentals/routing?view=aspnetcore-2.1).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4cedd-541">Ten dokument obejmuje Routing ASP.NET Core niskiego poziomu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-541">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="4cedd-542">Aby uzyskać informacje na temat ASP.NET Core routingu MVC <xref:mvc/controllers/routing>, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-542">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="4cedd-543">Aby uzyskać informacje na temat Konwencji routingu w Razor Pages <xref:razor-pages/razor-pages-conventions>, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-543">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="4cedd-544">[Wyświetlanie lub pobieranie przykładowego kodu](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([sposobu pobierania](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="4cedd-544">[View or download sample code](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="4cedd-545">Podstawy routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-545">Routing basics</span></span>

<span data-ttu-id="4cedd-546">Większość aplikacji powinna wybrać podstawowy i opisowy schemat routingu, aby adresy URL były czytelne i zrozumiałe.</span><span class="sxs-lookup"><span data-stu-id="4cedd-546">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="4cedd-547">Domyślna trasa `{controller=Home}/{action=Index}/{id?}`konwencjonalna:</span><span class="sxs-lookup"><span data-stu-id="4cedd-547">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="4cedd-548">Obsługuje podstawowy i opisowy schemat routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-548">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="4cedd-549">Jest użytecznym punktem wyjścia dla aplikacji opartych na interfejsie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4cedd-549">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="4cedd-550">Deweloperzy często dodają dodatkowe trasy zwięzła do obszarów o dużym ruchu w aplikacji w wyspecjalizowanych sytuacjach (na przykład blog i punkty końcowe handlu elektronicznego) przy użyciu [routingu atrybutów](xref:mvc/controllers/routing#attribute-routing) lub dedykowanych tras konwencjonalnych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-550">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations (for example, blog and ecommerce endpoints) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="4cedd-551">Interfejsy API sieci Web powinny używać routingu atrybutów do modelowania funkcjonalności aplikacji jako zestawu zasobów, w których operacje są reprezentowane przez zlecenia HTTP.</span><span class="sxs-lookup"><span data-stu-id="4cedd-551">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="4cedd-552">Oznacza to, że wiele operacji (na przykład GET, POST) dla tego samego zasobu logicznego będzie używać tego samego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-552">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="4cedd-553">Routing atrybutu zapewnia poziom kontroli, który jest wymagany do dokładnego projektowania układu publicznego punktu końcowego interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-553">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="4cedd-554">Aplikacje Razor Pages używają domyślnego routingu konwencjonalnego do obsłużenia nazwanych zasobów w folderze *strony* aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-554">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="4cedd-555">Dostępne są dodatkowe konwencje, które umożliwiają dostosowanie Razor Pages zachowaniem routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-555">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="4cedd-556">Aby uzyskać więcej informacji, zobacz <xref:razor-pages/index> i <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-556">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="4cedd-557">Obsługa generowania adresów URL umożliwia tworzenie aplikacji bez adresów URL, które mają być połączone ze sobą.</span><span class="sxs-lookup"><span data-stu-id="4cedd-557">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="4cedd-558">Ta obsługa pozwala rozpocząć od podstawowej konfiguracji routingu i zmodyfikować trasy po ustaleniu układu zasobów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-558">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

<span data-ttu-id="4cedd-559">Routing używa *punktów końcowych* (`Endpoint`) do reprezentowania logicznych punktów końcowych w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-559">Routing uses *endpoints* (`Endpoint`) to represent logical endpoints in an app.</span></span>

<span data-ttu-id="4cedd-560">Punkt końcowy definiuje delegata do przetwarzania żądań i kolekcji dowolnych metadanych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-560">An endpoint defines a delegate to process requests and a collection of arbitrary metadata.</span></span> <span data-ttu-id="4cedd-561">Metadane są używane w celu zaimplementowania zagadnień związanych z wycinaniem w oparciu o zasady i konfigurację dołączone do każdego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-561">The metadata is used implement cross-cutting concerns based on policies and configuration attached to each endpoint.</span></span>

<span data-ttu-id="4cedd-562">System routingu ma następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-562">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="4cedd-563">Składnia szablonu trasy służy do definiowania tras z parametrami trasy z tokenami.</span><span class="sxs-lookup"><span data-stu-id="4cedd-563">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="4cedd-564">Dozwolona jest konfiguracja języka końcowego w stylu konwencjonalnym i stylu atrybutu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-564">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="4cedd-565"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint>służy do określenia, czy parametr adresu URL zawiera prawidłową wartość dla danego ograniczenia punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-565"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="4cedd-566">Modele aplikacji, takie jak MVC/Razor Pages, rejestrują wszystkie punkty końcowe, które mają przewidywalne implementację scenariuszy routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-566">App models, such as MVC/Razor Pages, register all of their endpoints, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="4cedd-567">Implementacja routingu podejmuje decyzje dotyczące routingu w dowolnym miejscu w potoku programu pośredniczącego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-567">The routing implementation makes routing decisions wherever desired in the middleware pipeline.</span></span>
* <span data-ttu-id="4cedd-568">Oprogramowanie pośredniczące, które pojawia się po utworzeniu oprogramowania pośredniczącego, może sprawdzić wynik decyzji punktu końcowego usługi routingu dla danego identyfikatora URI żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-568">Middleware that appears after a Routing Middleware can inspect the result of the Routing Middleware's endpoint decision for a given request URI.</span></span>
* <span data-ttu-id="4cedd-569">Można wyliczyć wszystkie punkty końcowe w aplikacji w dowolnym miejscu w potoku programu pośredniczącego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-569">It's possible to enumerate all of the endpoints in the app anywhere in the middleware pipeline.</span></span>
* <span data-ttu-id="4cedd-570">Aplikacja może używać routingu do generowania adresów URL (na przykład w przypadku przekierowania lub linków) na podstawie informacji o punkcie końcowym, a tym samym unikania zakodowanych adresów URL, co ułatwia łatwość utrzymania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-570">An app can use routing to generate URLs (for example, for redirection or links) based on endpoint information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="4cedd-571">Generowanie adresów URL jest oparte na adresach, które obsługują arbitralną rozszerzalność:</span><span class="sxs-lookup"><span data-stu-id="4cedd-571">URL generation is based on addresses, which support arbitrary extensibility:</span></span>

  * <span data-ttu-id="4cedd-572">Interfejs API generatora linków<xref:Microsoft.AspNetCore.Routing.LinkGenerator>() można rozpoznać w dowolnym miejscu przy użyciu [iniekcji zależności (di)](xref:fundamentals/dependency-injection) do generowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-572">The Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>) can be resolved anywhere using [dependency injection (DI)](xref:fundamentals/dependency-injection) to generate URLs.</span></span>
  * <span data-ttu-id="4cedd-573">Gdy interfejs API generatora linków nie jest dostępny za <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> pośrednictwem programu di, oferuje metody tworzenia adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-573">Where the Link Generator API isn't available via DI, <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

> [!NOTE]
> <span data-ttu-id="4cedd-574">Dzięki wydaniu routingu punktów końcowych w ASP.NET Core 2,2, łączenie punktów końcowych jest ograniczone do akcji i stron programu MVC/Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-574">With the release of endpoint routing in ASP.NET Core 2.2, endpoint linking is limited to MVC/Razor Pages actions and pages.</span></span> <span data-ttu-id="4cedd-575">Rozszerzenia punktów końcowych konsolidacji są planowane dla przyszłych wersji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-575">The expansions of endpoint-linking capabilities is planned for future releases.</span></span>

<span data-ttu-id="4cedd-576">Routing jest połączony z potokiem [pośredniczącym](xref:fundamentals/middleware/index) przez <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> klasę.</span><span class="sxs-lookup"><span data-stu-id="4cedd-576">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="4cedd-577">[ASP.NET Core MVC](xref:mvc/overview) dodaje Routing do potoku oprogramowania pośredniczącego w ramach swojej konfiguracji i obsługuje routing w aplikacjach MVC i Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-577">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="4cedd-578">Aby dowiedzieć się, jak używać routingu jako składnika autonomicznego, zapoznaj się z sekcją [Korzystanie z oprogramowania do routingu](#use-routing-middleware) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-578">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="4cedd-579">Dopasowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-579">URL matching</span></span>

<span data-ttu-id="4cedd-580">Dopasowywanie adresów URL to proces, za pomocą którego Routing wysyła żądanie przychodzące do *punktu końcowego*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-580">URL matching is the process by which routing dispatches an incoming request to an *endpoint*.</span></span> <span data-ttu-id="4cedd-581">Ten proces jest oparty na danych w ścieżce URL, ale można go rozszerzyć w celu uwzględnienia wszelkich danych w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-581">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="4cedd-582">Możliwość wysyłania żądań do oddzielnych programów obsługi jest kluczem do skalowania rozmiaru i złożoności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-582">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="4cedd-583">System routingu w ramach routingu punktów końcowych jest odpowiedzialny za wszystkie decyzje dotyczące wysyłania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-583">The routing system in endpoint routing is responsible for all dispatching decisions.</span></span> <span data-ttu-id="4cedd-584">Ponieważ oprogramowanie pośredniczące stosuje zasady oparte na wybranym punkcie końcowym, ważne jest, aby wszystkie decyzje, które mogą mieć wpływ na wysyłanie lub stosowanie zasad zabezpieczeń, zostały wprowadzone w systemie routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-584">Since the middleware applies policies based on the selected endpoint, it's important that any decision that can affect dispatching or the application of security policies is made inside the routing system.</span></span>

<span data-ttu-id="4cedd-585">Po wykonaniu delegata punktu końcowego właściwości [RouteContext. RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) są ustawiane na odpowiednie wartości na podstawie przetwarzania żądania wykonanego do tej pory.</span><span class="sxs-lookup"><span data-stu-id="4cedd-585">When the endpoint delegate is executed, the properties of [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) are set to appropriate values based on the request processing performed thus far.</span></span>

<span data-ttu-id="4cedd-586">[RouteData. Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) to słownik *wartości tras* uzyskanych z trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-586">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="4cedd-587">Te wartości są zwykle określane przez tokenizowanie jako adres URL i mogą służyć do akceptowania danych wejściowych użytkownika lub do dalszej akceptacji decyzji w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-587">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="4cedd-588">[RouteData. DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) to zbiór właściwości dodatkowych danych dotyczących dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-588">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="4cedd-589"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*>zapewnia obsługę kojarzenia danych stanu z każdą trasą, dzięki czemu aplikacja może podejmować decyzje na podstawie dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-589"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="4cedd-590">Te wartości są zdefiniowane przez dewelopera i **nie** mają wpływu na zachowanie routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-590">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="4cedd-591">Ponadto wartości umieszczane w [RouteData. Datatokeny](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) mogą być dowolnego typu, w przeciwieństwie do [RouteData. wartości](xref:Microsoft.AspNetCore.Routing.RouteData.Values), które muszą być konwertowane do i z ciągów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-591">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="4cedd-592">[RouteData. routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) to lista tras, które brały udział w pomyślnie dopasowane do żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-592">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="4cedd-593">Trasy mogą być zagnieżdżone wewnątrz siebie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-593">Routes can be nested inside of one another.</span></span> <span data-ttu-id="4cedd-594"><xref:Microsoft.AspNetCore.Routing.RouteData.Routers> Właściwość odzwierciedla ścieżkę przez logiczne drzewo tras, które spowodowały dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-594">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="4cedd-595">Ogólnie rzecz biorąc, pierwszy element <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> w jest kolekcją tras i powinien być używany do generowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-595">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="4cedd-596">Ostatnim elementem w programie <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> jest program obsługi trasy, który został dopasowany.</span><span class="sxs-lookup"><span data-stu-id="4cedd-596">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

<a name="lg"></a>

### <a name="url-generation-with-linkgenerator"></a><span data-ttu-id="4cedd-597">Generowanie adresu URL za pomocą LinkGenerator</span><span class="sxs-lookup"><span data-stu-id="4cedd-597">URL generation with LinkGenerator</span></span>

<span data-ttu-id="4cedd-598">Generowanie adresu URL to proces, za pomocą którego Routing może utworzyć ścieżkę URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-598">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="4cedd-599">Pozwala to na logiczne rozdzielenie między punktami końcowymi i adresami URL, które uzyskują do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="4cedd-599">This allows for a logical separation between your endpoints and the URLs that access them.</span></span>

<span data-ttu-id="4cedd-600">Routing punktów końcowych obejmuje interfejs API generatora linków (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span><span class="sxs-lookup"><span data-stu-id="4cedd-600">Endpoint routing includes the Link Generator API (<xref:Microsoft.AspNetCore.Routing.LinkGenerator>).</span></span> <span data-ttu-id="4cedd-601"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>jest usługą singleton, którą można pobrać z programu DI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-601"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is a singleton service that can be retrieved from DI.</span></span> <span data-ttu-id="4cedd-602">Interfejsu API można używać poza kontekstem żądania wykonania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-602">The API can be used outside of the context of an executing request.</span></span> <span data-ttu-id="4cedd-603">MVC i scenariusze, które opierają <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>się na, takie jak [pomocnicy tagów](xref:mvc/views/tag-helpers/intro), pomocników HTML i [wyniki akcji](xref:mvc/controllers/actions), używają generatora linków, aby zapewnić możliwości generowania linków. <xref:Microsoft.AspNetCore.Mvc.IUrlHelper></span><span class="sxs-lookup"><span data-stu-id="4cedd-603">MVC's <xref:Microsoft.AspNetCore.Mvc.IUrlHelper> and scenarios that rely on <xref:Microsoft.AspNetCore.Mvc.IUrlHelper>, such as [Tag Helpers](xref:mvc/views/tag-helpers/intro), HTML Helpers, and [Action Results](xref:mvc/controllers/actions), use the link generator to provide link generating capabilities.</span></span>

<span data-ttu-id="4cedd-604">Generator łącza jest objęty koncepcją i *schematami* *adresów.*</span><span class="sxs-lookup"><span data-stu-id="4cedd-604">The link generator is backed by the concept of an *address* and *address schemes*.</span></span> <span data-ttu-id="4cedd-605">Schemat adresów jest sposobem określania punktów końcowych, które należy wziąć pod uwagę podczas generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-605">An address scheme is a way of determining the endpoints that should be considered for link generation.</span></span> <span data-ttu-id="4cedd-606">Na przykład nazwa trasy i wartości trasy scenariusze wielu użytkowników są znane z programu z MVC/Razor Pages są implementowane jako schemat adresów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-606">For example, the route name and route values scenarios many users are familiar with from MVC/Razor Pages are implemented as an address scheme.</span></span>

<span data-ttu-id="4cedd-607">Generator łącza może łączyć się z akcjami i stronami MVC/Razor Pages za pośrednictwem następujących metod rozszerzających:</span><span class="sxs-lookup"><span data-stu-id="4cedd-607">The link generator can link to MVC/Razor Pages actions and pages via the following extension methods:</span></span>

* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetPathByAction*>
* <xref:Microsoft.AspNetCore.Routing.ControllerLinkGeneratorExtensions.GetUriByAction*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetPathByPage*>
* <xref:Microsoft.AspNetCore.Routing.PageLinkGeneratorExtensions.GetUriByPage*>

<span data-ttu-id="4cedd-608">Przeciążenie tych metod przyjmuje argumenty, które zawierają `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-608">An overload of these methods accepts arguments that include the `HttpContext`.</span></span> <span data-ttu-id="4cedd-609">Metody te są funkcjonalnie równoważne z `Url.Action` i `Url.Page` oferują dodatkową elastyczność i opcje.</span><span class="sxs-lookup"><span data-stu-id="4cedd-609">These methods are functionally equivalent to `Url.Action` and `Url.Page` but offer additional flexibility and options.</span></span>

<span data-ttu-id="4cedd-610">Metody są najbardziej podobne do `Url.Action` i `Url.Page` w tym, że generują identyfikator URI zawierający ścieżkę bezwzględną. `GetPath*`</span><span class="sxs-lookup"><span data-stu-id="4cedd-610">The `GetPath*` methods are most similar to `Url.Action` and `Url.Page` in that they generate a URI containing an absolute path.</span></span> <span data-ttu-id="4cedd-611">`GetUri*` Metody zawsze generują bezwzględny identyfikator URI zawierający schemat i hosta.</span><span class="sxs-lookup"><span data-stu-id="4cedd-611">The `GetUri*` methods always generate an absolute URI containing a scheme and host.</span></span> <span data-ttu-id="4cedd-612">Metody, które akceptują `HttpContext` identyfikator URI w kontekście żądania wykonania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-612">The methods that accept an `HttpContext` generate a URI in the context of the executing request.</span></span> <span data-ttu-id="4cedd-613">Użycie wartości tras w otoczeniu, ścieżki podstawowej adresu URL, schematu i hosta z żądania wykonania jest używane, chyba że zostaną zastąpione.</span><span class="sxs-lookup"><span data-stu-id="4cedd-613">The ambient route values, URL base path, scheme, and host from the executing request are used unless overridden.</span></span>

<span data-ttu-id="4cedd-614"><xref:Microsoft.AspNetCore.Routing.LinkGenerator>jest wywoływana przy użyciu adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-614"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> is called with an address.</span></span> <span data-ttu-id="4cedd-615">Generowanie identyfikatora URI występuje w dwóch krokach:</span><span class="sxs-lookup"><span data-stu-id="4cedd-615">Generating a URI occurs in two steps:</span></span>

1. <span data-ttu-id="4cedd-616">Adres jest powiązany z listą punktów końcowych, które pasują do adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-616">An address is bound to a list of endpoints that match the address.</span></span>
1. <span data-ttu-id="4cedd-617">Wszystkie punkty końcowe `RoutePattern` są oceniane do momentu znalezienia wzorca tras pasującego do dostarczonych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-617">Each endpoint's `RoutePattern` is evaluated until a route pattern that matches the supplied values is found.</span></span> <span data-ttu-id="4cedd-618">Wynikowe dane wyjściowe są łączone z innymi częściami identyfikatora URI dostarczanymi do generatora linków i zwracanymi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-618">The resulting output is combined with the other URI parts supplied to the link generator and returned.</span></span>

<span data-ttu-id="4cedd-619">Metody zapewniane przez <xref:Microsoft.AspNetCore.Routing.LinkGenerator> obsługę funkcji generowania linków standardowych dla dowolnego typu adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-619">The methods provided by <xref:Microsoft.AspNetCore.Routing.LinkGenerator> support standard link generation capabilities for any type of address.</span></span> <span data-ttu-id="4cedd-620">Najbardziej wygodnym sposobem korzystania z generatora łączy są metody rozszerzające, które wykonują operacje dla określonego typu adresu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-620">The most convenient way to use the link generator is through extension methods that perform operations for a specific address type.</span></span>

| <span data-ttu-id="4cedd-621">Metoda rozszerzenia</span><span class="sxs-lookup"><span data-stu-id="4cedd-621">Extension Method</span></span>   | <span data-ttu-id="4cedd-622">Opis</span><span class="sxs-lookup"><span data-stu-id="4cedd-622">Description</span></span>                                                         |
| ------------------ | ------------------------------------------------------------------- |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetPathByAddress*> | <span data-ttu-id="4cedd-623">Generuje identyfikator URI z ścieżką bezwzględną na podstawie podanych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-623">Generates a URI with an absolute path based on the provided values.</span></span> |
| <xref:Microsoft.AspNetCore.Routing.LinkGenerator.GetUriByAddress*> | <span data-ttu-id="4cedd-624">Generuje bezwzględny identyfikator URI na podstawie podanych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-624">Generates an absolute URI based on the provided values.</span></span>             |

> [!WARNING]
> <span data-ttu-id="4cedd-625">Należy zwrócić uwagę na następujące konsekwencje wywoływania <xref:Microsoft.AspNetCore.Routing.LinkGenerator> metod:</span><span class="sxs-lookup"><span data-stu-id="4cedd-625">Pay attention to the following implications of calling <xref:Microsoft.AspNetCore.Routing.LinkGenerator> methods:</span></span>
>
> * <span data-ttu-id="4cedd-626">Użyj `GetUri*` metod rozszerzających z zachowaniem ostrożności w konfiguracji aplikacji, która `Host` nie weryfikuje nagłówka żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="4cedd-626">Use `GetUri*` extension methods with caution in an app configuration that doesn't validate the `Host` header of incoming requests.</span></span> <span data-ttu-id="4cedd-627">`Host` Jeśli nagłówek żądań przychodzących nie jest zweryfikowany, dane wejściowe żądania niezaufanego mogą być wysyłane z powrotem do klienta w identyfikatorach URI w widoku/stronie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-627">If the `Host` header of incoming requests isn't validated, untrusted request input can be sent back to the client in URIs in a view/page.</span></span> <span data-ttu-id="4cedd-628">Zaleca się, aby wszystkie aplikacje produkcyjne skonfigurowali swój serwer do `Host` sprawdzania poprawności nagłówka pod kątem znanych prawidłowych wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-628">We recommend that all production apps configure their server to validate the `Host` header against known valid values.</span></span>
>
> * <span data-ttu-id="4cedd-629">Należy <xref:Microsoft.AspNetCore.Routing.LinkGenerator> używać z zachowaniem ostrożności w oprogramowaniu `Map` pośredniczącym w połączeniu z lub `MapWhen`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-629">Use <xref:Microsoft.AspNetCore.Routing.LinkGenerator> with caution in middleware in combination with `Map` or `MapWhen`.</span></span> <span data-ttu-id="4cedd-630">`Map*`zmienia ścieżkę podstawową żądania wykonania, która ma wpływ na dane wyjściowe generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-630">`Map*` changes the base path of the executing request, which affects the output of link generation.</span></span> <span data-ttu-id="4cedd-631"><xref:Microsoft.AspNetCore.Routing.LinkGenerator> Wszystkie interfejsy API umożliwiają określanie ścieżki podstawowej.</span><span class="sxs-lookup"><span data-stu-id="4cedd-631">All of the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> APIs allow specifying a base path.</span></span> <span data-ttu-id="4cedd-632">Zawsze określaj pustą ścieżkę bazową `Map*`, która ma wpływ na generowanie linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-632">Always specify an empty base path to undo `Map*`'s affect on link generation.</span></span>

## <a name="differences-from-earlier-versions-of-routing"></a><span data-ttu-id="4cedd-633">Różnice wynikające z wcześniejszych wersji usługi Routing</span><span class="sxs-lookup"><span data-stu-id="4cedd-633">Differences from earlier versions of routing</span></span>

<span data-ttu-id="4cedd-634">Istnieje kilka różnic między routingiem punktu końcowego w ASP.NET Core 2,2 lub nowszym i wcześniejszymi wersjami routingu w programie ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="4cedd-634">A few differences exist between endpoint routing in ASP.NET Core 2.2 or later and earlier versions of routing in ASP.NET Core:</span></span>

* <span data-ttu-id="4cedd-635">System routingu punktu końcowego nie obsługuje <xref:Microsoft.AspNetCore.Routing.IRouter>rozszerzalności opartej na systemie, w <xref:Microsoft.AspNetCore.Routing.Route>tym dziedziczenie z.</span><span class="sxs-lookup"><span data-stu-id="4cedd-635">The endpoint routing system doesn't support <xref:Microsoft.AspNetCore.Routing.IRouter>-based extensibility, including inheriting from <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>

* <span data-ttu-id="4cedd-636">Routing punktów końcowych nie obsługuje [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span><span class="sxs-lookup"><span data-stu-id="4cedd-636">Endpoint routing doesn't support [WebApiCompatShim](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.WebApiCompatShim).</span></span> <span data-ttu-id="4cedd-637">Użyj [wersji zgodności](xref:mvc/compatibility-version) 2,1 (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`), aby nadal korzystać z podkładki zgodności.</span><span class="sxs-lookup"><span data-stu-id="4cedd-637">Use the 2.1 [compatibility version](xref:mvc/compatibility-version) (`.SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`) to continue using the compatibility shim.</span></span>

* <span data-ttu-id="4cedd-638">Routing punktów końcowych ma inne zachowanie dla wielkości liter wygenerowanych identyfikatorów URI podczas korzystania z konwencjonalnych tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-638">Endpoint Routing has different behavior for the casing of generated URIs when using conventional routes.</span></span>

  <span data-ttu-id="4cedd-639">Rozważmy następujący szablon trasy domyślnej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-639">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="4cedd-640">Załóżmy, że generujesz link do akcji przy użyciu następującej trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-640">Suppose you generate a link to an action using the following route:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "blog", new { id = 17, });
  ```

  <span data-ttu-id="4cedd-641">W <xref:Microsoft.AspNetCore.Routing.IRouter>przypadku routingu opartego na systemie ten kod generuje `/blog/ReadPost/17`identyfikator URI, który uwzględnia wielkość liter podanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-641">With <xref:Microsoft.AspNetCore.Routing.IRouter>-based routing, this code generates a URI of `/blog/ReadPost/17`, which respects the casing of the provided route value.</span></span> <span data-ttu-id="4cedd-642">Routing punktów końcowych w ASP.NET Core 2,2 lub `/Blog/ReadPost/17` późniejszych produkuje ("blog" jest pisane wielkimi literami).</span><span class="sxs-lookup"><span data-stu-id="4cedd-642">Endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` ("Blog" is capitalized).</span></span> <span data-ttu-id="4cedd-643">Routing punktów końcowych `IOutboundParameterTransformer` udostępnia interfejs, którego można użyć do dostosowania tego zachowania globalnie lub w celu zastosowania różnych konwencji do mapowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-643">Endpoint routing provides the `IOutboundParameterTransformer` interface that can be used to customize this behavior globally or to apply different conventions for mapping URLs.</span></span>

  <span data-ttu-id="4cedd-644">Aby uzyskać więcej informacji, zobacz sekcję [informacje dotyczące transformatora parametrów](#parameter-transformer-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-644">For more information, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

* <span data-ttu-id="4cedd-645">Generowanie linków używane przez MVC/Razor Pages z trasami konwencjonalnymi działa inaczej podczas próby połączenia z kontrolerem/akcją lub stroną, która nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="4cedd-645">Link Generation used by MVC/Razor Pages with conventional routes behaves differently when attempting to link to an controller/action or page that doesn't exist.</span></span>

  <span data-ttu-id="4cedd-646">Rozważmy następujący szablon trasy domyślnej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-646">Consider the following default route template:</span></span>

  ```csharp
  app.UseMvc(routes =>
  {
      routes.MapRoute("default", "{controller=Home}/{action=Index}/{id?}");
  });
  ```

  <span data-ttu-id="4cedd-647">Załóżmy, że generowany jest link do akcji przy użyciu szablonu domyślnego z następującymi:</span><span class="sxs-lookup"><span data-stu-id="4cedd-647">Suppose you generate a link to an action using the default template with the following:</span></span>

  ```csharp
  var link = Url.Action("ReadPost", "Blog", new { id = 17, });
  ```

  <span data-ttu-id="4cedd-648">W `IRouter`przypadku routingu opartego na systemie wynik jest `/Blog/ReadPost/17`zawsze, nawet jeśli `BlogController` nie istnieje lub nie ma `ReadPost` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-648">With `IRouter`-based routing, the result is always `/Blog/ReadPost/17`, even if the `BlogController` doesn't exist or doesn't have a `ReadPost` action method.</span></span> <span data-ttu-id="4cedd-649">Zgodnie z oczekiwaniami Routing punktów końcowych w ASP.NET Core 2,2 lub `/Blog/ReadPost/17` nowszej generuje, czy istnieje metoda akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-649">As expected, endpoint routing in ASP.NET Core 2.2 or later produces `/Blog/ReadPost/17` if the action method exists.</span></span> <span data-ttu-id="4cedd-650">*Jednak w przypadku, gdy akcja nie istnieje, routing punktu końcowego tworzy pusty ciąg.*</span><span class="sxs-lookup"><span data-stu-id="4cedd-650">*However, endpoint routing produces an empty string if the action doesn't exist.*</span></span> <span data-ttu-id="4cedd-651">Koncepcyjnie, routing punktu końcowego nie zakłada, że punkt końcowy istnieje, jeśli akcja nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="4cedd-651">Conceptually, endpoint routing doesn't assume that the endpoint exists if the action doesn't exist.</span></span>

* <span data-ttu-id="4cedd-652">*Algorytm unieważniania wartości otoczenia* generacji linku działa inaczej, gdy jest używany z routingiem punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-652">The link generation *ambient value invalidation algorithm* behaves differently when used with endpoint routing.</span></span>

  <span data-ttu-id="4cedd-653">*Nieprawidłowa wartość otoczenia* , która decyduje o tym, które wartości trasy z aktualnie wykonywanego żądania (wartości otoczenia) mogą być używane w operacjach generowania linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-653">*Ambient value invalidation* is the algorithm that decides which route values from the currently executing request (the ambient values) can be used in link generation operations.</span></span> <span data-ttu-id="4cedd-654">Routowanie konwencjonalne zawsze unieważnia dodatkowe wartości trasy podczas łączenia z inną akcją.</span><span class="sxs-lookup"><span data-stu-id="4cedd-654">Conventional routing always invalidated extra route values when linking to a different action.</span></span> <span data-ttu-id="4cedd-655">Routing atrybutów nie miał tego zachowania przed wydaniem ASP.NET Core 2,2.</span><span class="sxs-lookup"><span data-stu-id="4cedd-655">Attribute routing didn't have this behavior prior to the release of ASP.NET Core 2.2.</span></span> <span data-ttu-id="4cedd-656">We wcześniejszych wersjach ASP.NET Core linki do innej akcji, która używa tych samych nazw parametrów trasy, spowodowały błędy generacji łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-656">In earlier versions of ASP.NET Core, links to another action that use the same route parameter names resulted in link generation errors.</span></span> <span data-ttu-id="4cedd-657">W ASP.NET Core 2,2 lub nowszej, obie formy routingu unieważnią wartości podczas łączenia z inną akcją.</span><span class="sxs-lookup"><span data-stu-id="4cedd-657">In ASP.NET Core 2.2 or later, both forms of routing invalidate values when linking to another action.</span></span>

  <span data-ttu-id="4cedd-658">Rozważmy następujący przykład w ASP.NET Core 2,1 lub starszej.</span><span class="sxs-lookup"><span data-stu-id="4cedd-658">Consider the following example in ASP.NET Core 2.1 or earlier.</span></span> <span data-ttu-id="4cedd-659">W przypadku łączenia z inną akcją (lub inną stroną) wartości trasy mogą być ponownie używane na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="4cedd-659">When linking to another action (or another page), route values can be reused in undesirable ways.</span></span>

  <span data-ttu-id="4cedd-660">W */Pages/Store/Product.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="4cedd-660">In */Pages/Store/Product.cshtml*:</span></span>

  ```cshtml
  @page "{id}"
  @Url.Page("/Login")
  ```

  <span data-ttu-id="4cedd-661">W */Pages/login.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="4cedd-661">In */Pages/Login.cshtml*:</span></span>

  ```cshtml
  @page "{id?}"
  ```

  <span data-ttu-id="4cedd-662">Jeśli identyfikator URI znajduje `/Store/Product/18` się w ASP.NET Core 2,1 lub starszej, link wygenerowany na `@Url.Page("/Login")` stronie Sklep/informacje w usłudze `/Login/18`ma wartość.</span><span class="sxs-lookup"><span data-stu-id="4cedd-662">If the URI is `/Store/Product/18` in ASP.NET Core 2.1 or earlier, the link generated on the Store/Info page by `@Url.Page("/Login")` is `/Login/18`.</span></span> <span data-ttu-id="4cedd-663">`id` Wartość 18 jest ponownie używana, mimo że miejsce docelowe linku jest częścią aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-663">The `id` value of 18 is reused, even though the link destination is different part of the app entirely.</span></span> <span data-ttu-id="4cedd-664">Wartość trasy w kontekście `/Login` strony jest prawdopodobnie wartością identyfikatora użytkownika, a nie wartością identyfikatora produktu w sklepie. `id`</span><span class="sxs-lookup"><span data-stu-id="4cedd-664">The `id` route value in the context of the `/Login` page is probably a user ID value, not a store product ID value.</span></span>

  <span data-ttu-id="4cedd-665">W przypadku routingu punktów końcowych z ASP.NET Core 2,2 lub nowszym wynik `/Login`jest.</span><span class="sxs-lookup"><span data-stu-id="4cedd-665">In endpoint routing with ASP.NET Core 2.2 or later, the result is `/Login`.</span></span> <span data-ttu-id="4cedd-666">Wartości otoczenia nie są ponownie używane, gdy połączone miejsce docelowe jest inną akcją lub stroną.</span><span class="sxs-lookup"><span data-stu-id="4cedd-666">Ambient values aren't reused when the linked destination is a different action or page.</span></span>

* <span data-ttu-id="4cedd-667">Składnia parametru trasy okrężnej: Ukośniki do przodu nie są kodowane przy użyciu podwójnej gwiazdki`**`() składni parametrów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-667">Round-tripping route parameter syntax: Forward slashes aren't encoded when using a double-asterisk (`**`) catch-all parameter syntax.</span></span>

  <span data-ttu-id="4cedd-668">Podczas generowania łącza system routingu koduje wartość przechwyconą w dwugwiazdkowym (`**`) parametrem catch-all (na przykład), `{**myparametername}`z wyjątkiem ukośników.</span><span class="sxs-lookup"><span data-stu-id="4cedd-668">During link generation, the routing system encodes the value captured in a double-asterisk (`**`) catch-all parameter (for example, `{**myparametername}`) except the forward slashes.</span></span> <span data-ttu-id="4cedd-669">Podwójna gwiazdka catch-all jest obsługiwana w `IRouter`przypadku routingu opartego na systemie ASP.NET Core 2,2 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="4cedd-669">The double-asterisk catch-all is supported with `IRouter`-based routing in ASP.NET Core 2.2 or later.</span></span>

  <span data-ttu-id="4cedd-670">Pojedyncza gwiazdka "catch-all" w poprzednich wersjach ASP.NET Core (`{*myparametername}`) pozostanie obsługiwana, a ukośniki są zakodowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-670">The single asterisk catch-all parameter syntax in prior versions of ASP.NET Core (`{*myparametername}`) remains supported, and forward slashes are encoded.</span></span>

  | <span data-ttu-id="4cedd-671">Szlak</span><span class="sxs-lookup"><span data-stu-id="4cedd-671">Route</span></span>              | <span data-ttu-id="4cedd-672">Wygenerowano łącze</span><span class="sxs-lookup"><span data-stu-id="4cedd-672">Link generated with</span></span><br>`Url.Action(new { category = "admin/products" })`&hellip; |
  | ------------------ | --------------------------------------------------------------------- |
  | `/search/{*page}`  | <span data-ttu-id="4cedd-673">`/search/admin%2Fproducts`(ukośnik zostanie zakodowany)</span><span class="sxs-lookup"><span data-stu-id="4cedd-673">`/search/admin%2Fproducts` (the forward slash is encoded)</span></span>             |
  | `/search/{**page}` | `/search/admin/products`                                              |

### <a name="middleware-example"></a><span data-ttu-id="4cedd-674">Przykład oprogramowania pośredniczącego</span><span class="sxs-lookup"><span data-stu-id="4cedd-674">Middleware example</span></span>

<span data-ttu-id="4cedd-675">W poniższym przykładzie oprogramowanie pośredniczące używa <xref:Microsoft.AspNetCore.Routing.LinkGenerator> interfejsu API do tworzenia linku do metody akcji, która wyświetla listę produktów ze sklepu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-675">In the following example, a middleware uses the <xref:Microsoft.AspNetCore.Routing.LinkGenerator> API to create link to an action method that lists store products.</span></span> <span data-ttu-id="4cedd-676">Przy użyciu generatora linków poprzez wstrzyknięcie go do klasy i wywołanie `GenerateLink` jest dostępne dla dowolnej klasy w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-676">Using the link generator by injecting it into a class and calling `GenerateLink` is available to any class in an app.</span></span>

```csharp
using Microsoft.AspNetCore.Routing;

public class ProductsLinkMiddleware
{
    private readonly LinkGenerator _linkGenerator;

    public ProductsLinkMiddleware(RequestDelegate next, LinkGenerator linkGenerator)
    {
        _linkGenerator = linkGenerator;
    }

    public async Task InvokeAsync(HttpContext httpContext)
    {
        var url = _linkGenerator.GetPathByAction("ListProducts", "Store");

        httpContext.Response.ContentType = "text/plain";

        await httpContext.Response.WriteAsync($"Go to {url} to see our products.");
    }
}
```

### <a name="create-routes"></a><span data-ttu-id="4cedd-677">Tworzenie tras</span><span class="sxs-lookup"><span data-stu-id="4cedd-677">Create routes</span></span>

<span data-ttu-id="4cedd-678">Większość aplikacji tworzy trasy przez wywołanie <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> lub jedną z podobnych metod rozszerzających zdefiniowanych w <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>systemie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-678">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="4cedd-679">Dowolna z <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> metod rozszerzających tworzy <xref:Microsoft.AspNetCore.Routing.Route> wystąpienie i dodaje je do kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-679">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="4cedd-680"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>nie akceptuje parametru procedury obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-680"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="4cedd-681"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>dodaje tylko trasy, które są obsługiwane przez <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-681"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="4cedd-682">Aby dowiedzieć się więcej na temat routingu w <xref:mvc/controllers/routing>MVC, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-682">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="4cedd-683">Poniższy przykład kodu jest przykładem <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wywołania używanego przez typową definicję trasy MVC ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="4cedd-683">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="4cedd-684">Ten szablon dopasowuje ścieżkę URL i wyodrębnia wartości tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-684">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="4cedd-685">Na przykład ścieżka `/Products/Details/17` generuje następujące wartości trasy: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-685">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="4cedd-686">Wartości tras są określane przez podzielenie ścieżki URL na segmenty i dopasowanie do każdego segmentu przy użyciu nazwy *parametru trasy* w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-686">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="4cedd-687">Parametry trasy są nazywane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-687">Route parameters are named.</span></span> <span data-ttu-id="4cedd-688">Parametry zdefiniowane przez ujęcie nazwy parametru w nawiasach klamrowych `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-688">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="4cedd-689">Poprzedni szablon może również pasować do ścieżki `/` URL i generować wartości. `{ controller = Home, action = Index }`</span><span class="sxs-lookup"><span data-stu-id="4cedd-689">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="4cedd-690">Dzieje się tak, `{controller}` ponieważ `{action}` parametry i trasy `id` mają wartości domyślne, a parametr trasy jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-690">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="4cedd-691">Znak równości (`=`), po którym następuje wartość po nazwie parametru trasy definiuje wartość domyślną dla parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-691">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="4cedd-692">Znak zapytania (`?`) po nazwie parametru trasy definiuje opcjonalny parametr.</span><span class="sxs-lookup"><span data-stu-id="4cedd-692">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="4cedd-693">Parametry trasy z wartością domyślną *zawsze* generują wartość trasy w przypadku dopasowania trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-693">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="4cedd-694">Parametry opcjonalne nie generują wartości trasy, jeśli nie ma odpowiedniego segmentu ścieżki adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-694">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span> <span data-ttu-id="4cedd-695">Szczegółowe opisy scenariuszy i składni szablonów tras można znaleźć w sekcji [Dokumentacja dotycząca szablonu trasy](#route-template-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-695">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="4cedd-696">W poniższym przykładzie definicja `{id:int}` parametru trasy definiuje [](#route-constraint-reference) `id` ograniczenie trasy dla parametru trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-696">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="4cedd-697">Ten szablon dopasowuje ścieżkę URL, `/Products/Details/17` taką jak `/Products/Details/Apples`, ale nie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-697">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="4cedd-698">Ograniczenia trasy implementują <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> i sprawdzają wartości routingu w celu ich zweryfikowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-698">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="4cedd-699">W tym przykładzie wartość `id` trasy musi być możliwa do przekonwertowania na liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="4cedd-699">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="4cedd-700">Aby uzyskać wyjaśnienie ograniczeń trasy dostarczonych przez platformę, zobacz temat [ograniczenia trasy](#route-constraint-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-700">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="4cedd-701">Dodatkowe przeciążenia <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wartości akceptują dla `constraints`, `dataTokens`i. `defaults`</span><span class="sxs-lookup"><span data-stu-id="4cedd-701">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="4cedd-702">Typowym użyciem tych parametrów jest przekazanie anonimowo wpisanego obiektu, gdzie nazwy właściwości typu anonimowego są zgodne z nazwami parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-702">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="4cedd-703">Poniższe <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> przykłady tworzą równoważne trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-703">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="4cedd-704">Wbudowana Składnia służąca do definiowania ograniczeń i wartości domyślnych może być wygodna dla prostych tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-704">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="4cedd-705">Istnieją jednak scenariusze, takie jak tokeny danych, które nie są obsługiwane przez składnię wbudowaną.</span><span class="sxs-lookup"><span data-stu-id="4cedd-705">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="4cedd-706">Poniższy przykład ilustruje kilka dodatkowych scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-706">The following example demonstrates a few additional scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{**article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="4cedd-707">Poprzedni szablon pasuje do ścieżki URL, tak `/Blog/All-About-Routing/Introduction` jak i wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-707">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="4cedd-708">Domyślne wartości trasy dla `controller` i `action` są generowane przez trasę, nawet jeśli w szablonie nie ma odpowiednich parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-708">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="4cedd-709">Wartości domyślne można określić w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-709">Default values can be specified in the route template.</span></span> <span data-ttu-id="4cedd-710">Parametr Route jest zdefiniowany jako *przechwycenie* przez wygląd podwójnej gwiazdki (`**`) przed nazwą parametru trasy. `article`</span><span class="sxs-lookup"><span data-stu-id="4cedd-710">The `article` route parameter is defined as a *catch-all* by the appearance of an double asterisk (`**`) before the route parameter name.</span></span> <span data-ttu-id="4cedd-711">Catch-wszystkie parametry tras przechwytują resztę ścieżki URL i mogą również pasować do pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-711">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="4cedd-712">Poniższy przykład dodaje ograniczenia trasy i tokeny danych:</span><span class="sxs-lookup"><span data-stu-id="4cedd-712">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="4cedd-713">Poprzedni szablon pasuje do ścieżki URL, na `/en-US/Products/5` przykład i wyodrębnia wartości `{ controller = Products, action = Details, id = 5 }` i tokeny `{ locale = en-US }`danych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-713">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Lokalne tokeny systemu Windows](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="4cedd-715">Generowanie adresu URL klasy trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-715">Route class URL generation</span></span>

<span data-ttu-id="4cedd-716"><xref:Microsoft.AspNetCore.Routing.Route> Klasa może również wykonywać generowanie adresów URL przez połączenie zestawu wartości tras z jego szablonem trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-716">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="4cedd-717">Jest to logicznie proces odwrotny pasujący do ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-717">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-718">Aby lepiej zrozumieć generowanie adresów URL, Załóżmy, jaki adres URL ma zostać wygenerowany, a następnie pomyśl o sposobie dopasowania szablonu trasy do tego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-718">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="4cedd-719">Jakie wartości zostałyby wygenerowane?</span><span class="sxs-lookup"><span data-stu-id="4cedd-719">What values would be produced?</span></span> <span data-ttu-id="4cedd-720">Jest to sztywny odpowiednik działania generowania adresów URL w <xref:Microsoft.AspNetCore.Routing.Route> klasie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-720">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="4cedd-721">Poniższy przykład używa ogólnej trasy domyślnej ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="4cedd-721">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="4cedd-722">W przypadku wartości `{ controller = Products, action = List }`trasy zostanie wygenerowany adres `/Products/List` URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-722">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="4cedd-723">Wartości trasy są zastępowane odpowiednimi parametrami trasy w celu utworzenia ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-723">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="4cedd-724">Ponieważ `id` jest to opcjonalny parametr trasy, adres URL został pomyślnie wygenerowany bez wartości dla `id`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-724">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="4cedd-725">W przypadku wartości `{ controller = Home, action = Index }`trasy zostanie wygenerowany adres `/` URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-725">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="4cedd-726">Podane wartości trasy są zgodne z wartościami domyślnymi, a segmenty odpowiadające wartościom domyślnym są bezpiecznie pomijane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-726">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="4cedd-727">Oba adresy URL wygenerowały rundę z następującą definicją`/Home/Index` trasy `/`(i) tworzą te same wartości trasy, które zostały użyte do wygenerowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-727">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="4cedd-728">Aplikacja używająca ASP.NET Core MVC powinna używać <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> do generowania adresów URL zamiast bezpośredniego wywoływania routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-728">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="4cedd-729">Aby uzyskać więcej informacji na temat generowania adresów URL, zobacz sekcję [informacje dotyczące generowania adresów URL](#url-generation-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-729">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="4cedd-730">Korzystanie z oprogramowania pośredniczącego routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-730">Use Routing Middleware</span></span>

<span data-ttu-id="4cedd-731">Odwołuje się do [pakietu Microsoft. AspNetCore. app](xref:fundamentals/metapackage-app) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-731">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="4cedd-732">Dodaj Routing do kontenera usługi w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="4cedd-732">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="4cedd-733">Trasy muszą być skonfigurowane w `Startup.Configure` metodzie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-733">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="4cedd-734">Przykładowa aplikacja używa następujących interfejsów API:</span><span class="sxs-lookup"><span data-stu-id="4cedd-734">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="4cedd-735"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>&ndash; Dopasowuje tylko żądania HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="4cedd-735"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="4cedd-736">W poniższej tabeli przedstawiono odpowiedzi z podanym identyfikatorem URI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-736">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="4cedd-737">Identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="4cedd-737">URI</span></span>                    | <span data-ttu-id="4cedd-738">Odpowiedź</span><span class="sxs-lookup"><span data-stu-id="4cedd-738">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="4cedd-739">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-739">Hello!</span></span> <span data-ttu-id="4cedd-740">Wartości trasy: [Operation, Create], [ID, 3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-740">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="4cedd-741">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-741">Hello!</span></span> <span data-ttu-id="4cedd-742">Wartości trasy: [Operation, Track], [ID,-3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-742">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="4cedd-743">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-743">Hello!</span></span> <span data-ttu-id="4cedd-744">Wartości trasy: [Operation, Track], [ID,-3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-744">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="4cedd-745">Żądanie przepada w, brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-745">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="4cedd-746">Witaj, Jan!</span><span class="sxs-lookup"><span data-stu-id="4cedd-746">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="4cedd-747">Żądanie przepada w, dopasowuje tylko HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="4cedd-747">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="4cedd-748">Żądanie przepada w, brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-748">The request falls through, no match.</span></span>              |

<span data-ttu-id="4cedd-749">Struktura zawiera zestaw metod rozszerzających do tworzenia tras (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span><span class="sxs-lookup"><span data-stu-id="4cedd-749">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

<span data-ttu-id="4cedd-750">`Map[Verb]` Metody służą do ograniczania trasy do zlecenia HTTP w nazwie metody.</span><span class="sxs-lookup"><span data-stu-id="4cedd-750">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="4cedd-751">Na przykład zobacz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> i <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-751">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="4cedd-752">Odwołanie do szablonu trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-752">Route template reference</span></span>

<span data-ttu-id="4cedd-753">Tokeny w nawiasach klamrowych (`{ ... }`) definiują *Parametry trasy* , które są powiązane w przypadku dopasowania trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-753">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="4cedd-754">Można zdefiniować więcej niż jeden parametr trasy w segmencie trasy, ale muszą one być oddzielone wartością literału.</span><span class="sxs-lookup"><span data-stu-id="4cedd-754">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="4cedd-755">Na przykład `{controller=Home}{action=Index}` nie jest prawidłową trasą, ponieważ nie ma wartości literału między `{controller}` i `{action}`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-755">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="4cedd-756">Te parametry trasy muszą mieć nazwę i mogą mieć określone dodatkowe atrybuty.</span><span class="sxs-lookup"><span data-stu-id="4cedd-756">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="4cedd-757">Tekst literału inny niż parametry trasy (na przykład `{id}`) i separator `/` ścieżki muszą być zgodne z tekstem w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-757">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="4cedd-758">W dopasowaniu do tekstu nie jest rozróżniana wielkość liter i w oparciu o zdekodowaną reprezentację ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-758">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="4cedd-759">Aby dopasować Ogranicznik parametru`{` trasy literału (lub `}`), należy wprowadzić ogranicznik przez powtórzenie znaku (`{{` lub `}}`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-759">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="4cedd-760">Wzorce adresów URL, które próbują przechwycić nazwę pliku z opcjonalnym rozszerzeniem pliku, mają dodatkowe uwagi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-760">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="4cedd-761">Rozważmy na przykład szablon `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-761">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="4cedd-762">Gdy wartości obu `filename` i `ext` istnieją, są wypełniane obie wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-762">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="4cedd-763">Jeśli w adresie URL `filename` znajduje się tylko wartość parametru, trasa pasuje do, ponieważ końcowy okres (`.`) jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-763">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="4cedd-764">Następujące adresy URL pasują do tej trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-764">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="4cedd-765">Możesz użyć gwiazdki (`*`) lub podwójnej gwiazdki (`**`) jako prefiksu do parametru trasy, aby powiązać z pozostałą częścią identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-765">You can use an asterisk (`*`) or double asterisk (`**`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="4cedd-766">Są one nazywane parametrami *przechwycenia* .</span><span class="sxs-lookup"><span data-stu-id="4cedd-766">These are called a *catch-all* parameters.</span></span> <span data-ttu-id="4cedd-767">Na przykład `blog/{**slug}` dopasowuje dowolny identyfikator URI, który `/blog` rozpoczyna się od i ma dowolną wartość, `slug` która jest przypisana do wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-767">For example, `blog/{**slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="4cedd-768">Catch-wszystkie parametry można także dopasować do pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-768">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="4cedd-769">Parametr catch-all wyprowadza odpowiednie znaki, gdy trasa jest używana do generowania adresu URL, włącznie z separatorami ścieżki (`/`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-769">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="4cedd-770">Na przykład trasa `foo/{*path}` z wartościami `{ path = "my/path" }` trasy jest generowana `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-770">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="4cedd-771">Zwróć uwagę na odwrócony ukośnik.</span><span class="sxs-lookup"><span data-stu-id="4cedd-771">Note the escaped forward slash.</span></span> <span data-ttu-id="4cedd-772">Aby zaokrąglić znaki separatora ścieżki, użyj `**` prefiksu parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-772">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="4cedd-773">Trasa `foo/{**path}` z `{ path = "my/path" }` generowaniem `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-773">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

<span data-ttu-id="4cedd-774">Parametry trasy mogą mieć *wartości domyślne* , określając wartość domyślną po nazwie parametru oddzielone znakiem równości (`=`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-774">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="4cedd-775">Na przykład `{controller=Home}` definiuje `Home` jako wartość domyślną dla `controller`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-775">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="4cedd-776">Wartość domyślna jest używana, jeśli żadna wartość nie jest obecna w adresie URL dla parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-776">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="4cedd-777">Parametry trasy są opcjonalne przez dołączenie znaku zapytania (`?`) na końcu nazwy parametru, jak w. `id?`</span><span class="sxs-lookup"><span data-stu-id="4cedd-777">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="4cedd-778">Różnica między wartościami opcjonalnymi i domyślnymi parametrami trasy polega na tym, że parametr trasy z wartością domyślną zawsze&mdash;tworzy wartość, a opcjonalny parametr ma wartość tylko wtedy, gdy wartość jest dostarczana przez adres URL żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-778">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="4cedd-779">Parametry trasy mogą mieć ograniczenia, które muszą być zgodne z wartością trasy powiązaną z adresem URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-779">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="4cedd-780">Dodanie dwukropka`:`() i nazwy ograniczenia po nazwie parametru trasy określa *ograniczenie wbudowane* dla parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-780">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="4cedd-781">Jeśli ograniczenie wymaga argumentów, są one ujęte w nawiasy (`(...)`) po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-781">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="4cedd-782">Można określić wiele ograniczeń wbudowanych, dołączając inną dwukropek (`:`) i nazwę ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-782">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="4cedd-783">Nazwa i argumenty ograniczenia są przekazane do <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> usługi w celu utworzenia <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> wystąpienia do użycia w przetwarzaniu adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-783">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="4cedd-784">Na przykład szablon `blog/{article:minlength(10)}` trasy `minlength` określa ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-784">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="4cedd-785">Aby uzyskać więcej informacji na temat ograniczeń trasy i listę ograniczeń zapewnianych przez platformę, zobacz sekcję [odwołanie do ograniczenia trasy](#route-constraint-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-785">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

<span data-ttu-id="4cedd-786">Parametry trasy mogą także mieć Transformatory parametrów, które przekształcają wartość parametru podczas generowania linków i dopasowywania stron do adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-786">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URLs.</span></span> <span data-ttu-id="4cedd-787">Podobnie jak ograniczenia, transformatory parametrów mogą być dodawane wewnętrznie do parametru trasy przez dodanie dwukropka (`:`) i nazwy transformatora po nazwie parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-787">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="4cedd-788">Na przykład szablon `blog/{article:slugify}` trasy `slugify` określa transformator.</span><span class="sxs-lookup"><span data-stu-id="4cedd-788">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span> <span data-ttu-id="4cedd-789">Aby uzyskać więcej informacji na temat transformatorów parametrów, zobacz sekcję [informacje dotyczące transformatora parametrów](#parameter-transformer-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-789">For more information on parameter transformers, see the [Parameter transformer reference](#parameter-transformer-reference) section.</span></span>

<span data-ttu-id="4cedd-790">W poniższej tabeli przedstawiono przykładowe szablony tras i ich zachowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-790">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="4cedd-791">Szablon trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-791">Route Template</span></span>                           | <span data-ttu-id="4cedd-792">Przykładowy pasujący identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="4cedd-792">Example Matching URI</span></span>    | <span data-ttu-id="4cedd-793">Identyfikator URI żądania&hellip;</span><span class="sxs-lookup"><span data-stu-id="4cedd-793">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="4cedd-794">Dopasowuje tylko jedną ścieżkę `/hello`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-794">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="4cedd-795">Dopasowuje i `Page` ustawia `Home`jako.</span><span class="sxs-lookup"><span data-stu-id="4cedd-795">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="4cedd-796">Dopasowuje i `Page` ustawia `Contact`jako.</span><span class="sxs-lookup"><span data-stu-id="4cedd-796">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="4cedd-797">Mapuje do `Products` kontrolera i `List` akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-797">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="4cedd-798">Mapuje do `Products` kontrolera i `Details` akcji (`id` ustawienie na 123).</span><span class="sxs-lookup"><span data-stu-id="4cedd-798">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="4cedd-799">Mapuje na `Home` kontroler i `Index` metodę (`id` jest ignorowana).</span><span class="sxs-lookup"><span data-stu-id="4cedd-799">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="4cedd-800">Użycie szablonu jest ogólnie najprostszym podejściem do routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-800">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="4cedd-801">Ograniczenia i wartości domyślne można także określić poza szablonem trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-801">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-802">Włącz [Rejestrowanie](xref:fundamentals/logging/index) , aby zobaczyć, jak wbudowane implementacje routingu, takie jak <xref:Microsoft.AspNetCore.Routing.Route>, dopasowują żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-802">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="4cedd-803">Zastrzeżone nazwy routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-803">Reserved routing names</span></span>

<span data-ttu-id="4cedd-804">Następujące słowa kluczowe są nazwami zarezerwowanymi i nie mogą być używane jako nazwy tras lub parametry:</span><span class="sxs-lookup"><span data-stu-id="4cedd-804">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="4cedd-805">Odwołanie do ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-805">Route constraint reference</span></span>

<span data-ttu-id="4cedd-806">Ograniczenia trasy są wykonywane, gdy nastąpiło dopasowanie do przychodzącego adresu URL, a Ścieżka adresu URL jest zgodna z wartościami trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-806">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="4cedd-807">Ograniczenia trasy zwykle sprawdzają wartość trasy skojarzoną za pośrednictwem szablonu trasy i podejmują decyzję o tym, czy wartość jest akceptowalna.</span><span class="sxs-lookup"><span data-stu-id="4cedd-807">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="4cedd-808">Niektóre ograniczenia trasy używają danych poza wartością trasy, aby uwzględnić, czy żądanie może być kierowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-808">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="4cedd-809">Na przykład <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> może akceptować lub odrzucać żądanie na podstawie jego zlecenia http.</span><span class="sxs-lookup"><span data-stu-id="4cedd-809">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="4cedd-810">Ograniczenia są używane w żądaniach routingu i generowania linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-810">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="4cedd-811">Nie używaj ograniczeń **sprawdzania poprawności danych wejściowych**.</span><span class="sxs-lookup"><span data-stu-id="4cedd-811">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="4cedd-812">Jeśli ograniczenia są używane do **sprawdzania poprawności danych wejściowych**, nieprawidłowe dane wejściowe w odpowiedzi *404 — nie znaleziono* , zamiast *żądania 400-złe* z odpowiednim komunikatem o błędzie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-812">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="4cedd-813">Ograniczenia trasy są **używane do** odróżniania podobnych tras, a nie do sprawdzania danych wejściowych dla określonej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-813">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="4cedd-814">W poniższej tabeli przedstawiono przykładowe ograniczenia trasy i ich oczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-814">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="4cedd-815">ograniczenie</span><span class="sxs-lookup"><span data-stu-id="4cedd-815">constraint</span></span> | <span data-ttu-id="4cedd-816">Przykład</span><span class="sxs-lookup"><span data-stu-id="4cedd-816">Example</span></span> | <span data-ttu-id="4cedd-817">Przykładowe dopasowania</span><span class="sxs-lookup"><span data-stu-id="4cedd-817">Example Matches</span></span> | <span data-ttu-id="4cedd-818">Uwagi</span><span class="sxs-lookup"><span data-stu-id="4cedd-818">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="4cedd-819">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="4cedd-819">`123456789`, `-123456789`</span></span> | <span data-ttu-id="4cedd-820">Dopasowuje dowolną liczbę całkowitą</span><span class="sxs-lookup"><span data-stu-id="4cedd-820">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="4cedd-821">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="4cedd-821">`true`, `FALSE`</span></span> | <span data-ttu-id="4cedd-822">`true` Dopasowuje `false` lub (bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="4cedd-822">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="4cedd-823">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="4cedd-823">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="4cedd-824">Dopasowuje prawidłową `DateTime` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-824">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="4cedd-825">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="4cedd-825">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="4cedd-826">Dopasowuje prawidłową `decimal` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-826">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="4cedd-827">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="4cedd-827">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="4cedd-828">Dopasowuje prawidłową `double` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-828">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="4cedd-829">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="4cedd-829">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="4cedd-830">Dopasowuje prawidłową `float` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-830">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="4cedd-831">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="4cedd-831">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="4cedd-832">Dopasowuje prawidłową `Guid` wartość</span><span class="sxs-lookup"><span data-stu-id="4cedd-832">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="4cedd-833">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="4cedd-833">`123456789`, `-123456789`</span></span> | <span data-ttu-id="4cedd-834">Dopasowuje prawidłową `long` wartość</span><span class="sxs-lookup"><span data-stu-id="4cedd-834">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="4cedd-835">Ciąg musi składać się z co najmniej 4 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-835">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="4cedd-836">Ciąg nie może zawierać więcej niż 8 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-836">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="4cedd-837">Ciąg musi zawierać dokładnie 12 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-837">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="4cedd-838">Ciąg musi mieć długość co najmniej 8 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-838">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="4cedd-839">Wartość całkowita musi być równa co najmniej 18</span><span class="sxs-lookup"><span data-stu-id="4cedd-839">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="4cedd-840">Wartość całkowita nie może być większa niż 120</span><span class="sxs-lookup"><span data-stu-id="4cedd-840">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="4cedd-841">Wartość całkowita musi być równa co najmniej 18, ale nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="4cedd-841">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="4cedd-842">Ciąg musi zawierać co najmniej jeden znak alfabetyczny (`a`-`z`bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="4cedd-842">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="4cedd-843">Ciąg musi być zgodny z wyrażeniem regularnym (zobacz Porady dotyczące definiowania wyrażenia regularnego)</span><span class="sxs-lookup"><span data-stu-id="4cedd-843">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="4cedd-844">Służy do wymuszania, że podczas generowania adresu URL jest obecna wartość, która nie jest wartością parametru</span><span class="sxs-lookup"><span data-stu-id="4cedd-844">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="4cedd-845">Wielokrotne ograniczenia rozdzielane średnikami można zastosować do jednego parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-845">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="4cedd-846">Na przykład następujące ograniczenie ogranicza parametr do wartości całkowitej 1 lub wyższej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-846">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="4cedd-847">Ograniczenia trasy, które weryfikują adres URL i są konwertowane na typ CLR (takie `int` jak `DateTime`lub), zawsze używają niezmiennej kultury.</span><span class="sxs-lookup"><span data-stu-id="4cedd-847">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="4cedd-848">W tych ograniczeniach przyjęto założenie, że adres URL nie jest Lokalizowalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-848">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="4cedd-849">Ograniczenia trasy dostarczone przez platformę nie modyfikują wartości przechowywanych w wartościach trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-849">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="4cedd-850">Wszystkie wartości tras analizowane na podstawie adresu URL są przechowywane jako ciągi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-850">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="4cedd-851">Na przykład, `float` ograniczenie próbuje przekonwertować wartość trasy na float, ale przekonwertowana wartość jest używana tylko do sprawdzenia, czy może być konwertowana na typ float.</span><span class="sxs-lookup"><span data-stu-id="4cedd-851">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="4cedd-852">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="4cedd-852">Regular expressions</span></span>

<span data-ttu-id="4cedd-853">ASP.NET Core Framework dodaje `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` do konstruktora wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-853">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="4cedd-854">Aby <xref:System.Text.RegularExpressions.RegexOptions> uzyskać opis tych elementów członkowskich, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-854">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="4cedd-855">Wyrażenia regularne używają ograniczników i tokenów podobnych do tych używanych w ramach routingu i C# języka.</span><span class="sxs-lookup"><span data-stu-id="4cedd-855">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="4cedd-856">Tokeny wyrażenia regularnego muszą być zmienione.</span><span class="sxs-lookup"><span data-stu-id="4cedd-856">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="4cedd-857">Aby użyć wyrażenia `^\d{3}-\d{2}-\d{4}$` regularnego w routingu, wyrażenie musi `\` mieć (pojedynczy ukośnik odwrotny) podany w ciągu jako `\\` znak (podwójny ukośnik odwrotny) w pliku C# źródłowym w celu ucieczki `\` znak ucieczki ciągu (chyba, że używane są [literały ciągu Verbatim](/dotnet/csharp/language-reference/keywords/string)).</span><span class="sxs-lookup"><span data-stu-id="4cedd-857">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing, the expression must have the `\` (single backslash) characters provided in the string as `\\` (double backslash) characters in the C# source file in order to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string)).</span></span> <span data-ttu-id="4cedd-858">Na znaki ogranicznika parametru routingu ucieczki (`{`, `}`, `[` `]`,) `[[``{{` ,podwójne`}`znaki w wyrażeniu (,,, ).`]]`</span><span class="sxs-lookup"><span data-stu-id="4cedd-858">To escape routing parameter delimiter characters (`{`, `}`, `[`, `]`), double the characters in the expression (`{{`, `}`, `[[`, `]]`).</span></span> <span data-ttu-id="4cedd-859">W poniższej tabeli przedstawiono wyrażenie regularne i wersja z ucieczką.</span><span class="sxs-lookup"><span data-stu-id="4cedd-859">The following table shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="4cedd-860">Wyrażenie regularne</span><span class="sxs-lookup"><span data-stu-id="4cedd-860">Regular Expression</span></span>    | <span data-ttu-id="4cedd-861">Wyrażenie regularne o zmienionym znaczeniu</span><span class="sxs-lookup"><span data-stu-id="4cedd-861">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="4cedd-862">Wyrażenia regularne używane w routingu często zaczynają się od znaku`^`daszka () i dopasowują pozycję początkową ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-862">Regular expressions used in routing often start with the caret (`^`) character and match starting position of the string.</span></span> <span data-ttu-id="4cedd-863">Wyrażenia często kończą się znakiem dolara (`$`) i końcem ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-863">The expressions often end with the dollar sign (`$`) character and match end of the string.</span></span> <span data-ttu-id="4cedd-864">Znaki `^` i`$` zapewniają, że wyrażenie regularne dopasowuje całą wartość parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-864">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="4cedd-865">Bez znaków `$` i wyrażenie regularne dopasowuje dowolny podciąg w ciągu, co jest często niepożądane. `^`</span><span class="sxs-lookup"><span data-stu-id="4cedd-865">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="4cedd-866">W poniższej tabeli przedstawiono przykłady i wyjaśniono, dlaczego są one zgodne lub niezgodne.</span><span class="sxs-lookup"><span data-stu-id="4cedd-866">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="4cedd-867">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="4cedd-867">Expression</span></span>   | <span data-ttu-id="4cedd-868">String</span><span class="sxs-lookup"><span data-stu-id="4cedd-868">String</span></span>    | <span data-ttu-id="4cedd-869">Dopasowanie</span><span class="sxs-lookup"><span data-stu-id="4cedd-869">Match</span></span> | <span data-ttu-id="4cedd-870">Komentarz</span><span class="sxs-lookup"><span data-stu-id="4cedd-870">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-871">Cześć</span><span class="sxs-lookup"><span data-stu-id="4cedd-871">hello</span></span>     | <span data-ttu-id="4cedd-872">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-872">Yes</span></span>   | <span data-ttu-id="4cedd-873">Dopasowania podciągów</span><span class="sxs-lookup"><span data-stu-id="4cedd-873">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-874">123abc456</span><span class="sxs-lookup"><span data-stu-id="4cedd-874">123abc456</span></span> | <span data-ttu-id="4cedd-875">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-875">Yes</span></span>   | <span data-ttu-id="4cedd-876">Dopasowania podciągów</span><span class="sxs-lookup"><span data-stu-id="4cedd-876">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-877">mz</span><span class="sxs-lookup"><span data-stu-id="4cedd-877">mz</span></span>        | <span data-ttu-id="4cedd-878">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-878">Yes</span></span>   | <span data-ttu-id="4cedd-879">Wyrażenie dopasowania</span><span class="sxs-lookup"><span data-stu-id="4cedd-879">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-880">MZ</span><span class="sxs-lookup"><span data-stu-id="4cedd-880">MZ</span></span>        | <span data-ttu-id="4cedd-881">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-881">Yes</span></span>   | <span data-ttu-id="4cedd-882">Bez uwzględniania wielkości liter</span><span class="sxs-lookup"><span data-stu-id="4cedd-882">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="4cedd-883">Cześć</span><span class="sxs-lookup"><span data-stu-id="4cedd-883">hello</span></span>     | <span data-ttu-id="4cedd-884">Nie</span><span class="sxs-lookup"><span data-stu-id="4cedd-884">No</span></span>    | <span data-ttu-id="4cedd-885">Zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="4cedd-885">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="4cedd-886">123abc456</span><span class="sxs-lookup"><span data-stu-id="4cedd-886">123abc456</span></span> | <span data-ttu-id="4cedd-887">Nie</span><span class="sxs-lookup"><span data-stu-id="4cedd-887">No</span></span>    | <span data-ttu-id="4cedd-888">Zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="4cedd-888">See `^` and `$` above</span></span> |

<span data-ttu-id="4cedd-889">Aby uzyskać więcej informacji na temat składni wyrażeń regularnych, zobacz [.NET Framework wyrażeń regularnych](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="4cedd-889">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="4cedd-890">Aby ograniczyć parametr do znanego zestawu możliwych wartości, użyj wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-890">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="4cedd-891">`{action:regex(^(list|get|create)$)}` Na przykład `list` `get`dopasowuje wartość `create`trasy do,, lub. `action`</span><span class="sxs-lookup"><span data-stu-id="4cedd-891">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="4cedd-892">Jeśli przeszedł do słownika ograniczeń, ciąg `^(list|get|create)$` jest równoważny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-892">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="4cedd-893">Ograniczenia, które są przesyłane w słowniku ograniczenia (nie wbudowane w szablon), które nie pasują do jednego ze znanych ograniczeń, są również traktowane jako wyrażenia regularne.</span><span class="sxs-lookup"><span data-stu-id="4cedd-893">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="4cedd-894">Niestandardowe ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-894">Custom Route Constraints</span></span>

<span data-ttu-id="4cedd-895">Oprócz wbudowanych ograniczeń trasy niestandardowe ograniczenia trasy mogą być tworzone przez implementację <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-895">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="4cedd-896">Interfejs zawiera jedną metodę, która zwraca `Match` `true` , jeśli ograniczenie jest spełnione i `false` w przeciwnym razie. <xref:Microsoft.AspNetCore.Routing.IRouteConstraint></span><span class="sxs-lookup"><span data-stu-id="4cedd-896">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="4cedd-897">Aby użyć niestandardowego <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, typ ograniczenia trasy musi być zarejestrowany <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> w aplikacji w kontenerze usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-897">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="4cedd-898">Jest słownikiem, który mapuje klucze ograniczeń trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> do implementacji, które weryfikują te ograniczenia. <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap></span><span class="sxs-lookup"><span data-stu-id="4cedd-898">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="4cedd-899">Aplikację <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> można zaktualizować w `Startup.ConfigureServices` ramach [usług. Wywołanie addrouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) lub przez skonfigurowanie <xref:Microsoft.AspNetCore.Routing.RouteOptions> bezpośrednio w `services.Configure<RouteOptions>`usłudze.</span><span class="sxs-lookup"><span data-stu-id="4cedd-899">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="4cedd-900">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="4cedd-900">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="4cedd-901">Ograniczenie można następnie zastosować do tras w zwykły sposób, przy użyciu nazwy określonej podczas rejestrowania typu ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-901">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="4cedd-902">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="4cedd-902">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

## <a name="parameter-transformer-reference"></a><span data-ttu-id="4cedd-903">Odwołanie do transformatora parametrów</span><span class="sxs-lookup"><span data-stu-id="4cedd-903">Parameter transformer reference</span></span>

<span data-ttu-id="4cedd-904">Transformatory parametrów:</span><span class="sxs-lookup"><span data-stu-id="4cedd-904">Parameter transformers:</span></span>

* <span data-ttu-id="4cedd-905">Wykonaj podczas generowania linku dla elementu <xref:Microsoft.AspNetCore.Routing.Route>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-905">Execute when generating a link for a <xref:Microsoft.AspNetCore.Routing.Route>.</span></span>
* <span data-ttu-id="4cedd-906">Implementacja `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-906">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="4cedd-907">Są konfigurowane przy <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>użyciu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-907">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="4cedd-908">Wypełnij wartość trasy parametru i Przekształć ją na nową wartość ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-908">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="4cedd-909">Wynikiem jest użycie przekształconej wartości w wygenerowanym łączu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-909">Result in using the transformed value in the generated link.</span></span>

<span data-ttu-id="4cedd-910">Na przykład niestandardowy `slugify` transformator parametrów w wzorcu `blog\{article:slugify}` trasy z `Url.Action(new { article = "MyTestArticle" })` generowaniem `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-910">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="4cedd-911">Aby użyć transformatora parametrów w wzorcu trasy, skonfiguruj go najpierw za <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> pomocą `Startup.ConfigureServices`polecenia w programie:</span><span class="sxs-lookup"><span data-stu-id="4cedd-911">To use a parameter transformer in a route pattern, configure it first using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddRouting(options =>
{
    // Replace the type and the name used to refer to it with your own
    // IOutboundParameterTransformer implementation
    options.ConstraintMap["slugify"] = typeof(SlugifyParameterTransformer);
});
```

<span data-ttu-id="4cedd-912">Transformatory parametrów są używane przez platformę do przekształcania identyfikatora URI, w którym jest rozpoznawany punkt końcowy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-912">Parameter transformers are used by the framework to transform the URI where an endpoint resolves.</span></span> <span data-ttu-id="4cedd-913">Na przykład ASP.NET Core MVC używa transformatorów parametrów do przekształcenia wartości trasy używanej do `area`dopasowania do `action`, `controller`,, i `page`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-913">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller:slugify=Home}/{action:slugify=Index}/{id?}");
```

<span data-ttu-id="4cedd-914">W przypadku poprzedniej trasy Akcja `SubscriptionManagementController.GetAll()` jest dopasowywana do identyfikatora URI. `/subscription-management/get-all`</span><span class="sxs-lookup"><span data-stu-id="4cedd-914">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="4cedd-915">Transformator parametrów nie zmienia wartości trasy użytych do wygenerowania linku.</span><span class="sxs-lookup"><span data-stu-id="4cedd-915">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="4cedd-916">Na przykład `Url.Action("GetAll", "SubscriptionManagement")` dane wyjściowe `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-916">For example, `Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="4cedd-917">ASP.NET Core udostępnia konwencje interfejsu API do używania transformatorów parametrów z wygenerowanymi trasami:</span><span class="sxs-lookup"><span data-stu-id="4cedd-917">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="4cedd-918">ASP.NET Core MVC ma `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` Konwencję interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-918">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="4cedd-919">Ta Konwencja stosuje określony transformator parametrów do wszystkich tras atrybutów w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-919">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="4cedd-920">Transformator parametrów przekształca tokeny trasy atrybutów po ich wymianie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-920">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="4cedd-921">Aby uzyskać więcej informacji, zobacz [używanie transformatora parametrów do dostosowywania zastępowania tokenu](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="4cedd-921">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="4cedd-922">Razor Pages ma `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` Konwencję interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-922">Razor Pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="4cedd-923">Ta Konwencja stosuje określony transformator parametrów do wszystkich automatycznie odnalezionych Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-923">This convention applies a specified parameter transformer to all automatically discovered Razor Pages.</span></span> <span data-ttu-id="4cedd-924">Transformator parametrów przekształca segmenty i nazwy plików Razor Pages tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-924">The parameter transformer transforms the folder and file name segments of Razor Pages routes.</span></span> <span data-ttu-id="4cedd-925">Aby uzyskać więcej informacji, zobacz [używanie transformatora parametrów do dostosowywania tras stron](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="4cedd-925">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="4cedd-926">Odwołanie do generacji adresów URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-926">URL generation reference</span></span>

<span data-ttu-id="4cedd-927">Poniższy przykład pokazuje, jak wygenerować link do trasy, używając słownika wartości tras i <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-927">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="4cedd-928">Wygenerowano na końcu powyższego `/package/create/123`przykładu. <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath></span><span class="sxs-lookup"><span data-stu-id="4cedd-928">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="4cedd-929">Słownik `operation` zawiera wartości i `id` trasy szablonu "śledzenie trasy `package/{operation}/{id}`pakietu".</span><span class="sxs-lookup"><span data-stu-id="4cedd-929">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="4cedd-930">Aby uzyskać szczegółowe informacje, zapoznaj się z przykładowym kodem w sekcji [Używanie oprogramowania pośredniczącego usługi routingu](#use-routing-middleware) lub [przykładowej aplikacji](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="4cedd-930">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="4cedd-931">Drugi parametr <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> konstruktora jest kolekcją *wartości otoczenia*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-931">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="4cedd-932">Wartości otoczenia są wygodne do użycia, ponieważ ograniczają liczbę wartości, które Deweloper musi określić w kontekście żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-932">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="4cedd-933">Bieżące wartości trasy bieżącego żądania są uznawane za wartości otoczenia dla generacji łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-933">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="4cedd-934">`About` W akcji `Index` `Home` &mdash;aplikacji ASP.NET Core MVC ,nietrzebaokreślaćwartościtrasykontroleradołączeniazakcją,wktórejjestużywanawartośćotoczenia.`HomeController`</span><span class="sxs-lookup"><span data-stu-id="4cedd-934">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="4cedd-935">Wartości otoczenia, które nie pasują do parametru, są ignorowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-935">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="4cedd-936">Wartości otoczenia są również ignorowane, gdy jawnie podana wartość przesłania wartość otoczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-936">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="4cedd-937">Dopasowanie występuje od lewej do prawej w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-937">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="4cedd-938">Wartości jawnie podane, ale które nie pasują do segmentu trasy, są dodawane do ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-938">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="4cedd-939">W poniższej tabeli przedstawiono wynik przy użyciu szablonu `{controller}/{action}/{id?}`trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-939">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="4cedd-940">Wartości otoczenia</span><span class="sxs-lookup"><span data-stu-id="4cedd-940">Ambient Values</span></span>                     | <span data-ttu-id="4cedd-941">Wartości jawne</span><span class="sxs-lookup"><span data-stu-id="4cedd-941">Explicit Values</span></span>                        | <span data-ttu-id="4cedd-942">Wynik</span><span class="sxs-lookup"><span data-stu-id="4cedd-942">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="4cedd-943">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-943">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-944">Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-944">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="4cedd-945">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-945">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-946">Controller = "Order", Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-946">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="4cedd-947">Controller = "Home", Color = "Red"</span><span class="sxs-lookup"><span data-stu-id="4cedd-947">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="4cedd-948">Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-948">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="4cedd-949">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-949">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-950">Action = "informacje", Color = "Red"</span><span class="sxs-lookup"><span data-stu-id="4cedd-950">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="4cedd-951">Jeśli trasa ma wartość domyślną, która nie odpowiada parametrowi, a ta wartość jest jawnie określona, musi być zgodna z wartością domyślną:</span><span class="sxs-lookup"><span data-stu-id="4cedd-951">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="4cedd-952">Generowanie linku generuje tylko łącze do tej trasy, gdy zostaną podane pasujące `action` wartości dla `controller` i.</span><span class="sxs-lookup"><span data-stu-id="4cedd-952">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="4cedd-953">Złożone segmenty</span><span class="sxs-lookup"><span data-stu-id="4cedd-953">Complex segments</span></span>

<span data-ttu-id="4cedd-954">Złożone segmenty (na `[Route("/x{token}y")]`przykład) są przetwarzane przez dopasowanie literałów z prawej strony do lewej w sposób niezachłanney.</span><span class="sxs-lookup"><span data-stu-id="4cedd-954">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="4cedd-955">[Ten kod](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) zawiera szczegółowy opis sposobu dopasowywania segmentów złożonych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-955">See [this code](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="4cedd-956">[Przykład kodu](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) nie jest używany przez ASP.NET Core, ale zapewnia dobre wyjaśnienie złożonych segmentów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-956">The [code sample](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>
<!-- While that code is no longer used by ASP.NET Core for complex segment matching, it provides a good match to the current algorithm. The [current code](https://github.com/aspnet/AspNetCore/blob/91514c9af7e0f4c44029b51f05a01c6fe4c96e4c/src/Http/Routing/src/Matching/DfaMatcherBuilder.cs#L227-L244) is too abstracted from matching to be useful for understanding complex segment matching.
-->

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="4cedd-957">Routing jest odpowiedzialny za mapowanie identyfikatorów URI żądań w celu rozesłania procedur obsługi i wysyłania żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="4cedd-957">Routing is responsible for mapping request URIs to route handlers and dispatching an incoming requests.</span></span> <span data-ttu-id="4cedd-958">Trasy są zdefiniowane w aplikacji i konfigurowane podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-958">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="4cedd-959">Trasa może opcjonalnie wyodrębnić wartości z adresu URL zawartego w żądaniu. te wartości mogą być następnie używane do przetwarzania żądań.</span><span class="sxs-lookup"><span data-stu-id="4cedd-959">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="4cedd-960">Przy użyciu skonfigurowanych tras z aplikacji Routing jest w stanie generować adresy URL mapowane na procedury obsługi tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-960">Using configured routes from the app, routing is able to generate URLs that map to route handlers.</span></span>

<span data-ttu-id="4cedd-961">Aby użyć najnowszych scenariuszy routingu w ASP.NET Core 2,1, określ [wersję zgodności](xref:mvc/compatibility-version) do rejestracji usług MVC w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="4cedd-961">To use the latest routing scenarios in ASP.NET Core 2.1, specify the [compatibility version](xref:mvc/compatibility-version) to the MVC services registration in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddMvc()
    .SetCompatibilityVersion(CompatibilityVersion.Version_2_1);
```

> [!IMPORTANT]
> <span data-ttu-id="4cedd-962">Ten dokument obejmuje Routing ASP.NET Core niskiego poziomu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-962">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="4cedd-963">Aby uzyskać informacje na temat ASP.NET Core routingu MVC <xref:mvc/controllers/routing>, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-963">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span> <span data-ttu-id="4cedd-964">Aby uzyskać informacje na temat Konwencji routingu w Razor Pages <xref:razor-pages/razor-pages-conventions>, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-964">For information on routing conventions in Razor Pages, see <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="4cedd-965">[Wyświetlanie lub pobieranie przykładowego kodu](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([sposobu pobierania](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="4cedd-965">[View or download sample code](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="4cedd-966">Podstawy routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-966">Routing basics</span></span>

<span data-ttu-id="4cedd-967">Większość aplikacji powinna wybrać podstawowy i opisowy schemat routingu, aby adresy URL były czytelne i zrozumiałe.</span><span class="sxs-lookup"><span data-stu-id="4cedd-967">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="4cedd-968">Domyślna trasa `{controller=Home}/{action=Index}/{id?}`konwencjonalna:</span><span class="sxs-lookup"><span data-stu-id="4cedd-968">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="4cedd-969">Obsługuje podstawowy i opisowy schemat routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-969">Supports a basic and descriptive routing scheme.</span></span>
* <span data-ttu-id="4cedd-970">Jest użytecznym punktem wyjścia dla aplikacji opartych na interfejsie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4cedd-970">Is a useful starting point for UI-based apps.</span></span>

<span data-ttu-id="4cedd-971">Deweloperzy często dodają dodatkowe trasy zwięzła do obszarów o dużym ruchu w aplikacji w wyspecjalizowanych sytuacjach (na przykład blog i punkty końcowe handlu elektronicznego) przy użyciu [routingu atrybutów](xref:mvc/controllers/routing#attribute-routing) lub dedykowanych tras konwencjonalnych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-971">Developers commonly add additional terse routes to high-traffic areas of an app in specialized situations (for example, blog and ecommerce endpoints) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="4cedd-972">Interfejsy API sieci Web powinny używać routingu atrybutów do modelowania funkcjonalności aplikacji jako zestawu zasobów, w których operacje są reprezentowane przez zlecenia HTTP.</span><span class="sxs-lookup"><span data-stu-id="4cedd-972">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="4cedd-973">Oznacza to, że wiele operacji (na przykład GET, POST) dla tego samego zasobu logicznego będzie używać tego samego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-973">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="4cedd-974">Routing atrybutu zapewnia poziom kontroli, który jest wymagany do dokładnego projektowania układu publicznego punktu końcowego interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="4cedd-974">Attribute routing provides a level of control that's needed to carefully design an API's public endpoint layout.</span></span>

<span data-ttu-id="4cedd-975">Aplikacje Razor Pages używają domyślnego routingu konwencjonalnego do obsłużenia nazwanych zasobów w folderze *strony* aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-975">Razor Pages apps use default conventional routing to serve named resources in the *Pages* folder of an app.</span></span> <span data-ttu-id="4cedd-976">Dostępne są dodatkowe konwencje, które umożliwiają dostosowanie Razor Pages zachowaniem routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-976">Additional conventions are available that allow you to customize Razor Pages routing behavior.</span></span> <span data-ttu-id="4cedd-977">Aby uzyskać więcej informacji, zobacz <xref:razor-pages/index> i <xref:razor-pages/razor-pages-conventions>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-977">For more information, see <xref:razor-pages/index> and <xref:razor-pages/razor-pages-conventions>.</span></span>

<span data-ttu-id="4cedd-978">Obsługa generowania adresów URL umożliwia tworzenie aplikacji bez adresów URL, które mają być połączone ze sobą.</span><span class="sxs-lookup"><span data-stu-id="4cedd-978">URL generation support allows the app to be developed without hard-coding URLs to link the app together.</span></span> <span data-ttu-id="4cedd-979">Ta obsługa pozwala rozpocząć od podstawowej konfiguracji routingu i zmodyfikować trasy po ustaleniu układu zasobów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-979">This support allows for starting with a basic routing configuration and modifying the routes after the app's resource layout is determined.</span></span>

<span data-ttu-id="4cedd-980">Routing używa *tras* (implementacji programu <xref:Microsoft.AspNetCore.Routing.IRouter>) do:</span><span class="sxs-lookup"><span data-stu-id="4cedd-980">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="4cedd-981">Mapuj przychodzące żądania do *obsługi tras*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-981">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="4cedd-982">Generuj adresy URL używane w odpowiedziach.</span><span class="sxs-lookup"><span data-stu-id="4cedd-982">Generate the URLs used in responses.</span></span>

<span data-ttu-id="4cedd-983">Domyślnie aplikacja ma jedną kolekcję tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-983">By default, an app has a single collection of routes.</span></span> <span data-ttu-id="4cedd-984">Po nadejściu żądania trasy w kolekcji są przetwarzane w kolejności, w jakiej istnieją w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-984">When a request arrives, the routes in the collection are processed in the order that they exist in the collection.</span></span> <span data-ttu-id="4cedd-985">Platforma próbuje dopasować przychodzący adres URL żądania do trasy w kolekcji, wywołując <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metodę dla każdej trasy w kolekcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-985">The framework attempts to match an incoming request URL to a route in the collection by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in the collection.</span></span> <span data-ttu-id="4cedd-986">Odpowiedź może używać routingu do generowania adresów URL (na przykład w przypadku przekierowania lub linków) na podstawie informacji o trasach i w ten sposób unikania zakodowanych adresów URL, co ułatwia łatwość utrzymania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-986">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>

<span data-ttu-id="4cedd-987">System routingu ma następujące cechy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-987">The routing system has the following characteristics:</span></span>

* <span data-ttu-id="4cedd-988">Składnia szablonu trasy służy do definiowania tras z parametrami trasy z tokenami.</span><span class="sxs-lookup"><span data-stu-id="4cedd-988">Route template syntax is used to define routes with tokenized route parameters.</span></span>
* <span data-ttu-id="4cedd-989">Dozwolona jest konfiguracja języka końcowego w stylu konwencjonalnym i stylu atrybutu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-989">Conventional-style and attribute-style endpoint configuration is permitted.</span></span>
* <span data-ttu-id="4cedd-990"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint>służy do określenia, czy parametr adresu URL zawiera prawidłową wartość dla danego ograniczenia punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-990"><xref:Microsoft.AspNetCore.Routing.IRouteConstraint> is used to determine whether a URL parameter contains a valid value for a given endpoint constraint.</span></span>
* <span data-ttu-id="4cedd-991">Modele aplikacji, takie jak MVC/Razor Pages, rejestrują wszystkie trasy z przewidywalną implementacją scenariuszy routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-991">App models, such as MVC/Razor Pages, register all of their routes, which have a predictable implementation of routing scenarios.</span></span>
* <span data-ttu-id="4cedd-992">Odpowiedź może używać routingu do generowania adresów URL (na przykład w przypadku przekierowania lub linków) na podstawie informacji o trasach i w ten sposób unikania zakodowanych adresów URL, co ułatwia łatwość utrzymania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-992">A response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid hard-coded URLs, which helps maintainability.</span></span>
* <span data-ttu-id="4cedd-993">Generacja adresów URL jest oparta na trasach, które obsługują arbitralną rozszerzalność.</span><span class="sxs-lookup"><span data-stu-id="4cedd-993">URL generation is based on routes, which support arbitrary extensibility.</span></span> <span data-ttu-id="4cedd-994"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper>oferuje metody do kompilowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-994"><xref:Microsoft.AspNetCore.Mvc.IUrlHelper> offers methods to build URLs.</span></span>

<span data-ttu-id="4cedd-995">Routing jest połączony z potokiem [pośredniczącym](xref:fundamentals/middleware/index) przez <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> klasę.</span><span class="sxs-lookup"><span data-stu-id="4cedd-995">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="4cedd-996">[ASP.NET Core MVC](xref:mvc/overview) dodaje Routing do potoku oprogramowania pośredniczącego w ramach swojej konfiguracji i obsługuje routing w aplikacjach MVC i Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="4cedd-996">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration and handles routing in MVC and Razor Pages apps.</span></span> <span data-ttu-id="4cedd-997">Aby dowiedzieć się, jak używać routingu jako składnika autonomicznego, zapoznaj się z sekcją [Korzystanie z oprogramowania do routingu](#use-routing-middleware) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-997">To learn how to use routing as a standalone component, see the [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="4cedd-998">Dopasowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-998">URL matching</span></span>

<span data-ttu-id="4cedd-999">Dopasowywanie adresów URL to proces, za pomocą którego Routing wysyła żądanie przychodzące do *procedury obsługi*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-999">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="4cedd-1000">Ten proces jest oparty na danych w ścieżce URL, ale można go rozszerzyć w celu uwzględnienia wszelkich danych w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1000">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="4cedd-1001">Możliwość wysyłania żądań do oddzielnych programów obsługi jest kluczem do skalowania rozmiaru i złożoności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1001">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="4cedd-1002">Żądania przychodzące wprowadzają <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, który <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> wywołuje metodę dla każdej trasy w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1002">Incoming requests enter the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="4cedd-1003">Wystąpienie wybiera, czy *obsługiwać* żądanie przez ustawienie [RouteContext. Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) na wartość różną od null <xref:Microsoft.AspNetCore.Http.RequestDelegate>. <xref:Microsoft.AspNetCore.Routing.IRouter></span><span class="sxs-lookup"><span data-stu-id="4cedd-1003">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="4cedd-1004">Jeśli trasa ustawi procedurę obsługi dla żądania, przetwarzanie trasy zostanie zatrzymane, a procedura obsługi zostanie wywołana w celu przetworzenia żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1004">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="4cedd-1005">Jeśli nie znaleziono procedury obsługi trasy do przetworzenia żądania, oprogramowanie pośredniczące przekazuje żądanie do następnego oprogramowania pośredniczącego w potoku żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1005">If no route handler is found to process the request, the middleware hands the request off to the next middleware in the request pipeline.</span></span>

<span data-ttu-id="4cedd-1006">Podstawowe dane wejściowe <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> to [RouteContext. HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) skojarzone z bieżącym żądaniem.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1006">The primary input to <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="4cedd-1007">[RouteContext. Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) i [RouteContext. RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) są ustawiane jako wyjście po dopasowaniu trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1007">The [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler) and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route is matched.</span></span>

<span data-ttu-id="4cedd-1008">Dopasowanie, które wywołuje <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> również ustawia właściwości [RouteContext. RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) na odpowiednie wartości na podstawie przetwarzania żądania wykonanego do tej pory.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1008">A match that calls <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> also sets the properties of the [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData) to appropriate values based on the request processing performed thus far.</span></span>

<span data-ttu-id="4cedd-1009">[RouteData. Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) to słownik *wartości tras* uzyskanych z trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1009">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="4cedd-1010">Te wartości są zwykle określane przez tokenizowanie jako adres URL i mogą służyć do akceptowania danych wejściowych użytkownika lub do dalszej akceptacji decyzji w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1010">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="4cedd-1011">[RouteData. DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) to zbiór właściwości dodatkowych danych dotyczących dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1011">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="4cedd-1012"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*>zapewnia obsługę kojarzenia danych stanu z każdą trasą, dzięki czemu aplikacja może podejmować decyzje na podstawie dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1012"><xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*> are provided to support associating state data with each route so that the app can make decisions based on which route matched.</span></span> <span data-ttu-id="4cedd-1013">Te wartości są zdefiniowane przez dewelopera i **nie** mają wpływu na zachowanie routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1013">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="4cedd-1014">Ponadto wartości umieszczane w [RouteData. Datatokeny](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) mogą być dowolnego typu, w przeciwieństwie do [RouteData. wartości](xref:Microsoft.AspNetCore.Routing.RouteData.Values), które muszą być konwertowane do i z ciągów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1014">Additionally, values stashed in [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) can be of any type, in contrast to [RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values), which must be convertible to and from strings.</span></span>

<span data-ttu-id="4cedd-1015">[RouteData. routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) to lista tras, które brały udział w pomyślnie dopasowane do żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1015">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="4cedd-1016">Trasy mogą być zagnieżdżone wewnątrz siebie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1016">Routes can be nested inside of one another.</span></span> <span data-ttu-id="4cedd-1017"><xref:Microsoft.AspNetCore.Routing.RouteData.Routers> Właściwość odzwierciedla ścieżkę przez logiczne drzewo tras, które spowodowały dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1017">The <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="4cedd-1018">Ogólnie rzecz biorąc, pierwszy element <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> w jest kolekcją tras i powinien być używany do generowania adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1018">Generally, the first item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="4cedd-1019">Ostatnim elementem w programie <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> jest program obsługi trasy, który został dopasowany.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1019">The last item in <xref:Microsoft.AspNetCore.Routing.RouteData.Routers> is the route handler that matched.</span></span>

<a name="lg"></a>

### <a name="url-generation"></a><span data-ttu-id="4cedd-1020">Generowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-1020">URL generation</span></span>

<span data-ttu-id="4cedd-1021">Generowanie adresu URL to proces, za pomocą którego Routing może utworzyć ścieżkę URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1021">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="4cedd-1022">Pozwala to na logiczne rozdzielenie między programami obsługi tras i adresami URL, które uzyskują do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1022">This allows for a logical separation between route handlers and the URLs that access them.</span></span>

<span data-ttu-id="4cedd-1023">Generowanie adresu URL następuje podobny proces iteracyjny, ale rozpoczyna się od kodu użytkownika lub struktury wywołującego <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metodę kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1023">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="4cedd-1024">Każda *trasa* ma <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metodę wywoływana w sekwencji do momentu zwrócenia wartości innej <xref:Microsoft.AspNetCore.Routing.VirtualPathData> niż null.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1024">Each *route* has its <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="4cedd-1025">Podstawowe dane wejściowe <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> :</span><span class="sxs-lookup"><span data-stu-id="4cedd-1025">The primary inputs to <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> are:</span></span>

* [<span data-ttu-id="4cedd-1026">VirtualPathContext. HttpContext</span><span class="sxs-lookup"><span data-stu-id="4cedd-1026">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext)
* [<span data-ttu-id="4cedd-1027">VirtualPathContext. wartości</span><span class="sxs-lookup"><span data-stu-id="4cedd-1027">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values)
* [<span data-ttu-id="4cedd-1028">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="4cedd-1028">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues)

<span data-ttu-id="4cedd-1029">Trasy wykorzystują głównie wartości trasy dostarczone przez <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> i <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> , aby zdecydować, czy możliwe jest wygenerowanie adresu URL i wartości do uwzględnienia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1029">Routes primarily use the route values provided by <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> and <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="4cedd-1030"><xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> Są to zbiór wartości tras, które zostały utworzone na podstawie dopasowania bieżącego żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1030">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues> are the set of route values that were produced from matching the current request.</span></span> <span data-ttu-id="4cedd-1031">Z kolei <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> są wartościami trasy, które określają sposób generowania żądanego adresu URL dla bieżącej operacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1031">In contrast, <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values> are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="4cedd-1032"><xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> W przypadku trasy należy uzyskać usługi lub dodatkowe dane skojarzone z bieżącym kontekstem.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1032">The <xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext> is provided in case a route should obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-1033">Pomyśl o [VirtualPathContext. wartości](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) jako zestawu zastąpień dla [VirtualPathContext. AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1033">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="4cedd-1034">Generowanie adresów URL próbuje ponownie użyć wartości trasy z bieżącego żądania w celu wygenerowania adresów URL dla linków przy użyciu tych samych wartości trasy lub trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1034">URL generation attempts to reuse route values from the current request to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="4cedd-1035"><xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> Wynik<xref:Microsoft.AspNetCore.Routing.VirtualPathData>jest.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1035">The output of <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is a <xref:Microsoft.AspNetCore.Routing.VirtualPathData>.</span></span> <span data-ttu-id="4cedd-1036"><xref:Microsoft.AspNetCore.Routing.VirtualPathData>jest równoległe z <xref:Microsoft.AspNetCore.Routing.RouteData>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1036"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> is a parallel of <xref:Microsoft.AspNetCore.Routing.RouteData>.</span></span> <span data-ttu-id="4cedd-1037"><xref:Microsoft.AspNetCore.Routing.VirtualPathData>zawiera wartość <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> dla wyjściowego adresu URL oraz kilka dodatkowych właściwości, które powinny być ustawiane przez trasę.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1037"><xref:Microsoft.AspNetCore.Routing.VirtualPathData> contains the <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="4cedd-1038">Właściwość [VirtualPathData. VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) zawiera *ścieżkę wirtualną* wygenerowaną przez trasę.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1038">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="4cedd-1039">W zależności od potrzeb może być konieczne dalsze przetworzenie ścieżki.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1039">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="4cedd-1040">Jeśli chcesz renderować wygenerowany adres URL w formacie HTML, poprzedź ścieżkę podstawową aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1040">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="4cedd-1041">[VirtualPathData. router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) jest odwołaniem do trasy, która pomyślnie wygenerowała adres URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1041">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="4cedd-1042">Właściwości [VirtualPathData. DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) to słownik dodatkowych danych związanych z trasą, która wygenerowała adres URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1042">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="4cedd-1043">Jest to równoległy [RouteData. DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1043">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="create-routes"></a><span data-ttu-id="4cedd-1044">Tworzenie tras</span><span class="sxs-lookup"><span data-stu-id="4cedd-1044">Create routes</span></span>

<span data-ttu-id="4cedd-1045">Routing udostępnia <xref:Microsoft.AspNetCore.Routing.Route> klasę jako standardową implementację programu <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1045">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="4cedd-1046"><xref:Microsoft.AspNetCore.Routing.Route>używa składni *szablonu trasy* do definiowania wzorców do dopasowania względem ścieżki URL, gdy <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1046"><xref:Microsoft.AspNetCore.Routing.Route> uses the *route template* syntax to define patterns to match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="4cedd-1047"><xref:Microsoft.AspNetCore.Routing.Route>używa tego samego szablonu trasy do wygenerowania adresu URL <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> , gdy jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1047"><xref:Microsoft.AspNetCore.Routing.Route> uses the same route template to generate a URL when <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> is called.</span></span>

<span data-ttu-id="4cedd-1048">Większość aplikacji tworzy trasy przez wywołanie <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> lub jedną z podobnych metod rozszerzających zdefiniowanych w <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>systemie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1048">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="4cedd-1049">Dowolna z <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> metod rozszerzających tworzy <xref:Microsoft.AspNetCore.Routing.Route> wystąpienie i dodaje je do kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1049">Any of the <xref:Microsoft.AspNetCore.Routing.IRouteBuilder> extension methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="4cedd-1050"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>nie akceptuje parametru procedury obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1050"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> doesn't accept a route handler parameter.</span></span> <span data-ttu-id="4cedd-1051"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*>dodaje tylko trasy, które są obsługiwane przez <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1051"><xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="4cedd-1052">Domyślna procedura obsługi to `IRouter`, a program obsługi może nie obsłużyć żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1052">The default handler is an `IRouter`, and the handler might not handle the request.</span></span> <span data-ttu-id="4cedd-1053">Na przykład ASP.NET Core MVC jest zwykle skonfigurowany jako domyślny program obsługi, który obsługuje tylko żądania zgodne z dostępnym kontrolerem i akcją.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1053">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="4cedd-1054">Aby dowiedzieć się więcej na temat routingu w <xref:mvc/controllers/routing>MVC, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1054">To learn more about routing in MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="4cedd-1055">Poniższy przykład kodu jest przykładem <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wywołania używanego przez typową definicję trasy MVC ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1055">The following code example is an example of a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="4cedd-1056">Ten szablon dopasowuje ścieżkę URL i wyodrębnia wartości tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1056">This template matches a URL path and extracts the route values.</span></span> <span data-ttu-id="4cedd-1057">Na przykład ścieżka `/Products/Details/17` generuje następujące wartości trasy: `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1057">For example, the path `/Products/Details/17` generates the following route values: `{ controller = Products, action = Details, id = 17 }`.</span></span>

<span data-ttu-id="4cedd-1058">Wartości tras są określane przez podzielenie ścieżki URL na segmenty i dopasowanie do każdego segmentu przy użyciu nazwy *parametru trasy* w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1058">Route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="4cedd-1059">Parametry trasy są nazywane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1059">Route parameters are named.</span></span> <span data-ttu-id="4cedd-1060">Parametry zdefiniowane przez ujęcie nazwy parametru w nawiasach klamrowych `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1060">The parameters defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="4cedd-1061">Poprzedni szablon może również pasować do ścieżki `/` URL i generować wartości. `{ controller = Home, action = Index }`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1061">The preceding template could also match the URL path `/` and produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="4cedd-1062">Dzieje się tak, `{controller}` ponieważ `{action}` parametry i trasy `id` mają wartości domyślne, a parametr trasy jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1062">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="4cedd-1063">Znak równości (`=`), po którym następuje wartość po nazwie parametru trasy definiuje wartość domyślną dla parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1063">An equals sign (`=`) followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="4cedd-1064">Znak zapytania (`?`) po nazwie parametru trasy definiuje opcjonalny parametr.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1064">A question mark (`?`) after the route parameter name defines an optional parameter.</span></span>

<span data-ttu-id="4cedd-1065">Parametry trasy z wartością domyślną *zawsze* generują wartość trasy w przypadku dopasowania trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1065">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="4cedd-1066">Parametry opcjonalne nie generują wartości trasy, jeśli nie ma odpowiedniego segmentu ścieżki adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1066">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span> <span data-ttu-id="4cedd-1067">Szczegółowe opisy scenariuszy i składni szablonów tras można znaleźć w sekcji [Dokumentacja dotycząca szablonu trasy](#route-template-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-1067">See the [Route template reference](#route-template-reference) section for a thorough description of route template scenarios and syntax.</span></span>

<span data-ttu-id="4cedd-1068">W poniższym przykładzie definicja `{id:int}` parametru trasy definiuje [](#route-constraint-reference) `id` ograniczenie trasy dla parametru trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1068">In the following example, the route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="4cedd-1069">Ten szablon dopasowuje ścieżkę URL, `/Products/Details/17` taką jak `/Products/Details/Apples`, ale nie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1069">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="4cedd-1070">Ograniczenia trasy implementują <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> i sprawdzają wartości routingu w celu ich zweryfikowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1070">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="4cedd-1071">W tym przykładzie wartość `id` trasy musi być możliwa do przekonwertowania na liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1071">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="4cedd-1072">Aby uzyskać wyjaśnienie ograniczeń trasy dostarczonych przez platformę, zobacz temat [ograniczenia trasy](#route-constraint-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-1072">See [route-constraint-reference](#route-constraint-reference) for an explanation of route constraints provided by the framework.</span></span>

<span data-ttu-id="4cedd-1073">Dodatkowe przeciążenia <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> wartości akceptują dla `constraints`, `dataTokens`i. `defaults`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1073">Additional overloads of <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="4cedd-1074">Typowym użyciem tych parametrów jest przekazanie anonimowo wpisanego obiektu, gdzie nazwy właściwości typu anonimowego są zgodne z nazwami parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1074">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="4cedd-1075">Poniższe <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> przykłady tworzą równoważne trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1075">The following <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="4cedd-1076">Wbudowana Składnia służąca do definiowania ograniczeń i wartości domyślnych może być wygodna dla prostych tras.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1076">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="4cedd-1077">Istnieją jednak scenariusze, takie jak tokeny danych, które nie są obsługiwane przez składnię wbudowaną.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1077">However, there are scenarios, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="4cedd-1078">Poniższy przykład ilustruje kilka dodatkowych scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1078">The following example demonstrates a few additional scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="4cedd-1079">Poprzedni szablon pasuje do ścieżki URL, tak `/Blog/All-About-Routing/Introduction` jak i wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1079">The preceding template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="4cedd-1080">Domyślne wartości trasy dla `controller` i `action` są generowane przez trasę, nawet jeśli w szablonie nie ma odpowiednich parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1080">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="4cedd-1081">Wartości domyślne można określić w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1081">Default values can be specified in the route template.</span></span> <span data-ttu-id="4cedd-1082">Parametr Route jest definiowany jako *przechwycenie* przez wygląd gwiazdki (`*`) przed nazwą parametru trasy. `article`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1082">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk (`*`) before the route parameter name.</span></span> <span data-ttu-id="4cedd-1083">Catch-wszystkie parametry tras przechwytują resztę ścieżki URL i mogą również pasować do pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1083">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="4cedd-1084">Poniższy przykład dodaje ograniczenia trasy i tokeny danych:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1084">The following example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="4cedd-1085">Poprzedni szablon pasuje do ścieżki URL, na `/en-US/Products/5` przykład i wyodrębnia wartości `{ controller = Products, action = Details, id = 5 }` i tokeny `{ locale = en-US }`danych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1085">The preceding template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Lokalne tokeny systemu Windows](routing/_static/tokens.png)

### <a name="route-class-url-generation"></a><span data-ttu-id="4cedd-1087">Generowanie adresu URL klasy trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-1087">Route class URL generation</span></span>

<span data-ttu-id="4cedd-1088"><xref:Microsoft.AspNetCore.Routing.Route> Klasa może również wykonywać generowanie adresów URL przez połączenie zestawu wartości tras z jego szablonem trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1088">The <xref:Microsoft.AspNetCore.Routing.Route> class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="4cedd-1089">Jest to logicznie proces odwrotny pasujący do ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1089">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-1090">Aby lepiej zrozumieć generowanie adresów URL, Załóżmy, jaki adres URL ma zostać wygenerowany, a następnie pomyśl o sposobie dopasowania szablonu trasy do tego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1090">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="4cedd-1091">Jakie wartości zostałyby wygenerowane?</span><span class="sxs-lookup"><span data-stu-id="4cedd-1091">What values would be produced?</span></span> <span data-ttu-id="4cedd-1092">Jest to sztywny odpowiednik działania generowania adresów URL w <xref:Microsoft.AspNetCore.Routing.Route> klasie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1092">This is the rough equivalent of how URL generation works in the <xref:Microsoft.AspNetCore.Routing.Route> class.</span></span>

<span data-ttu-id="4cedd-1093">Poniższy przykład używa ogólnej trasy domyślnej ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1093">The following example uses a general ASP.NET Core MVC default route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="4cedd-1094">W przypadku wartości `{ controller = Products, action = List }`trasy zostanie wygenerowany adres `/Products/List` URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1094">With the route values `{ controller = Products, action = List }`, the URL `/Products/List` is generated.</span></span> <span data-ttu-id="4cedd-1095">Wartości trasy są zastępowane odpowiednimi parametrami trasy w celu utworzenia ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1095">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="4cedd-1096">Ponieważ `id` jest to opcjonalny parametr trasy, adres URL został pomyślnie wygenerowany bez wartości dla `id`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1096">Since `id` is an optional route parameter, the URL is successfully generated without a value for `id`.</span></span>

<span data-ttu-id="4cedd-1097">W przypadku wartości `{ controller = Home, action = Index }`trasy zostanie wygenerowany adres `/` URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1097">With the route values `{ controller = Home, action = Index }`, the URL `/` is generated.</span></span> <span data-ttu-id="4cedd-1098">Podane wartości trasy są zgodne z wartościami domyślnymi, a segmenty odpowiadające wartościom domyślnym są bezpiecznie pomijane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1098">The provided route values match the default values, and the segments corresponding to the default values are safely omitted.</span></span>

<span data-ttu-id="4cedd-1099">Oba adresy URL wygenerowały rundę z następującą definicją`/Home/Index` trasy `/`(i) tworzą te same wartości trasy, które zostały użyte do wygenerowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1099">Both URLs generated round-trip with the following route definition (`/Home/Index` and `/`) produce the same route values that were used to generate the URL.</span></span>

> [!NOTE]
> <span data-ttu-id="4cedd-1100">Aplikacja używająca ASP.NET Core MVC powinna używać <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> do generowania adresów URL zamiast bezpośredniego wywoływania routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1100">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="4cedd-1101">Aby uzyskać więcej informacji na temat generowania adresów URL, zobacz sekcję [informacje dotyczące generowania adresów URL](#url-generation-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-1101">For more information on URL generation, see the [Url generation reference](#url-generation-reference) section.</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="4cedd-1102">Korzystanie z oprogramowania pośredniczącego routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-1102">Use Routing Middleware</span></span>

<span data-ttu-id="4cedd-1103">Odwołuje się do [pakietu Microsoft. AspNetCore. app](xref:fundamentals/metapackage-app) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1103">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

<span data-ttu-id="4cedd-1104">Dodaj Routing do kontenera usługi w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1104">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

<span data-ttu-id="4cedd-1105">Trasy muszą być skonfigurowane w `Startup.Configure` metodzie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1105">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="4cedd-1106">Przykładowa aplikacja używa następujących interfejsów API:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1106">The sample app uses the following APIs:</span></span>

* <xref:Microsoft.AspNetCore.Routing.RouteBuilder>
* <span data-ttu-id="4cedd-1107"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>&ndash; Dopasowuje tylko żądania HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1107"><xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> &ndash; Matches only HTTP GET requests.</span></span>
* <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

<span data-ttu-id="4cedd-1108">W poniższej tabeli przedstawiono odpowiedzi z podanym identyfikatorem URI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1108">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="4cedd-1109">Identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="4cedd-1109">URI</span></span>                    | <span data-ttu-id="4cedd-1110">Odpowiedź</span><span class="sxs-lookup"><span data-stu-id="4cedd-1110">Response</span></span>                                          |
| ---------------------- | ------------------------------------------------- |
| `/package/create/3`    | <span data-ttu-id="4cedd-1111">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-1111">Hello!</span></span> <span data-ttu-id="4cedd-1112">Wartości trasy: [Operation, Create], [ID, 3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-1112">Route values: [operation, create], [id, 3]</span></span> |
| `/package/track/-3`    | <span data-ttu-id="4cedd-1113">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-1113">Hello!</span></span> <span data-ttu-id="4cedd-1114">Wartości trasy: [Operation, Track], [ID,-3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-1114">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/-3/`   | <span data-ttu-id="4cedd-1115">Cześć!</span><span class="sxs-lookup"><span data-stu-id="4cedd-1115">Hello!</span></span> <span data-ttu-id="4cedd-1116">Wartości trasy: [Operation, Track], [ID,-3]</span><span class="sxs-lookup"><span data-stu-id="4cedd-1116">Route values: [operation, track], [id, -3]</span></span> |
| `/package/track/`      | <span data-ttu-id="4cedd-1117">Żądanie przepada w, brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1117">The request falls through, no match.</span></span>              |
| `GET /hello/Joe`       | <span data-ttu-id="4cedd-1118">Witaj, Jan!</span><span class="sxs-lookup"><span data-stu-id="4cedd-1118">Hi, Joe!</span></span>                                          |
| `POST /hello/Joe`      | <span data-ttu-id="4cedd-1119">Żądanie przepada w, dopasowuje tylko HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1119">The request falls through, matches HTTP GET only.</span></span> |
| `GET /hello/Joe/Smith` | <span data-ttu-id="4cedd-1120">Żądanie przepada w, brak dopasowania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1120">The request falls through, no match.</span></span>              |

<span data-ttu-id="4cedd-1121">W przypadku konfigurowania pojedynczej trasy Wywołaj <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> przekazywanie w wystąpieniu.`IRouter`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1121">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="4cedd-1122">Nie musisz używać <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1122">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="4cedd-1123">Struktura zawiera zestaw metod rozszerzających do tworzenia tras (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span><span class="sxs-lookup"><span data-stu-id="4cedd-1123">The framework provides a set of extension methods for creating routes (<xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions>):</span></span>

* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareDelete*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareGet*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewarePut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapMiddlewareVerb*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPost*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapPut*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>
* <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>

<span data-ttu-id="4cedd-1124">Niektóre z wymienionych metod, takie jak <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, <xref:Microsoft.AspNetCore.Http.RequestDelegate>wymagają.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1124">Some of listed methods, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*>, require a <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="4cedd-1125">Jest używany jako *program obsługi trasy* , gdy trasa pasuje. <xref:Microsoft.AspNetCore.Http.RequestDelegate></span><span class="sxs-lookup"><span data-stu-id="4cedd-1125">The <xref:Microsoft.AspNetCore.Http.RequestDelegate> is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="4cedd-1126">Inne metody w tej rodzinie umożliwiają skonfigurowanie potoku oprogramowania pośredniczącego, które ma być używane jako procedura obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1126">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="4cedd-1127">Jeśli metoda nie akceptuje procedury obsługi, takiej jak <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, używa <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>. `Map*`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1127">If the `Map*` method doesn't accept a handler, such as <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapRoute*>, it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="4cedd-1128">`Map[Verb]` Metody służą do ograniczania trasy do zlecenia HTTP w nazwie metody.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1128">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="4cedd-1129">Na przykład zobacz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> i <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1129">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="4cedd-1130">Odwołanie do szablonu trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-1130">Route template reference</span></span>

<span data-ttu-id="4cedd-1131">Tokeny w nawiasach klamrowych (`{ ... }`) definiują *Parametry trasy* , które są powiązane w przypadku dopasowania trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1131">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="4cedd-1132">Można zdefiniować więcej niż jeden parametr trasy w segmencie trasy, ale muszą one być oddzielone wartością literału.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1132">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="4cedd-1133">Na przykład `{controller=Home}{action=Index}` nie jest prawidłową trasą, ponieważ nie ma wartości literału między `{controller}` i `{action}`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1133">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="4cedd-1134">Te parametry trasy muszą mieć nazwę i mogą mieć określone dodatkowe atrybuty.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1134">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="4cedd-1135">Tekst literału inny niż parametry trasy (na przykład `{id}`) i separator `/` ścieżki muszą być zgodne z tekstem w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1135">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="4cedd-1136">W dopasowaniu do tekstu nie jest rozróżniana wielkość liter i w oparciu o zdekodowaną reprezentację ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1136">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="4cedd-1137">Aby dopasować Ogranicznik parametru`{` trasy literału (lub `}`), należy wprowadzić ogranicznik przez powtórzenie znaku (`{{` lub `}}`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1137">To match a literal route parameter delimiter (`{` or `}`), escape the delimiter by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="4cedd-1138">Wzorce adresów URL, które próbują przechwycić nazwę pliku z opcjonalnym rozszerzeniem pliku, mają dodatkowe uwagi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1138">URL patterns that attempt to capture a file name with an optional file extension have additional considerations.</span></span> <span data-ttu-id="4cedd-1139">Rozważmy na przykład szablon `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1139">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="4cedd-1140">Gdy wartości obu `filename` i `ext` istnieją, są wypełniane obie wartości.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1140">When values for both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="4cedd-1141">Jeśli w adresie URL `filename` znajduje się tylko wartość parametru, trasa pasuje do, ponieważ końcowy okres (`.`) jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1141">If only a value for `filename` exists in the URL, the route matches because the trailing period (`.`) is  optional.</span></span> <span data-ttu-id="4cedd-1142">Następujące adresy URL pasują do tej trasy:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1142">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="4cedd-1143">Możesz użyć gwiazdki (`*`) jako prefiksu do parametru trasy, aby powiązać z resztą identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1143">You can use the asterisk (`*`) as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="4cedd-1144">Jest to nazywane parametrem *"catch-all"* .</span><span class="sxs-lookup"><span data-stu-id="4cedd-1144">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="4cedd-1145">Na przykład `blog/{*slug}` dopasowuje dowolny identyfikator URI, który `/blog` rozpoczyna się od i ma dowolną wartość, `slug` która jest przypisana do wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1145">For example, `blog/{*slug}` matches any URI that starts with `/blog` and has any value following it, which is assigned to the `slug` route value.</span></span> <span data-ttu-id="4cedd-1146">Catch-wszystkie parametry można także dopasować do pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1146">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="4cedd-1147">Parametr catch-all wyprowadza odpowiednie znaki, gdy trasa jest używana do generowania adresu URL, włącznie z separatorami ścieżki (`/`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1147">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="4cedd-1148">Na przykład trasa `foo/{*path}` z wartościami `{ path = "my/path" }` trasy jest generowana `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1148">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="4cedd-1149">Zwróć uwagę na odwrócony ukośnik.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1149">Note the escaped forward slash.</span></span>

<span data-ttu-id="4cedd-1150">Parametry trasy mogą mieć *wartości domyślne* , określając wartość domyślną po nazwie parametru oddzielone znakiem równości (`=`).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1150">Route parameters may have *default values* designated by specifying the default value after the parameter name separated by an equals sign (`=`).</span></span> <span data-ttu-id="4cedd-1151">Na przykład `{controller=Home}` definiuje `Home` jako wartość domyślną dla `controller`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1151">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="4cedd-1152">Wartość domyślna jest używana, jeśli żadna wartość nie jest obecna w adresie URL dla parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1152">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="4cedd-1153">Parametry trasy są opcjonalne przez dołączenie znaku zapytania (`?`) na końcu nazwy parametru, jak w. `id?`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1153">Route parameters are made optional by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="4cedd-1154">Różnica między wartościami opcjonalnymi i domyślnymi parametrami trasy polega na tym, że parametr trasy z wartością domyślną zawsze&mdash;tworzy wartość, a opcjonalny parametr ma wartość tylko wtedy, gdy wartość jest dostarczana przez adres URL żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1154">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value&mdash;an optional parameter has a value only when a value is provided by the request URL.</span></span>

<span data-ttu-id="4cedd-1155">Parametry trasy mogą mieć ograniczenia, które muszą być zgodne z wartością trasy powiązaną z adresem URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1155">Route parameters may have constraints that must match the route value bound from the URL.</span></span> <span data-ttu-id="4cedd-1156">Dodanie dwukropka`:`() i nazwy ograniczenia po nazwie parametru trasy określa *ograniczenie wbudowane* dla parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1156">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="4cedd-1157">Jeśli ograniczenie wymaga argumentów, są one ujęte w nawiasy (`(...)`) po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1157">If the constraint requires arguments, they're enclosed in parentheses (`(...)`) after the constraint name.</span></span> <span data-ttu-id="4cedd-1158">Można określić wiele ograniczeń wbudowanych, dołączając inną dwukropek (`:`) i nazwę ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1158">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span>

<span data-ttu-id="4cedd-1159">Nazwa i argumenty ograniczenia są przekazane do <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> usługi w celu utworzenia <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> wystąpienia do użycia w przetwarzaniu adresów URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1159">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="4cedd-1160">Na przykład szablon `blog/{article:minlength(10)}` trasy `minlength` określa ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1160">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="4cedd-1161">Aby uzyskać więcej informacji na temat ograniczeń trasy i listę ograniczeń zapewnianych przez platformę, zobacz sekcję [odwołanie do ograniczenia trasy](#route-constraint-reference) .</span><span class="sxs-lookup"><span data-stu-id="4cedd-1161">For more information on route constraints and a list of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

<span data-ttu-id="4cedd-1162">W poniższej tabeli przedstawiono przykładowe szablony tras i ich zachowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1162">The following table demonstrates example route templates and their behavior.</span></span>

| <span data-ttu-id="4cedd-1163">Szablon trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-1163">Route Template</span></span>                           | <span data-ttu-id="4cedd-1164">Przykładowy pasujący identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="4cedd-1164">Example Matching URI</span></span>    | <span data-ttu-id="4cedd-1165">Identyfikator URI żądania&hellip;</span><span class="sxs-lookup"><span data-stu-id="4cedd-1165">The request URI&hellip;</span></span>                                                    |
| ---------------------------------------- | ----------------------- | -------------------------------------------------------------------------- |
| `hello`                                  | `/hello`                | <span data-ttu-id="4cedd-1166">Dopasowuje tylko jedną ścieżkę `/hello`.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1166">Only matches the single path `/hello`.</span></span>                                     |
| `{Page=Home}`                            | `/`                     | <span data-ttu-id="4cedd-1167">Dopasowuje i `Page` ustawia `Home`jako.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1167">Matches and sets `Page` to `Home`.</span></span>                                         |
| `{Page=Home}`                            | `/Contact`              | <span data-ttu-id="4cedd-1168">Dopasowuje i `Page` ustawia `Contact`jako.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1168">Matches and sets `Page` to `Contact`.</span></span>                                      |
| `{controller}/{action}/{id?}`            | `/Products/List`        | <span data-ttu-id="4cedd-1169">Mapuje do `Products` kontrolera i `List` akcji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1169">Maps to the `Products` controller and `List` action.</span></span>                       |
| `{controller}/{action}/{id?}`            | `/Products/Details/123` | <span data-ttu-id="4cedd-1170">Mapuje do `Products` kontrolera i `Details` akcji (`id` ustawienie na 123).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1170">Maps to the `Products` controller and  `Details` action (`id` set to 123).</span></span> |
| `{controller=Home}/{action=Index}/{id?}` | `/`                     | <span data-ttu-id="4cedd-1171">Mapuje na `Home` kontroler i `Index` metodę (`id` jest ignorowana).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1171">Maps to the `Home` controller and `Index` method (`id` is ignored).</span></span>        |

<span data-ttu-id="4cedd-1172">Użycie szablonu jest ogólnie najprostszym podejściem do routingu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1172">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="4cedd-1173">Ograniczenia i wartości domyślne można także określić poza szablonem trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1173">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="4cedd-1174">Włącz [Rejestrowanie](xref:fundamentals/logging/index) , aby zobaczyć, jak wbudowane implementacje routingu, takie jak <xref:Microsoft.AspNetCore.Routing.Route>, dopasowują żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1174">Enable [Logging](xref:fundamentals/logging/index) to see how the built-in routing implementations, such as <xref:Microsoft.AspNetCore.Routing.Route>, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="4cedd-1175">Zastrzeżone nazwy routingu</span><span class="sxs-lookup"><span data-stu-id="4cedd-1175">Reserved routing names</span></span>

<span data-ttu-id="4cedd-1176">Następujące słowa kluczowe są nazwami zarezerwowanymi i nie mogą być używane jako nazwy tras lub parametry:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1176">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="4cedd-1177">Odwołanie do ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-1177">Route constraint reference</span></span>

<span data-ttu-id="4cedd-1178">Ograniczenia trasy są wykonywane, gdy nastąpiło dopasowanie do przychodzącego adresu URL, a Ścieżka adresu URL jest zgodna z wartościami trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1178">Route constraints execute when a match has occurred to the incoming URL and the URL path is tokenized into route values.</span></span> <span data-ttu-id="4cedd-1179">Ograniczenia trasy zwykle sprawdzają wartość trasy skojarzoną za pośrednictwem szablonu trasy i podejmują decyzję o tym, czy wartość jest akceptowalna.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1179">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="4cedd-1180">Niektóre ograniczenia trasy używają danych poza wartością trasy, aby uwzględnić, czy żądanie może być kierowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1180">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="4cedd-1181">Na przykład <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> może akceptować lub odrzucać żądanie na podstawie jego zlecenia http.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1181">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span> <span data-ttu-id="4cedd-1182">Ograniczenia są używane w żądaniach routingu i generowania linków.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1182">Constraints are used in routing requests and link generation.</span></span>

> [!WARNING]
> <span data-ttu-id="4cedd-1183">Nie używaj ograniczeń **sprawdzania poprawności danych wejściowych**.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1183">Don't use constraints for **input validation**.</span></span> <span data-ttu-id="4cedd-1184">Jeśli ograniczenia są używane do **sprawdzania poprawności danych wejściowych**, nieprawidłowe dane wejściowe w odpowiedzi *404 — nie znaleziono* , zamiast *żądania 400-złe* z odpowiednim komunikatem o błędzie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1184">If constraints are used for **input validation**, invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="4cedd-1185">Ograniczenia trasy są **używane do** odróżniania podobnych tras, a nie do sprawdzania danych wejściowych dla określonej trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1185">Route constraints are used to **disambiguate** similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="4cedd-1186">W poniższej tabeli przedstawiono przykładowe ograniczenia trasy i ich oczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1186">The following table demonstrates example route constraints and their expected behavior.</span></span>

| <span data-ttu-id="4cedd-1187">ograniczenie</span><span class="sxs-lookup"><span data-stu-id="4cedd-1187">constraint</span></span> | <span data-ttu-id="4cedd-1188">Przykład</span><span class="sxs-lookup"><span data-stu-id="4cedd-1188">Example</span></span> | <span data-ttu-id="4cedd-1189">Przykładowe dopasowania</span><span class="sxs-lookup"><span data-stu-id="4cedd-1189">Example Matches</span></span> | <span data-ttu-id="4cedd-1190">Uwagi</span><span class="sxs-lookup"><span data-stu-id="4cedd-1190">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="4cedd-1191">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1191">`123456789`, `-123456789`</span></span> | <span data-ttu-id="4cedd-1192">Dopasowuje dowolną liczbę całkowitą</span><span class="sxs-lookup"><span data-stu-id="4cedd-1192">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="4cedd-1193">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1193">`true`, `FALSE`</span></span> | <span data-ttu-id="4cedd-1194">`true` Dopasowuje `false` lub (bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1194">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="4cedd-1195">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1195">`2016-12-31`, `2016-12-31 7:32pm`</span></span> | <span data-ttu-id="4cedd-1196">Dopasowuje prawidłową `DateTime` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1196">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="4cedd-1197">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1197">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="4cedd-1198">Dopasowuje prawidłową `decimal` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1198">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="4cedd-1199">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1199">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="4cedd-1200">Dopasowuje prawidłową `double` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1200">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="4cedd-1201">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1201">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="4cedd-1202">Dopasowuje prawidłową `float` wartość (w niezmiennej kulturze — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1202">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="4cedd-1203">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1203">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="4cedd-1204">Dopasowuje prawidłową `Guid` wartość</span><span class="sxs-lookup"><span data-stu-id="4cedd-1204">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="4cedd-1205">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1205">`123456789`, `-123456789`</span></span> | <span data-ttu-id="4cedd-1206">Dopasowuje prawidłową `long` wartość</span><span class="sxs-lookup"><span data-stu-id="4cedd-1206">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="4cedd-1207">Ciąg musi składać się z co najmniej 4 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-1207">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="4cedd-1208">Ciąg nie może zawierać więcej niż 8 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-1208">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="4cedd-1209">Ciąg musi zawierać dokładnie 12 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-1209">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="4cedd-1210">Ciąg musi mieć długość co najmniej 8 znaków</span><span class="sxs-lookup"><span data-stu-id="4cedd-1210">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="4cedd-1211">Wartość całkowita musi być równa co najmniej 18</span><span class="sxs-lookup"><span data-stu-id="4cedd-1211">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="4cedd-1212">Wartość całkowita nie może być większa niż 120</span><span class="sxs-lookup"><span data-stu-id="4cedd-1212">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="4cedd-1213">Wartość całkowita musi być równa co najmniej 18, ale nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="4cedd-1213">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="4cedd-1214">Ciąg musi zawierać co najmniej jeden znak alfabetyczny (`a`-`z`bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1214">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="4cedd-1215">Ciąg musi być zgodny z wyrażeniem regularnym (zobacz Porady dotyczące definiowania wyrażenia regularnego)</span><span class="sxs-lookup"><span data-stu-id="4cedd-1215">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` | <span data-ttu-id="4cedd-1216">Służy do wymuszania, że podczas generowania adresu URL jest obecna wartość, która nie jest wartością parametru</span><span class="sxs-lookup"><span data-stu-id="4cedd-1216">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="4cedd-1217">Wielokrotne ograniczenia rozdzielane średnikami można zastosować do jednego parametru.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1217">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="4cedd-1218">Na przykład następujące ograniczenie ogranicza parametr do wartości całkowitej 1 lub wyższej:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1218">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="4cedd-1219">Ograniczenia trasy, które weryfikują adres URL i są konwertowane na typ CLR (takie `int` jak `DateTime`lub), zawsze używają niezmiennej kultury.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1219">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="4cedd-1220">W tych ograniczeniach przyjęto założenie, że adres URL nie jest Lokalizowalny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1220">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="4cedd-1221">Ograniczenia trasy dostarczone przez platformę nie modyfikują wartości przechowywanych w wartościach trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1221">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="4cedd-1222">Wszystkie wartości tras analizowane na podstawie adresu URL są przechowywane jako ciągi.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1222">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="4cedd-1223">Na przykład, `float` ograniczenie próbuje przekonwertować wartość trasy na float, ale przekonwertowana wartość jest używana tylko do sprawdzenia, czy może być konwertowana na typ float.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1223">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="4cedd-1224">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="4cedd-1224">Regular expressions</span></span>

<span data-ttu-id="4cedd-1225">ASP.NET Core Framework dodaje `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` do konstruktora wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1225">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="4cedd-1226">Aby <xref:System.Text.RegularExpressions.RegexOptions> uzyskać opis tych elementów członkowskich, zobacz.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1226">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="4cedd-1227">Wyrażenia regularne używają ograniczników i tokenów podobnych do tych używanych w ramach routingu i C# języka.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1227">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="4cedd-1228">Tokeny wyrażenia regularnego muszą być zmienione.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1228">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="4cedd-1229">Aby użyć wyrażenia `^\d{3}-\d{2}-\d{4}$` regularnego w routingu, wyrażenie musi `\` mieć (pojedynczy ukośnik odwrotny) podany w ciągu jako `\\` znak (podwójny ukośnik odwrotny) w pliku C# źródłowym w celu ucieczki `\` znak ucieczki ciągu (chyba, że używane są [literały ciągu Verbatim](/dotnet/csharp/language-reference/keywords/string)).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1229">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in routing, the expression must have the `\` (single backslash) characters provided in the string as `\\` (double backslash) characters in the C# source file in order to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string)).</span></span> <span data-ttu-id="4cedd-1230">Na znaki ogranicznika parametru routingu ucieczki (`{`, `}`, `[` `]`,) `[[``{{` ,podwójne`}`znaki w wyrażeniu (,,, ).`]]`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1230">To escape routing parameter delimiter characters (`{`, `}`, `[`, `]`), double the characters in the expression (`{{`, `}`, `[[`, `]]`).</span></span> <span data-ttu-id="4cedd-1231">W poniższej tabeli przedstawiono wyrażenie regularne i wersja z ucieczką.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1231">The following table shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="4cedd-1232">Wyrażenie regularne</span><span class="sxs-lookup"><span data-stu-id="4cedd-1232">Regular Expression</span></span>    | <span data-ttu-id="4cedd-1233">Wyrażenie regularne o zmienionym znaczeniu</span><span class="sxs-lookup"><span data-stu-id="4cedd-1233">Escaped Regular Expression</span></span>     |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="4cedd-1234">Wyrażenia regularne używane w routingu często zaczynają się od znaku`^`daszka () i dopasowują pozycję początkową ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1234">Regular expressions used in routing often start with the caret (`^`) character and match starting position of the string.</span></span> <span data-ttu-id="4cedd-1235">Wyrażenia często kończą się znakiem dolara (`$`) i końcem ciągu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1235">The expressions often end with the dollar sign (`$`) character and match end of the string.</span></span> <span data-ttu-id="4cedd-1236">Znaki `^` i`$` zapewniają, że wyrażenie regularne dopasowuje całą wartość parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1236">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="4cedd-1237">Bez znaków `$` i wyrażenie regularne dopasowuje dowolny podciąg w ciągu, co jest często niepożądane. `^`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1237">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="4cedd-1238">W poniższej tabeli przedstawiono przykłady i wyjaśniono, dlaczego są one zgodne lub niezgodne.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1238">The following table provides examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="4cedd-1239">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="4cedd-1239">Expression</span></span>   | <span data-ttu-id="4cedd-1240">String</span><span class="sxs-lookup"><span data-stu-id="4cedd-1240">String</span></span>    | <span data-ttu-id="4cedd-1241">Dopasowanie</span><span class="sxs-lookup"><span data-stu-id="4cedd-1241">Match</span></span> | <span data-ttu-id="4cedd-1242">Komentarz</span><span class="sxs-lookup"><span data-stu-id="4cedd-1242">Comment</span></span>               |
| ------------ | --------- | :---: |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-1243">Cześć</span><span class="sxs-lookup"><span data-stu-id="4cedd-1243">hello</span></span>     | <span data-ttu-id="4cedd-1244">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-1244">Yes</span></span>   | <span data-ttu-id="4cedd-1245">Dopasowania podciągów</span><span class="sxs-lookup"><span data-stu-id="4cedd-1245">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-1246">123abc456</span><span class="sxs-lookup"><span data-stu-id="4cedd-1246">123abc456</span></span> | <span data-ttu-id="4cedd-1247">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-1247">Yes</span></span>   | <span data-ttu-id="4cedd-1248">Dopasowania podciągów</span><span class="sxs-lookup"><span data-stu-id="4cedd-1248">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-1249">mz</span><span class="sxs-lookup"><span data-stu-id="4cedd-1249">mz</span></span>        | <span data-ttu-id="4cedd-1250">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-1250">Yes</span></span>   | <span data-ttu-id="4cedd-1251">Wyrażenie dopasowania</span><span class="sxs-lookup"><span data-stu-id="4cedd-1251">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="4cedd-1252">MZ</span><span class="sxs-lookup"><span data-stu-id="4cedd-1252">MZ</span></span>        | <span data-ttu-id="4cedd-1253">Tak</span><span class="sxs-lookup"><span data-stu-id="4cedd-1253">Yes</span></span>   | <span data-ttu-id="4cedd-1254">Bez uwzględniania wielkości liter</span><span class="sxs-lookup"><span data-stu-id="4cedd-1254">Not case sensitive</span></span>    |
| `^[a-z]{2}$` | <span data-ttu-id="4cedd-1255">Cześć</span><span class="sxs-lookup"><span data-stu-id="4cedd-1255">hello</span></span>     | <span data-ttu-id="4cedd-1256">Nie</span><span class="sxs-lookup"><span data-stu-id="4cedd-1256">No</span></span>    | <span data-ttu-id="4cedd-1257">Zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="4cedd-1257">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="4cedd-1258">123abc456</span><span class="sxs-lookup"><span data-stu-id="4cedd-1258">123abc456</span></span> | <span data-ttu-id="4cedd-1259">Nie</span><span class="sxs-lookup"><span data-stu-id="4cedd-1259">No</span></span>    | <span data-ttu-id="4cedd-1260">Zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="4cedd-1260">See `^` and `$` above</span></span> |

<span data-ttu-id="4cedd-1261">Aby uzyskać więcej informacji na temat składni wyrażeń regularnych, zobacz [.NET Framework wyrażeń regularnych](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1261">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="4cedd-1262">Aby ograniczyć parametr do znanego zestawu możliwych wartości, użyj wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1262">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="4cedd-1263">`{action:regex(^(list|get|create)$)}` Na przykład `list` `get`dopasowuje wartość `create`trasy do,, lub. `action`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1263">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="4cedd-1264">Jeśli przeszedł do słownika ograniczeń, ciąg `^(list|get|create)$` jest równoważny.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1264">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="4cedd-1265">Ograniczenia, które są przesyłane w słowniku ograniczenia (nie wbudowane w szablon), które nie pasują do jednego ze znanych ograniczeń, są również traktowane jako wyrażenia regularne.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1265">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="custom-route-constraints"></a><span data-ttu-id="4cedd-1266">Niestandardowe ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="4cedd-1266">Custom Route Constraints</span></span>

<span data-ttu-id="4cedd-1267">Oprócz wbudowanych ograniczeń trasy niestandardowe ograniczenia trasy mogą być tworzone przez implementację <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1267">In addition to the built-in route constraints, custom route constraints can be created by implementing the <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface.</span></span> <span data-ttu-id="4cedd-1268">Interfejs zawiera jedną metodę, która zwraca `Match` `true` , jeśli ograniczenie jest spełnione i `false` w przeciwnym razie. <xref:Microsoft.AspNetCore.Routing.IRouteConstraint></span><span class="sxs-lookup"><span data-stu-id="4cedd-1268">The <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> interface contains a single method, `Match`, which returns `true` if the constraint is satisfied and `false` otherwise.</span></span>

<span data-ttu-id="4cedd-1269">Aby użyć niestandardowego <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, typ ograniczenia trasy musi być zarejestrowany <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> w aplikacji w kontenerze usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1269">To use a custom <xref:Microsoft.AspNetCore.Routing.IRouteConstraint>, the route constraint type must be registered with the app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> in the app's service container.</span></span> <span data-ttu-id="4cedd-1270">Jest słownikiem, który mapuje klucze ograniczeń trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> do implementacji, które weryfikują te ograniczenia. <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap></span><span class="sxs-lookup"><span data-stu-id="4cedd-1270">A <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> is a dictionary that maps route constraint keys to <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> implementations that validate those constraints.</span></span> <span data-ttu-id="4cedd-1271">Aplikację <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> można zaktualizować w `Startup.ConfigureServices` ramach [usług. Wywołanie addrouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) lub przez skonfigurowanie <xref:Microsoft.AspNetCore.Routing.RouteOptions> bezpośrednio w `services.Configure<RouteOptions>`usłudze.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1271">An app's <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap> can be updated in `Startup.ConfigureServices` either as part of a [services.AddRouting](xref:Microsoft.Extensions.DependencyInjection.RoutingServiceCollectionExtensions.AddRouting*) call or by configuring <xref:Microsoft.AspNetCore.Routing.RouteOptions> directly with `services.Configure<RouteOptions>`.</span></span> <span data-ttu-id="4cedd-1272">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1272">For example:</span></span>

```csharp
services.AddRouting(options =>
{
    options.ConstraintMap.Add("customName", typeof(MyCustomConstraint));
});
```

<span data-ttu-id="4cedd-1273">Ograniczenie można następnie zastosować do tras w zwykły sposób, przy użyciu nazwy określonej podczas rejestrowania typu ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1273">The constraint can then be applied to routes in the usual manner, using the name specified when registering the constraint type.</span></span> <span data-ttu-id="4cedd-1274">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1274">For example:</span></span>

```csharp
[HttpGet("{id:customName}")]
public ActionResult<string> Get(string id)
```

## <a name="url-generation-reference"></a><span data-ttu-id="4cedd-1275">Odwołanie do generacji adresów URL</span><span class="sxs-lookup"><span data-stu-id="4cedd-1275">URL generation reference</span></span>

<span data-ttu-id="4cedd-1276">Poniższy przykład pokazuje, jak wygenerować link do trasy, używając słownika wartości tras i <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1276">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

<span data-ttu-id="4cedd-1277">Wygenerowano na końcu powyższego `/package/create/123`przykładu. <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath></span><span class="sxs-lookup"><span data-stu-id="4cedd-1277">The <xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath> generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="4cedd-1278">Słownik `operation` zawiera wartości i `id` trasy szablonu "śledzenie trasy `package/{operation}/{id}`pakietu".</span><span class="sxs-lookup"><span data-stu-id="4cedd-1278">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="4cedd-1279">Aby uzyskać szczegółowe informacje, zapoznaj się z przykładowym kodem w sekcji [Używanie oprogramowania pośredniczącego usługi routingu](#use-routing-middleware) lub [przykładowej aplikacji](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="4cedd-1279">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="4cedd-1280">Drugi parametr <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> konstruktora jest kolekcją *wartości otoczenia*.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1280">The second parameter to the <xref:Microsoft.AspNetCore.Routing.VirtualPathContext> constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="4cedd-1281">Wartości otoczenia są wygodne do użycia, ponieważ ograniczają liczbę wartości, które Deweloper musi określić w kontekście żądania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1281">Ambient values are convenient to use because they limit the number of values a developer must specify within a request context.</span></span> <span data-ttu-id="4cedd-1282">Bieżące wartości trasy bieżącego żądania są uznawane za wartości otoczenia dla generacji łącza.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1282">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="4cedd-1283">`About` W akcji `Index` `Home` &mdash;aplikacji ASP.NET Core MVC ,nietrzebaokreślaćwartościtrasykontroleradołączeniazakcją,wktórejjestużywanawartośćotoczenia.`HomeController`</span><span class="sxs-lookup"><span data-stu-id="4cedd-1283">In an ASP.NET Core MVC app's `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="4cedd-1284">Wartości otoczenia, które nie pasują do parametru, są ignorowane.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1284">Ambient values that don't match a parameter are ignored.</span></span> <span data-ttu-id="4cedd-1285">Wartości otoczenia są również ignorowane, gdy jawnie podana wartość przesłania wartość otoczenia.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1285">Ambient values are also ignored when an explicitly provided value overrides the ambient value.</span></span> <span data-ttu-id="4cedd-1286">Dopasowanie występuje od lewej do prawej w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1286">Matching occurs from left to right in the URL.</span></span>

<span data-ttu-id="4cedd-1287">Wartości jawnie podane, ale które nie pasują do segmentu trasy, są dodawane do ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1287">Values explicitly provided but that don't match a segment of the route are added to the query string.</span></span> <span data-ttu-id="4cedd-1288">W poniższej tabeli przedstawiono wynik przy użyciu szablonu `{controller}/{action}/{id?}`trasy.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1288">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="4cedd-1289">Wartości otoczenia</span><span class="sxs-lookup"><span data-stu-id="4cedd-1289">Ambient Values</span></span>                     | <span data-ttu-id="4cedd-1290">Wartości jawne</span><span class="sxs-lookup"><span data-stu-id="4cedd-1290">Explicit Values</span></span>                        | <span data-ttu-id="4cedd-1291">Wynik</span><span class="sxs-lookup"><span data-stu-id="4cedd-1291">Result</span></span>                  |
| ---------------------------------- | -------------------------------------- | ----------------------- |
| <span data-ttu-id="4cedd-1292">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1292">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-1293">Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1293">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="4cedd-1294">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1294">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-1295">Controller = "Order", Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1295">controller = "Order", action = "About"</span></span> | `/Order/About`          |
| <span data-ttu-id="4cedd-1296">Controller = "Home", Color = "Red"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1296">controller = "Home", color = "Red"</span></span> | <span data-ttu-id="4cedd-1297">Action = "informacje"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1297">action = "About"</span></span>                       | `/Home/About`           |
| <span data-ttu-id="4cedd-1298">Controller = "Strona główna"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1298">controller = "Home"</span></span>                | <span data-ttu-id="4cedd-1299">Action = "informacje", Color = "Red"</span><span class="sxs-lookup"><span data-stu-id="4cedd-1299">action = "About", color = "Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="4cedd-1300">Jeśli trasa ma wartość domyślną, która nie odpowiada parametrowi, a ta wartość jest jawnie określona, musi być zgodna z wartością domyślną:</span><span class="sxs-lookup"><span data-stu-id="4cedd-1300">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="4cedd-1301">Generowanie linku generuje tylko łącze do tej trasy, gdy zostaną podane pasujące `action` wartości dla `controller` i.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1301">Link generation only generates a link for this route when the matching values for `controller` and `action` are provided.</span></span>

## <a name="complex-segments"></a><span data-ttu-id="4cedd-1302">Złożone segmenty</span><span class="sxs-lookup"><span data-stu-id="4cedd-1302">Complex segments</span></span>

<span data-ttu-id="4cedd-1303">Złożone segmenty (na `[Route("/x{token}y")]`przykład) są przetwarzane przez dopasowanie literałów z prawej strony do lewej w sposób niezachłanney.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1303">Complex segments (for example `[Route("/x{token}y")]`) are processed by matching up literals from right to left in a non-greedy way.</span></span> <span data-ttu-id="4cedd-1304">[Ten kod](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) zawiera szczegółowy opis sposobu dopasowywania segmentów złożonych.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1304">See [this code](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) for a detailed explanation of how complex segments are matched.</span></span> <span data-ttu-id="4cedd-1305">[Przykład kodu](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) nie jest używany przez ASP.NET Core, ale zapewnia dobre wyjaśnienie złożonych segmentów.</span><span class="sxs-lookup"><span data-stu-id="4cedd-1305">The [code sample](https://github.com/aspnet/AspNetCore/blob/release/2.2/src/Http/Routing/src/Patterns/RoutePatternMatcher.cs#L293) is not used by ASP.NET Core, but it provides a good explanation of complex segments.</span></span>
<!-- While that code is no longer used by ASP.NET Core for complex segment matching, it provides a good match to the current algorithm. The [current code](https://github.com/aspnet/AspNetCore/blob/91514c9af7e0f4c44029b51f05a01c6fe4c96e4c/src/Http/Routing/src/Matching/DfaMatcherBuilder.cs#L227-L244) is too abstracted from matching to be useful for understanding complex segment matching.
-->

::: moniker-end
