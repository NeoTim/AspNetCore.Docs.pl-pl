---
title: Implementacja serwera www HTTP.sys w ASP.NET Core
author: rick-anderson
description: Dowiedz się więcej o HTTP.sys, serwerze sieci web dla ASP.NET Core w systemie Windows. Oparty na sterowniku w trybie jądra HTTP.sys, HTTP.sys jest alternatywą dla Kestrel, który może być używany do bezpośredniego połączenia z Internetem bez usług IIS.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 02/07/2020
uid: fundamentals/servers/httpsys
ms.openlocfilehash: 3e858a974d6a5c008969c3c51a507880cc25a7ff
ms.sourcegitcommit: f7886fd2e219db9d7ce27b16c0dc5901e658d64e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2020
ms.locfileid: "78666923"
---
# <a name="httpsys-web-server-implementation-in-aspnet-core"></a><span data-ttu-id="a8dcf-104">Implementacja serwera www HTTP.sys w ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="a8dcf-104">HTTP.sys web server implementation in ASP.NET Core</span></span>

<span data-ttu-id="a8dcf-105">Przez [Tom Dykstra](https://github.com/tdykstra) i [Chris Ross](https://github.com/Tratcher)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-105">By [Tom Dykstra](https://github.com/tdykstra) and [Chris Ross](https://github.com/Tratcher)</span></span>

::: moniker range=">= aspnetcore-3.1"

<span data-ttu-id="a8dcf-106">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) to [serwer sieci web dla ASP.NET Core,](xref:fundamentals/servers/index) który działa tylko w systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-106">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="a8dcf-107">HTTP.sys jest alternatywą dla serwera [Kestrel](xref:fundamentals/servers/kestrel) i oferuje pewne funkcje, których Kestrel nie zapewnia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-107">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8dcf-108">Protokół HTTP.sys nie jest zgodny z [modułem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) module i nie może być używany z programami IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-108">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-109">Http.sys obsługuje następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-109">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="a8dcf-110">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="a8dcf-110">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="a8dcf-111">Udostępnianie portów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-111">Port sharing</span></span>
* <span data-ttu-id="a8dcf-112">HTTPS z SNI</span><span class="sxs-lookup"><span data-stu-id="a8dcf-112">HTTPS with SNI</span></span>
* <span data-ttu-id="a8dcf-113">Protokół HTTP/2 przez protokół TLS (Windows 10 lub nowszy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-113">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="a8dcf-114">Bezpośrednia transmisja plików</span><span class="sxs-lookup"><span data-stu-id="a8dcf-114">Direct file transmission</span></span>
* <span data-ttu-id="a8dcf-115">Buforowanie odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="a8dcf-115">Response caching</span></span>
* <span data-ttu-id="a8dcf-116">WebSockets (Windows 8 lub nowsze)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-116">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="a8dcf-117">Obsługiwane wersje systemu Windows:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-117">Supported Windows versions:</span></span>

* <span data-ttu-id="a8dcf-118">Windows 7 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-118">Windows 7 or later</span></span>
* <span data-ttu-id="a8dcf-119">Windows Server 2008 R2 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-119">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="a8dcf-120">[Wyświetl lub pobierz przykładowy kod](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([jak pobrać](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="a8dcf-120">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="a8dcf-121">Kiedy używać protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-121">When to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-122">HTTP.sys jest przydatne w przypadku wdrożeń, w których:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-122">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="a8dcf-123">Istnieje potrzeba udostępnienia serwera bezpośrednio do Internetu bez korzystania z usług IIS.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-123">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z Internetem](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="a8dcf-125">Wdrożenie wewnętrzne wymaga funkcji niedostępnej w Kestrel, takiej jak [Uwierzytelnianie systemu Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-125">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z siecią wewnętrzną](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="a8dcf-127">HTTP.sys to dojrzała technologia, która chroni przed wieloma typami ataków i zapewnia niezawodność, bezpieczeństwo i skalowalność w pełni funkcjonowego serwera sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-127">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="a8dcf-128">Usługi IIS działa jako odbiornik HTTP na górze HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-128">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="a8dcf-129">Obsługa protokołu HTTP/2</span><span class="sxs-lookup"><span data-stu-id="a8dcf-129">HTTP/2 support</span></span>

<span data-ttu-id="a8dcf-130">[Protokół HTTP/2](https://httpwg.org/specs/rfc7540.html) jest włączony dla aplikacji ASP.NET Core, jeśli spełnione są następujące wymagania podstawowe:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-130">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="a8dcf-131">Windows Server 2016/Windows 10 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-131">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="a8dcf-132">Połączenie [negocjacji protokołu warstwy aplikacji (ALPN)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-132">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="a8dcf-133">Połączenie TLS 1.2 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-133">TLS 1.2 or later connection</span></span>

<span data-ttu-id="a8dcf-134">Jeśli zostanie nawiązane połączenie HTTP/2, [httpRequest.protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) zgłasza `HTTP/2`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-134">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span>

<span data-ttu-id="a8dcf-135">Protokół HTTP/2 jest domyślnie włączony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-135">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="a8dcf-136">Jeśli połączenie HTTP/2 nie zostanie nawiązane, połączenie powróci do protokołu HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-136">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="a8dcf-137">W przyszłej wersji systemu Windows dostępne będą flagi konfiguracji HTTP/2, w tym możliwość wyłączenia protokołu HTTP/2 za pomocą protokołu HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-137">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="a8dcf-138">Uwierzytelnianie w trybie jądra za pomocą protokołu Kerberos</span><span class="sxs-lookup"><span data-stu-id="a8dcf-138">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="a8dcf-139">Http.sys deleguje do uwierzytelniania w trybie jądra za pomocą protokołu uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-139">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="a8dcf-140">Uwierzytelnianie w trybie użytkownika nie jest obsługiwane w protokołach Kerberos i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-140">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="a8dcf-141">Konto komputera musi służyć do odszyfrowania tokenu/biletu Protokołu Kerberos uzyskanego z usługi Active Directory i przekazanego przez klienta do serwera w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-141">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="a8dcf-142">Zarejestruj nazwę główną usługi (SPN) dla hosta, a nie użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-142">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="a8dcf-143">Jak korzystać z protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-143">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="a8dcf-144">Skonfiguruj aplikację core ASP.NET do używania protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-144">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-145">Wywołanie <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> metody rozszerzenia podczas tworzenia hosta, <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>określając wszelkie wymagane .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-145">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="a8dcf-146">W poniższym przykładzie ustawia się opcje wartości domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-146">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Program.cs?name=snippet1&highlight=5-13)]

<span data-ttu-id="a8dcf-147">Dodatkowa konfiguracja HTTP.sys jest obsługiwana przez [ustawienia rejestru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-147">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="a8dcf-148">**Opcje HTTP.sys**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-148">**HTTP.sys options**</span></span>

| <span data-ttu-id="a8dcf-149">Właściwość</span><span class="sxs-lookup"><span data-stu-id="a8dcf-149">Property</span></span> | <span data-ttu-id="a8dcf-150">Opis</span><span class="sxs-lookup"><span data-stu-id="a8dcf-150">Description</span></span> | <span data-ttu-id="a8dcf-151">Domyślne</span><span class="sxs-lookup"><span data-stu-id="a8dcf-151">Default</span></span> |
| -------- | ----------- | :-----: |
| [<span data-ttu-id="a8dcf-152">AllowSynchronousIO</span><span class="sxs-lookup"><span data-stu-id="a8dcf-152">AllowSynchronousIO</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | <span data-ttu-id="a8dcf-153">Kontrolować, czy synchroniczne wejście/wyjście `HttpContext.Request.Body` jest `HttpContext.Response.Body`dozwolone dla i .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-153">Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span> | `false` |
| [<span data-ttu-id="a8dcf-154">Uwierzytelnianie.AllowAnonymous</span><span class="sxs-lookup"><span data-stu-id="a8dcf-154">Authentication.AllowAnonymous</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | <span data-ttu-id="a8dcf-155">Zezwalaj na żądania anonimowe.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-155">Allow anonymous requests.</span></span> | `true` |
| [<span data-ttu-id="a8dcf-156">Uwierzytelnianie.Schematy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-156">Authentication.Schemes</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | <span data-ttu-id="a8dcf-157">Określ dozwolone schematy uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-157">Specify the allowed authentication schemes.</span></span> <span data-ttu-id="a8dcf-158">Może być modyfikowany w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-158">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="a8dcf-159">Wartości są dostarczane przez [authenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate` `None`, i `NTLM`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-159">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span> | `None` |
| [<span data-ttu-id="a8dcf-160">Włącz Buforowanie reakcji</span><span class="sxs-lookup"><span data-stu-id="a8dcf-160">EnableResponseCaching</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | <span data-ttu-id="a8dcf-161">Spróbuj buforować [w trybie jądra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) dla odpowiedzi z kwalifikującymi się nagłówkami.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-161">Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="a8dcf-162">Odpowiedź może nie `Set-Cookie` `Vary`zawierać `Pragma` , lub nagłówki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-162">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="a8dcf-163">Musi zawierać `Cache-Control` nagłówek, który `public` jest i `shared-max-age` `max-age` albo lub `Expires` wartość lub nagłówka.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-163">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span> | `true` |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | <span data-ttu-id="a8dcf-164">Maksymalna liczba równoczesnych akceptuje.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-164">The maximum number of concurrent accepts.</span></span> | <span data-ttu-id="a8dcf-165">5 &times; [Środowisko.<br> Liczba procesorów](xref:System.Environment.ProcessorCount)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-165">5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | <span data-ttu-id="a8dcf-166">Maksymalna liczba równoczesnych połączeń do zaakceptowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-166">The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="a8dcf-167">Użyj `-1` dla nieskończonych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-167">Use `-1` for infinite.</span></span> <span data-ttu-id="a8dcf-168">Służy `null` do używania ustawienia całego rejestru.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-168">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="a8dcf-169">(w całej maszynie</span><span class="sxs-lookup"><span data-stu-id="a8dcf-169">(machine-wide</span></span><br><span data-ttu-id="a8dcf-170">ustawienia)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-170">setting)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | <span data-ttu-id="a8dcf-171">Zobacz <a href="#maxrequestbodysize">MaxRequestBodySize</a> sekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-171">See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> | <span data-ttu-id="a8dcf-172">3000000 bajtów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-172">30000000 bytes</span></span><br><span data-ttu-id="a8dcf-173">(~28,6 MB)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-173">(~28.6 MB)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | <span data-ttu-id="a8dcf-174">Maksymalna liczba żądań, które mogą być umieszczane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-174">The maximum number of requests that can be queued.</span></span> | <span data-ttu-id="a8dcf-175">1000</span><span class="sxs-lookup"><span data-stu-id="a8dcf-175">1000</span></span> |
| `RequestQueueMode` | <span data-ttu-id="a8dcf-176">Wskazuje to, czy serwer jest odpowiedzialny za tworzenie i konfigurowanie kolejki żądań, czy powinien dołączyć do istniejącej kolejki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-176">This indicates whether the server is responsible for creating and configuring the request queue, or if it should attach to an existing queue.</span></span><br><span data-ttu-id="a8dcf-177">Większość istniejących opcji konfiguracji nie ma zastosowania podczas dołączania do istniejącej kolejki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-177">Most existing configuration options do not apply when attaching to an existing queue.</span></span> | `RequestQueueMode.Create` |
| `RequestQueueName` | <span data-ttu-id="a8dcf-178">Nazwa kolejki żądań HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-178">The name of the HTTP.sys request queue.</span></span> | <span data-ttu-id="a8dcf-179">`null`(Kolejka anonimowa)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-179">`null` (Anonymous queue)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | <span data-ttu-id="a8dcf-180">Wskaż, czy treść odpowiedzi zapisuje, że nie z powodu rozłączenia klienta należy zgłaszać wyjątki lub zakończyć normalnie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-180">Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="a8dcf-181">(normalnie)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-181">(complete normally)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | <span data-ttu-id="a8dcf-182">Uwidacznianie konfiguracji <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> HTTP.sys, która może być również skonfigurowana w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-182">Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="a8dcf-183">Postępuj zgodnie z łączami interfejsu API, aby dowiedzieć się więcej o każdym ustawieniu, w tym wartościach domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-183">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="a8dcf-184">[TimeoutManager.DrainEntityCzasciał dozwolony](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; dla interfejsu API serwera HTTP do opróżnienia treści jednostki w połączeniu Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-184">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="a8dcf-185">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Czas dozwolony dla treści jednostki żądania do przybycia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-185">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="a8dcf-186">[Czas timeoutmanager.headerWit](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; czas dozwolony dla interfejsu API serwera HTTP do analizować nagłówek żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-186">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="a8dcf-187">[Czas połączenia timeoutmanager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; dozwolony dla połączenia bezczynnego.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-187">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="a8dcf-188">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; Minimalna szybkość wysyłania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-188">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; The minimum send rate for the response.</span></span></li><li><span data-ttu-id="a8dcf-189">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Czas dozwolony dla żądania, aby pozostać w kolejce żądań, zanim aplikacja go odbierze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-189">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> |  |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | <span data-ttu-id="a8dcf-190"><xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> Określ, aby zarejestrować się w http.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-190">Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="a8dcf-191">Najbardziej przydatne jest [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), który jest używany do dodawania prefiksu do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-191">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="a8dcf-192">Mogą one zostać zmodyfikowane w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-192">These may be modified at any time prior to disposing the listener.</span></span> |  |

<a name="maxrequestbodysize"></a>

<span data-ttu-id="a8dcf-193">**Rozmiar MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-193">**MaxRequestBodySize**</span></span>

<span data-ttu-id="a8dcf-194">Maksymalny dozwolony rozmiar dowolnego treści żądania w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-194">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="a8dcf-195">Po `null`ustawieniu, maksymalny rozmiar treści żądania jest nieograniczony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-195">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="a8dcf-196">Ten limit nie ma wpływu na uaktualnione połączenia, które są zawsze nieograniczone.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-196">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="a8dcf-197">Zalecaną metodą zastąpienia limitu w ASP.NET podstawowej aplikacji MVC `IActionResult` dla pojedynczej <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> jest użycie atrybutu w metodzie akcji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-197">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="a8dcf-198">Wyjątek jest zgłaszany, jeśli aplikacja próbuje skonfigurować limit żądania po aplikacji rozpoczął odczytywanie żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-198">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="a8dcf-199">Właściwości `IsReadOnly` można użyć do wskazania, czy `MaxRequestBodySize` właściwość jest w stanie tylko do odczytu, co oznacza, że jest za późno, aby skonfigurować limit.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-199">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="a8dcf-200">Jeśli aplikacja powinna zastąpić <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> na żądanie, <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>użyj:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-200">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="a8dcf-201">Jeśli używasz programu Visual Studio, upewnij się, że aplikacja nie jest skonfigurowana do uruchamiania usługi IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-201">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-202">W programie Visual Studio domyślny profil uruchamiania jest dla usługi IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-202">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="a8dcf-203">Aby uruchomić projekt jako aplikację konsoli, ręcznie zmień wybrany profil, jak pokazano na poniższym zstrząśnięciu z ekranu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-203">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Wybieranie profilu aplikacji konsoli](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="a8dcf-205">Konfigurowanie systemu Windows Server</span><span class="sxs-lookup"><span data-stu-id="a8dcf-205">Configure Windows Server</span></span>

1. <span data-ttu-id="a8dcf-206">Określ porty do otwarcia aplikacji i użyj [Zapory systemu Windows](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) lub polecenia cmdlet [Programu New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell, aby otworzyć porty zapory, aby umożliwić ruchowi dostęp do pliku HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-206">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="a8dcf-207">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-207">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-208">Podczas wdrażania na maszynie wirtualnej platformy Azure otwórz porty w [sieciowej grupie zabezpieczeń](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-208">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="a8dcf-209">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-209">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-210">W razie potrzeby uzyskaj i zainstaluj certyfikaty X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-210">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="a8dcf-211">W systemie Windows utwórz certyfikaty z podpisem własnym przy użyciu [polecenia cmdlet Programu PowerShell new-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-211">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="a8dcf-212">Aby zapoznać się z nieobsługiwionym przykładem, zobacz [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-212">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="a8dcf-213">Zainstaluj certyfikaty z podpisem własnym lub certyfikatem urzędu certyfikacji w magazynie **Local Machine** > **Personal** serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-213">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="a8dcf-214">Jeśli aplikacja jest [wdrożeniem zależnym od struktury,](/dotnet/core/deploying/#framework-dependent-deployments-fdd)zainstaluj .NET Core, .NET Framework lub oba (jeśli aplikacja jest aplikacją .NET Core kierowaną na platformę .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-214">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="a8dcf-215">**.NET Core** &ndash; Jeśli aplikacja wymaga programu .NET Core, należy uzyskać i uruchomić instalator **.NET Core Runtime** z programu [.NET Core Downloads](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-215">**.NET Core** &ndash; If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="a8dcf-216">Nie instaluj pełnego pakietu SDK na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-216">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="a8dcf-217">**Program .NET Framework** &ndash; Jeśli aplikacja wymaga programu .NET Framework, zobacz [przewodnik po instalacji programu .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-217">**.NET Framework** &ndash; If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="a8dcf-218">Zainstaluj wymaganą platformę .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-218">Install the required .NET Framework.</span></span> <span data-ttu-id="a8dcf-219">Instalator najnowszej platformy .NET Framework jest dostępny na stronie [Pliki do pobrania .NET Core.](https://dotnet.microsoft.com/download)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-219">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="a8dcf-220">Jeśli aplikacja jest [samodzielnym wdrożeniem,](/dotnet/core/deploying/#self-contained-deployments-scd)aplikacja zawiera środowisko wykonawcze w swoim wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-220">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="a8dcf-221">Na serwerze nie jest wymagana żadna instalacja struktury.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-221">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="a8dcf-222">Skonfiguruj adresy URL i porty w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-222">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="a8dcf-223">Domyślnie ASP.NET Core wiąże się `http://localhost:5000`z programem .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-223">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="a8dcf-224">Aby skonfigurować prefiksy i porty adresów URL, dostępne są następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-224">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="a8dcf-225">`urls`argument wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-225">`urls` command-line argument</span></span>
   * <span data-ttu-id="a8dcf-226">`ASPNETCORE_URLS`zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a8dcf-226">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="a8dcf-227">Poniższy przykład kodu pokazuje, jak używać <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> z `10.0.0.4` lokalnym adresem IP serwera na porcie 443:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-227">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/3.x/Program.cs?highlight=7)]

   <span data-ttu-id="a8dcf-228">Zaletą `UrlPrefixes` jest to, że komunikat o błędzie jest generowany natychmiast dla nieprawidłowo sformatowanych prefiksów.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-228">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="a8dcf-229">Ustawienia w `UrlPrefixes` ustawieniach `UseUrls` / `urls` / `ASPNETCORE_URLS` zastępowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-229">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="a8dcf-230">W związku z `UseUrls`tym `urls`zaletą `ASPNETCORE_URLS` , i zmienną środowiskową jest to, że łatwiej jest przełączać się między Kestrel i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-230">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="a8dcf-231">Http.sys używa [formatów ciągów URLPrefix interfejsu API serwera HTTP](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-231">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="a8dcf-232">Wiązania wieloznaczne najwyższego`http://*:80/` `http://+:80`poziomu ( i ) **nie** powinny być używane.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-232">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="a8dcf-233">Powiązania symboli wieloznacznych najwyższego poziomu tworzą luki w zabezpieczeniach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-233">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="a8dcf-234">Dotyczy to zarówno silnych, jak i słabych symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-234">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="a8dcf-235">Użyj jawnych nazw hostów lub adresów IP, a nie symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-235">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="a8dcf-236">Powiązanie symboli wieloznacznych `*.mysub.com`poddomeny (na przykład) nie stanowi zagrożenia dla `*.com`bezpieczeństwa, jeśli kontrolujesz całą domenę nadrzędną (w przeciwieństwie do , która jest narażona).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-236">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="a8dcf-237">Aby uzyskać więcej informacji, zobacz [RFC 7230: Sekcja 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-237">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="a8dcf-238">Preregister prefiksy adresów URL na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-238">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="a8dcf-239">Wbudowanym narzędziem do konfigurowania pliku HTTP.sys jest *plik netsh.exe*.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-239">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="a8dcf-240">*netsh.exe* służy do rezerwowania prefiksów adresów URL i przypisywania certyfikatów X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-240">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="a8dcf-241">Narzędzie wymaga uprawnień administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-241">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-242">Użyj narzędzia *netsh.exe,* aby zarejestrować adresy URL aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-242">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="a8dcf-243">`<URL>`&ndash; W pełni kwalifikowany jednolity lokalizator zasobów (URL).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-243">`<URL>` &ndash; The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="a8dcf-244">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-244">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-245">Użyj prawidłowej nazwy hosta lub lokalnego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-245">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="a8dcf-246">*Adres URL musi zawierać końcowe ukośnik.*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-246">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="a8dcf-247">`<USER>`&ndash; Określa nazwę użytkownika lub grupy użytkowników.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-247">`<USER>` &ndash; Specifies the user or user-group name.</span></span>

   <span data-ttu-id="a8dcf-248">W poniższym przykładzie lokalny adres IP `10.0.0.4`serwera to:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-248">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="a8dcf-249">Gdy adres URL jest zarejestrowany, `URL reservation successfully added`narzędzie odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-249">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="a8dcf-250">Aby usunąć zarejestrowany adres `delete urlacl` URL, użyj polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-250">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="a8dcf-251">Zarejestruj certyfikaty X.509 na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-251">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="a8dcf-252">Użyj narzędzia *netsh.exe,* aby zarejestrować certyfikaty dla aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-252">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="a8dcf-253">`<IP>`&ndash; Określa lokalny adres IP powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-253">`<IP>` &ndash; Specifies the local IP address for the binding.</span></span> <span data-ttu-id="a8dcf-254">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-254">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-255">Użyj prawidłowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-255">Use a valid IP address.</span></span>
   * <span data-ttu-id="a8dcf-256">`<PORT>`&ndash; Określa port powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-256">`<PORT>` &ndash; Specifies the port for the binding.</span></span>
   * <span data-ttu-id="a8dcf-257">`<THUMBPRINT>`&ndash; Odcisk palca certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-257">`<THUMBPRINT>` &ndash; The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="a8dcf-258">`<GUID>`&ndash; Identyfikator GUID wygenerowany przez dewelopera do reprezentowania aplikacji w celach informacyjnych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-258">`<GUID>` &ndash; A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="a8dcf-259">W celach informacyjnych należy przechowywać identyfikator GUID w aplikacji jako tag pakietu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-259">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="a8dcf-260">W programie Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-260">In Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-261">Otwórz właściwości projektu aplikacji, klikając prawym przyciskiem myszy aplikację w **Eksploratorze rozwiązań** i wybierając pozycję **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-261">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="a8dcf-262">Wybierz kartę **Pakiet.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-262">Select the **Package** tab.</span></span>
     * <span data-ttu-id="a8dcf-263">Wprowadź identyfikator GUID utworzony w polu **Znaczniki.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-263">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="a8dcf-264">Jeśli nie jest używany program Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-264">When not using Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-265">Otwórz plik projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-265">Open the app's project file.</span></span>
     * <span data-ttu-id="a8dcf-266">Dodaj `<PackageTags>` właściwość do nowej `<PropertyGroup>` lub istniejącej z utworzonym identyfikatorem GUID:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-266">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="a8dcf-267">W poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-267">In the following example:</span></span>

   * <span data-ttu-id="a8dcf-268">Lokalny adres IP serwera `10.0.0.4`to .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-268">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="a8dcf-269">Generator identyfikatorów GUID `appid` online zapewnia wartość.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-269">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="a8dcf-270">Gdy certyfikat jest zarejestrowany, narzędzie `SSL Certificate successfully added`odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-270">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="a8dcf-271">Aby usunąć rejestrację certyfikatu, użyj `delete sslcert` polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-271">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="a8dcf-272">Dokumentacja referencyjna dla *netsh.exe:*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-272">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="a8dcf-273">Polecenia Netsh dla protokołu transferu hipertekstowego (HTTP)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-273">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="a8dcf-274">Ciągi UrlPrefix</span><span class="sxs-lookup"><span data-stu-id="a8dcf-274">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="a8dcf-275">Uruchom aplikację.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-275">Run the app.</span></span>

   <span data-ttu-id="a8dcf-276">Uprawnienia administratora nie są wymagane do uruchamiania aplikacji podczas powiązania z localhost przy użyciu protokołu HTTP (nie HTTPS) z numerem portu większym niż 1024.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-276">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="a8dcf-277">W przypadku innych konfiguracji (na przykład przy użyciu lokalnego adresu IP lub powiązania z portem 443) uruchom aplikację z uprawnieniami administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-277">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-278">Aplikacja odpowiada na publiczny adres IP serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-278">The app responds at the server's public IP address.</span></span> <span data-ttu-id="a8dcf-279">W tym przykładzie serwer jest osiągany z Internetu `104.214.79.47`pod jego publicznym adresem IP .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-279">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="a8dcf-280">Certyfikat dewelopera jest używany w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-280">A development certificate is used in this example.</span></span> <span data-ttu-id="a8dcf-281">Strona ładuje się bezpiecznie po pominięciu ostrzeżenia o niezaufanym certyfikacie przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-281">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno przeglądarki z załadowaną stroną Indeks aplikacji](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="a8dcf-283">Scenariusze serwera proxy i modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-283">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="a8dcf-284">W przypadku aplikacji obsługiwanych przez http.sys, które współdziałają z żądaniami z Internetu lub sieci firmowej, dodatkowa konfiguracja może być wymagana podczas hostowania za serwerami proxy i modułami równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-284">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="a8dcf-285">Aby uzyskać więcej informacji, zobacz [Konfigurowanie ASP.NET Core do pracy z serwerami proxy i modułami równoważenia obciążenia](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-285">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a8dcf-286">Zasoby dodatkowe</span><span class="sxs-lookup"><span data-stu-id="a8dcf-286">Additional resources</span></span>

* [<span data-ttu-id="a8dcf-287">Włączanie uwierzytelniania systemu Windows za pomocą protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-287">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="a8dcf-288">Interfejs API serwera HTTP</span><span class="sxs-lookup"><span data-stu-id="a8dcf-288">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="a8dcf-289">repozytorium aspnet/HttpSysServer GitHub (kod źródłowy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-289">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="a8dcf-290">Host</span><span class="sxs-lookup"><span data-stu-id="a8dcf-290">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end

::: moniker range="= aspnetcore-3.0"

<span data-ttu-id="a8dcf-291">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) to [serwer sieci web dla ASP.NET Core,](xref:fundamentals/servers/index) który działa tylko w systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-291">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="a8dcf-292">HTTP.sys jest alternatywą dla serwera [Kestrel](xref:fundamentals/servers/kestrel) i oferuje pewne funkcje, których Kestrel nie zapewnia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-292">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8dcf-293">Protokół HTTP.sys nie jest zgodny z [modułem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) module i nie może być używany z programami IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-293">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-294">Http.sys obsługuje następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-294">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="a8dcf-295">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="a8dcf-295">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="a8dcf-296">Udostępnianie portów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-296">Port sharing</span></span>
* <span data-ttu-id="a8dcf-297">HTTPS z SNI</span><span class="sxs-lookup"><span data-stu-id="a8dcf-297">HTTPS with SNI</span></span>
* <span data-ttu-id="a8dcf-298">Protokół HTTP/2 przez protokół TLS (Windows 10 lub nowszy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-298">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="a8dcf-299">Bezpośrednia transmisja plików</span><span class="sxs-lookup"><span data-stu-id="a8dcf-299">Direct file transmission</span></span>
* <span data-ttu-id="a8dcf-300">Buforowanie odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="a8dcf-300">Response caching</span></span>
* <span data-ttu-id="a8dcf-301">WebSockets (Windows 8 lub nowsze)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-301">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="a8dcf-302">Obsługiwane wersje systemu Windows:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-302">Supported Windows versions:</span></span>

* <span data-ttu-id="a8dcf-303">Windows 7 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-303">Windows 7 or later</span></span>
* <span data-ttu-id="a8dcf-304">Windows Server 2008 R2 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-304">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="a8dcf-305">[Wyświetl lub pobierz przykładowy kod](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([jak pobrać](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="a8dcf-305">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="a8dcf-306">Kiedy używać protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-306">When to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-307">HTTP.sys jest przydatne w przypadku wdrożeń, w których:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-307">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="a8dcf-308">Istnieje potrzeba udostępnienia serwera bezpośrednio do Internetu bez korzystania z usług IIS.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-308">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z Internetem](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="a8dcf-310">Wdrożenie wewnętrzne wymaga funkcji niedostępnej w Kestrel, takiej jak [Uwierzytelnianie systemu Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-310">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z siecią wewnętrzną](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="a8dcf-312">HTTP.sys to dojrzała technologia, która chroni przed wieloma typami ataków i zapewnia niezawodność, bezpieczeństwo i skalowalność w pełni funkcjonowego serwera sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-312">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="a8dcf-313">Usługi IIS działa jako odbiornik HTTP na górze HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-313">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="a8dcf-314">Obsługa protokołu HTTP/2</span><span class="sxs-lookup"><span data-stu-id="a8dcf-314">HTTP/2 support</span></span>

<span data-ttu-id="a8dcf-315">[Protokół HTTP/2](https://httpwg.org/specs/rfc7540.html) jest włączony dla aplikacji ASP.NET Core, jeśli spełnione są następujące wymagania podstawowe:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-315">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="a8dcf-316">Windows Server 2016/Windows 10 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-316">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="a8dcf-317">Połączenie [negocjacji protokołu warstwy aplikacji (ALPN)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-317">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="a8dcf-318">Połączenie TLS 1.2 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-318">TLS 1.2 or later connection</span></span>

<span data-ttu-id="a8dcf-319">Jeśli zostanie nawiązane połączenie HTTP/2, [httpRequest.protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) zgłasza `HTTP/2`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-319">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span>

<span data-ttu-id="a8dcf-320">Protokół HTTP/2 jest domyślnie włączony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-320">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="a8dcf-321">Jeśli połączenie HTTP/2 nie zostanie nawiązane, połączenie powróci do protokołu HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-321">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="a8dcf-322">W przyszłej wersji systemu Windows dostępne będą flagi konfiguracji HTTP/2, w tym możliwość wyłączenia protokołu HTTP/2 za pomocą protokołu HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-322">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="a8dcf-323">Uwierzytelnianie w trybie jądra za pomocą protokołu Kerberos</span><span class="sxs-lookup"><span data-stu-id="a8dcf-323">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="a8dcf-324">Http.sys deleguje do uwierzytelniania w trybie jądra za pomocą protokołu uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-324">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="a8dcf-325">Uwierzytelnianie w trybie użytkownika nie jest obsługiwane w protokołach Kerberos i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-325">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="a8dcf-326">Konto komputera musi służyć do odszyfrowania tokenu/biletu Protokołu Kerberos uzyskanego z usługi Active Directory i przekazanego przez klienta do serwera w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-326">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="a8dcf-327">Zarejestruj nazwę główną usługi (SPN) dla hosta, a nie użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-327">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="a8dcf-328">Jak korzystać z protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-328">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="a8dcf-329">Skonfiguruj aplikację core ASP.NET do używania protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-329">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-330">Wywołanie <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> metody rozszerzenia podczas tworzenia hosta, <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>określając wszelkie wymagane .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-330">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="a8dcf-331">W poniższym przykładzie ustawia się opcje wartości domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-331">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Program.cs?name=snippet1&highlight=5-13)]

<span data-ttu-id="a8dcf-332">Dodatkowa konfiguracja HTTP.sys jest obsługiwana przez [ustawienia rejestru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-332">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="a8dcf-333">**Opcje HTTP.sys**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-333">**HTTP.sys options**</span></span>

| <span data-ttu-id="a8dcf-334">Właściwość</span><span class="sxs-lookup"><span data-stu-id="a8dcf-334">Property</span></span> | <span data-ttu-id="a8dcf-335">Opis</span><span class="sxs-lookup"><span data-stu-id="a8dcf-335">Description</span></span> | <span data-ttu-id="a8dcf-336">Domyślne</span><span class="sxs-lookup"><span data-stu-id="a8dcf-336">Default</span></span> |
| -------- | ----------- | :-----: |
| [<span data-ttu-id="a8dcf-337">AllowSynchronousIO</span><span class="sxs-lookup"><span data-stu-id="a8dcf-337">AllowSynchronousIO</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | <span data-ttu-id="a8dcf-338">Kontrolować, czy synchroniczne wejście/wyjście `HttpContext.Request.Body` jest `HttpContext.Response.Body`dozwolone dla i .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-338">Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span> | `false` |
| [<span data-ttu-id="a8dcf-339">Uwierzytelnianie.AllowAnonymous</span><span class="sxs-lookup"><span data-stu-id="a8dcf-339">Authentication.AllowAnonymous</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | <span data-ttu-id="a8dcf-340">Zezwalaj na żądania anonimowe.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-340">Allow anonymous requests.</span></span> | `true` |
| [<span data-ttu-id="a8dcf-341">Uwierzytelnianie.Schematy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-341">Authentication.Schemes</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | <span data-ttu-id="a8dcf-342">Określ dozwolone schematy uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-342">Specify the allowed authentication schemes.</span></span> <span data-ttu-id="a8dcf-343">Może być modyfikowany w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-343">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="a8dcf-344">Wartości są dostarczane przez [authenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate` `None`, i `NTLM`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-344">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span> | `None` |
| [<span data-ttu-id="a8dcf-345">Włącz Buforowanie reakcji</span><span class="sxs-lookup"><span data-stu-id="a8dcf-345">EnableResponseCaching</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | <span data-ttu-id="a8dcf-346">Spróbuj buforować [w trybie jądra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) dla odpowiedzi z kwalifikującymi się nagłówkami.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-346">Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="a8dcf-347">Odpowiedź może nie `Set-Cookie` `Vary`zawierać `Pragma` , lub nagłówki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-347">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="a8dcf-348">Musi zawierać `Cache-Control` nagłówek, który `public` jest i `shared-max-age` `max-age` albo lub `Expires` wartość lub nagłówka.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-348">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span> | `true` |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | <span data-ttu-id="a8dcf-349">Maksymalna liczba równoczesnych akceptuje.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-349">The maximum number of concurrent accepts.</span></span> | <span data-ttu-id="a8dcf-350">5 &times; [Środowisko.<br> Liczba procesorów](xref:System.Environment.ProcessorCount)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-350">5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | <span data-ttu-id="a8dcf-351">Maksymalna liczba równoczesnych połączeń do zaakceptowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-351">The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="a8dcf-352">Użyj `-1` dla nieskończonych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-352">Use `-1` for infinite.</span></span> <span data-ttu-id="a8dcf-353">Służy `null` do używania ustawienia całego rejestru.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-353">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="a8dcf-354">(w całej maszynie</span><span class="sxs-lookup"><span data-stu-id="a8dcf-354">(machine-wide</span></span><br><span data-ttu-id="a8dcf-355">ustawienia)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-355">setting)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | <span data-ttu-id="a8dcf-356">Zobacz <a href="#maxrequestbodysize">MaxRequestBodySize</a> sekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-356">See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> | <span data-ttu-id="a8dcf-357">3000000 bajtów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-357">30000000 bytes</span></span><br><span data-ttu-id="a8dcf-358">(~28,6 MB)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-358">(~28.6 MB)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | <span data-ttu-id="a8dcf-359">Maksymalna liczba żądań, które mogą być umieszczane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-359">The maximum number of requests that can be queued.</span></span> | <span data-ttu-id="a8dcf-360">1000</span><span class="sxs-lookup"><span data-stu-id="a8dcf-360">1000</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | <span data-ttu-id="a8dcf-361">Wskaż, czy treść odpowiedzi zapisuje, że nie z powodu rozłączenia klienta należy zgłaszać wyjątki lub zakończyć normalnie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-361">Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="a8dcf-362">(normalnie)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-362">(complete normally)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | <span data-ttu-id="a8dcf-363">Uwidacznianie konfiguracji <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> HTTP.sys, która może być również skonfigurowana w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-363">Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="a8dcf-364">Postępuj zgodnie z łączami interfejsu API, aby dowiedzieć się więcej o każdym ustawieniu, w tym wartościach domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-364">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="a8dcf-365">[TimeoutManager.DrainEntityCzasciał dozwolony](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; dla interfejsu API serwera HTTP do opróżnienia treści jednostki w połączeniu Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-365">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="a8dcf-366">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Czas dozwolony dla treści jednostki żądania do przybycia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-366">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="a8dcf-367">[Czas timeoutmanager.headerWit](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; czas dozwolony dla interfejsu API serwera HTTP do analizować nagłówek żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-367">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="a8dcf-368">[Czas połączenia timeoutmanager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; dozwolony dla połączenia bezczynnego.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-368">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="a8dcf-369">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; Minimalna szybkość wysyłania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-369">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; The minimum send rate for the response.</span></span></li><li><span data-ttu-id="a8dcf-370">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Czas dozwolony dla żądania, aby pozostać w kolejce żądań, zanim aplikacja go odbierze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-370">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> |  |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | <span data-ttu-id="a8dcf-371"><xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> Określ, aby zarejestrować się w http.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-371">Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="a8dcf-372">Najbardziej przydatne jest [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), który jest używany do dodawania prefiksu do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-372">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="a8dcf-373">Mogą one zostać zmodyfikowane w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-373">These may be modified at any time prior to disposing the listener.</span></span> |  |

<a name="maxrequestbodysize"></a>

<span data-ttu-id="a8dcf-374">**Rozmiar MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-374">**MaxRequestBodySize**</span></span>

<span data-ttu-id="a8dcf-375">Maksymalny dozwolony rozmiar dowolnego treści żądania w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-375">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="a8dcf-376">Po `null`ustawieniu, maksymalny rozmiar treści żądania jest nieograniczony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-376">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="a8dcf-377">Ten limit nie ma wpływu na uaktualnione połączenia, które są zawsze nieograniczone.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-377">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="a8dcf-378">Zalecaną metodą zastąpienia limitu w ASP.NET podstawowej aplikacji MVC `IActionResult` dla pojedynczej <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> jest użycie atrybutu w metodzie akcji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-378">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="a8dcf-379">Wyjątek jest zgłaszany, jeśli aplikacja próbuje skonfigurować limit żądania po aplikacji rozpoczął odczytywanie żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-379">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="a8dcf-380">Właściwości `IsReadOnly` można użyć do wskazania, czy `MaxRequestBodySize` właściwość jest w stanie tylko do odczytu, co oznacza, że jest za późno, aby skonfigurować limit.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-380">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="a8dcf-381">Jeśli aplikacja powinna zastąpić <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> na żądanie, <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>użyj:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-381">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/3.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="a8dcf-382">Jeśli używasz programu Visual Studio, upewnij się, że aplikacja nie jest skonfigurowana do uruchamiania usługi IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-382">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-383">W programie Visual Studio domyślny profil uruchamiania jest dla usługi IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-383">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="a8dcf-384">Aby uruchomić projekt jako aplikację konsoli, ręcznie zmień wybrany profil, jak pokazano na poniższym zstrząśnięciu z ekranu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-384">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Wybieranie profilu aplikacji konsoli](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="a8dcf-386">Konfigurowanie systemu Windows Server</span><span class="sxs-lookup"><span data-stu-id="a8dcf-386">Configure Windows Server</span></span>

1. <span data-ttu-id="a8dcf-387">Określ porty do otwarcia aplikacji i użyj [Zapory systemu Windows](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) lub polecenia cmdlet [Programu New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell, aby otworzyć porty zapory, aby umożliwić ruchowi dostęp do pliku HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-387">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="a8dcf-388">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-388">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-389">Podczas wdrażania na maszynie wirtualnej platformy Azure otwórz porty w [sieciowej grupie zabezpieczeń](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-389">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="a8dcf-390">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-390">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-391">W razie potrzeby uzyskaj i zainstaluj certyfikaty X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-391">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="a8dcf-392">W systemie Windows utwórz certyfikaty z podpisem własnym przy użyciu [polecenia cmdlet Programu PowerShell new-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-392">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="a8dcf-393">Aby zapoznać się z nieobsługiwionym przykładem, zobacz [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-393">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="a8dcf-394">Zainstaluj certyfikaty z podpisem własnym lub certyfikatem urzędu certyfikacji w magazynie **Local Machine** > **Personal** serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-394">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="a8dcf-395">Jeśli aplikacja jest [wdrożeniem zależnym od struktury,](/dotnet/core/deploying/#framework-dependent-deployments-fdd)zainstaluj .NET Core, .NET Framework lub oba (jeśli aplikacja jest aplikacją .NET Core kierowaną na platformę .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-395">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="a8dcf-396">**.NET Core** &ndash; Jeśli aplikacja wymaga programu .NET Core, należy uzyskać i uruchomić instalator **.NET Core Runtime** z programu [.NET Core Downloads](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-396">**.NET Core** &ndash; If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="a8dcf-397">Nie instaluj pełnego pakietu SDK na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-397">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="a8dcf-398">**Program .NET Framework** &ndash; Jeśli aplikacja wymaga programu .NET Framework, zobacz [przewodnik po instalacji programu .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-398">**.NET Framework** &ndash; If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="a8dcf-399">Zainstaluj wymaganą platformę .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-399">Install the required .NET Framework.</span></span> <span data-ttu-id="a8dcf-400">Instalator najnowszej platformy .NET Framework jest dostępny na stronie [Pliki do pobrania .NET Core.](https://dotnet.microsoft.com/download)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-400">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="a8dcf-401">Jeśli aplikacja jest [samodzielnym wdrożeniem,](/dotnet/core/deploying/#self-contained-deployments-scd)aplikacja zawiera środowisko wykonawcze w swoim wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-401">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="a8dcf-402">Na serwerze nie jest wymagana żadna instalacja struktury.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-402">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="a8dcf-403">Skonfiguruj adresy URL i porty w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-403">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="a8dcf-404">Domyślnie ASP.NET Core wiąże się `http://localhost:5000`z programem .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-404">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="a8dcf-405">Aby skonfigurować prefiksy i porty adresów URL, dostępne są następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-405">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="a8dcf-406">`urls`argument wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-406">`urls` command-line argument</span></span>
   * <span data-ttu-id="a8dcf-407">`ASPNETCORE_URLS`zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a8dcf-407">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="a8dcf-408">Poniższy przykład kodu pokazuje, jak używać <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> z `10.0.0.4` lokalnym adresem IP serwera na porcie 443:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-408">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/3.x/Program.cs?highlight=7)]

   <span data-ttu-id="a8dcf-409">Zaletą `UrlPrefixes` jest to, że komunikat o błędzie jest generowany natychmiast dla nieprawidłowo sformatowanych prefiksów.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-409">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="a8dcf-410">Ustawienia w `UrlPrefixes` ustawieniach `UseUrls` / `urls` / `ASPNETCORE_URLS` zastępowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-410">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="a8dcf-411">W związku z `UseUrls`tym `urls`zaletą `ASPNETCORE_URLS` , i zmienną środowiskową jest to, że łatwiej jest przełączać się między Kestrel i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-411">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="a8dcf-412">Http.sys używa [formatów ciągów URLPrefix interfejsu API serwera HTTP](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-412">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="a8dcf-413">Wiązania wieloznaczne najwyższego`http://*:80/` `http://+:80`poziomu ( i ) **nie** powinny być używane.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-413">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="a8dcf-414">Powiązania symboli wieloznacznych najwyższego poziomu tworzą luki w zabezpieczeniach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-414">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="a8dcf-415">Dotyczy to zarówno silnych, jak i słabych symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-415">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="a8dcf-416">Użyj jawnych nazw hostów lub adresów IP, a nie symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-416">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="a8dcf-417">Powiązanie symboli wieloznacznych `*.mysub.com`poddomeny (na przykład) nie stanowi zagrożenia dla `*.com`bezpieczeństwa, jeśli kontrolujesz całą domenę nadrzędną (w przeciwieństwie do , która jest narażona).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-417">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="a8dcf-418">Aby uzyskać więcej informacji, zobacz [RFC 7230: Sekcja 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-418">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="a8dcf-419">Preregister prefiksy adresów URL na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-419">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="a8dcf-420">Wbudowanym narzędziem do konfigurowania pliku HTTP.sys jest *plik netsh.exe*.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-420">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="a8dcf-421">*netsh.exe* służy do rezerwowania prefiksów adresów URL i przypisywania certyfikatów X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-421">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="a8dcf-422">Narzędzie wymaga uprawnień administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-422">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-423">Użyj narzędzia *netsh.exe,* aby zarejestrować adresy URL aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-423">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="a8dcf-424">`<URL>`&ndash; W pełni kwalifikowany jednolity lokalizator zasobów (URL).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-424">`<URL>` &ndash; The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="a8dcf-425">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-425">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-426">Użyj prawidłowej nazwy hosta lub lokalnego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-426">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="a8dcf-427">*Adres URL musi zawierać końcowe ukośnik.*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-427">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="a8dcf-428">`<USER>`&ndash; Określa nazwę użytkownika lub grupy użytkowników.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-428">`<USER>` &ndash; Specifies the user or user-group name.</span></span>

   <span data-ttu-id="a8dcf-429">W poniższym przykładzie lokalny adres IP `10.0.0.4`serwera to:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-429">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="a8dcf-430">Gdy adres URL jest zarejestrowany, `URL reservation successfully added`narzędzie odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-430">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="a8dcf-431">Aby usunąć zarejestrowany adres `delete urlacl` URL, użyj polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-431">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="a8dcf-432">Zarejestruj certyfikaty X.509 na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-432">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="a8dcf-433">Użyj narzędzia *netsh.exe,* aby zarejestrować certyfikaty dla aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-433">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="a8dcf-434">`<IP>`&ndash; Określa lokalny adres IP powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-434">`<IP>` &ndash; Specifies the local IP address for the binding.</span></span> <span data-ttu-id="a8dcf-435">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-435">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-436">Użyj prawidłowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-436">Use a valid IP address.</span></span>
   * <span data-ttu-id="a8dcf-437">`<PORT>`&ndash; Określa port powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-437">`<PORT>` &ndash; Specifies the port for the binding.</span></span>
   * <span data-ttu-id="a8dcf-438">`<THUMBPRINT>`&ndash; Odcisk palca certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-438">`<THUMBPRINT>` &ndash; The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="a8dcf-439">`<GUID>`&ndash; Identyfikator GUID wygenerowany przez dewelopera do reprezentowania aplikacji w celach informacyjnych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-439">`<GUID>` &ndash; A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="a8dcf-440">W celach informacyjnych należy przechowywać identyfikator GUID w aplikacji jako tag pakietu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-440">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="a8dcf-441">W programie Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-441">In Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-442">Otwórz właściwości projektu aplikacji, klikając prawym przyciskiem myszy aplikację w **Eksploratorze rozwiązań** i wybierając pozycję **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-442">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="a8dcf-443">Wybierz kartę **Pakiet.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-443">Select the **Package** tab.</span></span>
     * <span data-ttu-id="a8dcf-444">Wprowadź identyfikator GUID utworzony w polu **Znaczniki.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-444">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="a8dcf-445">Jeśli nie jest używany program Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-445">When not using Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-446">Otwórz plik projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-446">Open the app's project file.</span></span>
     * <span data-ttu-id="a8dcf-447">Dodaj `<PackageTags>` właściwość do nowej `<PropertyGroup>` lub istniejącej z utworzonym identyfikatorem GUID:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-447">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="a8dcf-448">W poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-448">In the following example:</span></span>

   * <span data-ttu-id="a8dcf-449">Lokalny adres IP serwera `10.0.0.4`to .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-449">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="a8dcf-450">Generator identyfikatorów GUID `appid` online zapewnia wartość.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-450">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="a8dcf-451">Gdy certyfikat jest zarejestrowany, narzędzie `SSL Certificate successfully added`odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-451">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="a8dcf-452">Aby usunąć rejestrację certyfikatu, użyj `delete sslcert` polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-452">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="a8dcf-453">Dokumentacja referencyjna dla *netsh.exe:*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-453">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="a8dcf-454">Polecenia Netsh dla protokołu transferu hipertekstowego (HTTP)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-454">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="a8dcf-455">Ciągi UrlPrefix</span><span class="sxs-lookup"><span data-stu-id="a8dcf-455">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="a8dcf-456">Uruchom aplikację.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-456">Run the app.</span></span>

   <span data-ttu-id="a8dcf-457">Uprawnienia administratora nie są wymagane do uruchamiania aplikacji podczas powiązania z localhost przy użyciu protokołu HTTP (nie HTTPS) z numerem portu większym niż 1024.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-457">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="a8dcf-458">W przypadku innych konfiguracji (na przykład przy użyciu lokalnego adresu IP lub powiązania z portem 443) uruchom aplikację z uprawnieniami administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-458">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-459">Aplikacja odpowiada na publiczny adres IP serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-459">The app responds at the server's public IP address.</span></span> <span data-ttu-id="a8dcf-460">W tym przykładzie serwer jest osiągany z Internetu `104.214.79.47`pod jego publicznym adresem IP .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-460">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="a8dcf-461">Certyfikat dewelopera jest używany w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-461">A development certificate is used in this example.</span></span> <span data-ttu-id="a8dcf-462">Strona ładuje się bezpiecznie po pominięciu ostrzeżenia o niezaufanym certyfikacie przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-462">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno przeglądarki z załadowaną stroną Indeks aplikacji](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="a8dcf-464">Scenariusze serwera proxy i modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-464">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="a8dcf-465">W przypadku aplikacji obsługiwanych przez http.sys, które współdziałają z żądaniami z Internetu lub sieci firmowej, dodatkowa konfiguracja może być wymagana podczas hostowania za serwerami proxy i modułami równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-465">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="a8dcf-466">Aby uzyskać więcej informacji, zobacz [Konfigurowanie ASP.NET Core do pracy z serwerami proxy i modułami równoważenia obciążenia](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-466">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a8dcf-467">Zasoby dodatkowe</span><span class="sxs-lookup"><span data-stu-id="a8dcf-467">Additional resources</span></span>

* [<span data-ttu-id="a8dcf-468">Włączanie uwierzytelniania systemu Windows za pomocą protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-468">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="a8dcf-469">Interfejs API serwera HTTP</span><span class="sxs-lookup"><span data-stu-id="a8dcf-469">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="a8dcf-470">repozytorium aspnet/HttpSysServer GitHub (kod źródłowy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-470">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="a8dcf-471">Host</span><span class="sxs-lookup"><span data-stu-id="a8dcf-471">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="a8dcf-472">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) to [serwer sieci web dla ASP.NET Core,](xref:fundamentals/servers/index) który działa tylko w systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-472">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="a8dcf-473">HTTP.sys jest alternatywą dla serwera [Kestrel](xref:fundamentals/servers/kestrel) i oferuje pewne funkcje, których Kestrel nie zapewnia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-473">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8dcf-474">Protokół HTTP.sys nie jest zgodny z [modułem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) module i nie może być używany z programami IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-474">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-475">Http.sys obsługuje następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-475">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="a8dcf-476">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="a8dcf-476">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="a8dcf-477">Udostępnianie portów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-477">Port sharing</span></span>
* <span data-ttu-id="a8dcf-478">HTTPS z SNI</span><span class="sxs-lookup"><span data-stu-id="a8dcf-478">HTTPS with SNI</span></span>
* <span data-ttu-id="a8dcf-479">Protokół HTTP/2 przez protokół TLS (Windows 10 lub nowszy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-479">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="a8dcf-480">Bezpośrednia transmisja plików</span><span class="sxs-lookup"><span data-stu-id="a8dcf-480">Direct file transmission</span></span>
* <span data-ttu-id="a8dcf-481">Buforowanie odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="a8dcf-481">Response caching</span></span>
* <span data-ttu-id="a8dcf-482">WebSockets (Windows 8 lub nowsze)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-482">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="a8dcf-483">Obsługiwane wersje systemu Windows:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-483">Supported Windows versions:</span></span>

* <span data-ttu-id="a8dcf-484">Windows 7 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-484">Windows 7 or later</span></span>
* <span data-ttu-id="a8dcf-485">Windows Server 2008 R2 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-485">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="a8dcf-486">[Wyświetl lub pobierz przykładowy kod](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([jak pobrać](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="a8dcf-486">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="a8dcf-487">Kiedy używać protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-487">When to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-488">HTTP.sys jest przydatne w przypadku wdrożeń, w których:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-488">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="a8dcf-489">Istnieje potrzeba udostępnienia serwera bezpośrednio do Internetu bez korzystania z usług IIS.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-489">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z Internetem](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="a8dcf-491">Wdrożenie wewnętrzne wymaga funkcji niedostępnej w Kestrel, takiej jak [Uwierzytelnianie systemu Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-491">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z siecią wewnętrzną](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="a8dcf-493">HTTP.sys to dojrzała technologia, która chroni przed wieloma typami ataków i zapewnia niezawodność, bezpieczeństwo i skalowalność w pełni funkcjonowego serwera sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-493">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="a8dcf-494">Usługi IIS działa jako odbiornik HTTP na górze HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-494">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="a8dcf-495">Obsługa protokołu HTTP/2</span><span class="sxs-lookup"><span data-stu-id="a8dcf-495">HTTP/2 support</span></span>

<span data-ttu-id="a8dcf-496">[Protokół HTTP/2](https://httpwg.org/specs/rfc7540.html) jest włączony dla aplikacji ASP.NET Core, jeśli spełnione są następujące wymagania podstawowe:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-496">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="a8dcf-497">Windows Server 2016/Windows 10 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-497">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="a8dcf-498">Połączenie [negocjacji protokołu warstwy aplikacji (ALPN)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-498">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="a8dcf-499">Połączenie TLS 1.2 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-499">TLS 1.2 or later connection</span></span>

<span data-ttu-id="a8dcf-500">Jeśli zostanie nawiązane połączenie HTTP/2, [httpRequest.protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) zgłasza `HTTP/2`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-500">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/2`.</span></span>

<span data-ttu-id="a8dcf-501">Protokół HTTP/2 jest domyślnie włączony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-501">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="a8dcf-502">Jeśli połączenie HTTP/2 nie zostanie nawiązane, połączenie powróci do protokołu HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-502">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="a8dcf-503">W przyszłej wersji systemu Windows dostępne będą flagi konfiguracji HTTP/2, w tym możliwość wyłączenia protokołu HTTP/2 za pomocą protokołu HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-503">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="a8dcf-504">Uwierzytelnianie w trybie jądra za pomocą protokołu Kerberos</span><span class="sxs-lookup"><span data-stu-id="a8dcf-504">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="a8dcf-505">Http.sys deleguje do uwierzytelniania w trybie jądra za pomocą protokołu uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-505">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="a8dcf-506">Uwierzytelnianie w trybie użytkownika nie jest obsługiwane w protokołach Kerberos i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-506">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="a8dcf-507">Konto komputera musi służyć do odszyfrowania tokenu/biletu Protokołu Kerberos uzyskanego z usługi Active Directory i przekazanego przez klienta do serwera w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-507">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="a8dcf-508">Zarejestruj nazwę główną usługi (SPN) dla hosta, a nie użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-508">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="a8dcf-509">Jak korzystać z protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-509">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="a8dcf-510">Skonfiguruj aplikację core ASP.NET do używania protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-510">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-511">Odwołanie do pakietu w pliku projektu nie jest wymagane podczas korzystania z [metapakiety Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) ([nuget.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-511">A package reference in the project file isn't required when using the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) ([nuget.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span></span> <span data-ttu-id="a8dcf-512">Jeśli nie `Microsoft.AspNetCore.App` używasz metapakietu, dodaj odwołanie do pakietu [microsoft.AspNetCore.Server.HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-512">When not using the `Microsoft.AspNetCore.App` metapackage, add a package reference to [Microsoft.AspNetCore.Server.HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span></span>

<span data-ttu-id="a8dcf-513">Wywołanie <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> metody rozszerzenia podczas tworzenia hosta, <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>określając wszelkie wymagane .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-513">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="a8dcf-514">W poniższym przykładzie ustawia się opcje wartości domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-514">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Program.cs?name=snippet1&highlight=4-12)]

<span data-ttu-id="a8dcf-515">Dodatkowa konfiguracja HTTP.sys jest obsługiwana przez [ustawienia rejestru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-515">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="a8dcf-516">**Opcje HTTP.sys**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-516">**HTTP.sys options**</span></span>

| <span data-ttu-id="a8dcf-517">Właściwość</span><span class="sxs-lookup"><span data-stu-id="a8dcf-517">Property</span></span> | <span data-ttu-id="a8dcf-518">Opis</span><span class="sxs-lookup"><span data-stu-id="a8dcf-518">Description</span></span> | <span data-ttu-id="a8dcf-519">Domyślne</span><span class="sxs-lookup"><span data-stu-id="a8dcf-519">Default</span></span> |
| -------- | ----------- | :-----: |
| [<span data-ttu-id="a8dcf-520">AllowSynchronousIO</span><span class="sxs-lookup"><span data-stu-id="a8dcf-520">AllowSynchronousIO</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | <span data-ttu-id="a8dcf-521">Kontrolować, czy synchroniczne wejście/wyjście `HttpContext.Request.Body` jest `HttpContext.Response.Body`dozwolone dla i .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-521">Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span> | `true` |
| [<span data-ttu-id="a8dcf-522">Uwierzytelnianie.AllowAnonymous</span><span class="sxs-lookup"><span data-stu-id="a8dcf-522">Authentication.AllowAnonymous</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | <span data-ttu-id="a8dcf-523">Zezwalaj na żądania anonimowe.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-523">Allow anonymous requests.</span></span> | `true` |
| [<span data-ttu-id="a8dcf-524">Uwierzytelnianie.Schematy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-524">Authentication.Schemes</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | <span data-ttu-id="a8dcf-525">Określ dozwolone schematy uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-525">Specify the allowed authentication schemes.</span></span> <span data-ttu-id="a8dcf-526">Może być modyfikowany w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-526">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="a8dcf-527">Wartości są dostarczane przez [authenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate` `None`, i `NTLM`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-527">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span> | `None` |
| [<span data-ttu-id="a8dcf-528">Włącz Buforowanie reakcji</span><span class="sxs-lookup"><span data-stu-id="a8dcf-528">EnableResponseCaching</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | <span data-ttu-id="a8dcf-529">Spróbuj buforować [w trybie jądra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) dla odpowiedzi z kwalifikującymi się nagłówkami.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-529">Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="a8dcf-530">Odpowiedź może nie `Set-Cookie` `Vary`zawierać `Pragma` , lub nagłówki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-530">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="a8dcf-531">Musi zawierać `Cache-Control` nagłówek, który `public` jest i `shared-max-age` `max-age` albo lub `Expires` wartość lub nagłówka.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-531">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span> | `true` |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | <span data-ttu-id="a8dcf-532">Maksymalna liczba równoczesnych akceptuje.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-532">The maximum number of concurrent accepts.</span></span> | <span data-ttu-id="a8dcf-533">5 &times; [Środowisko.<br> Liczba procesorów](xref:System.Environment.ProcessorCount)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-533">5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | <span data-ttu-id="a8dcf-534">Maksymalna liczba równoczesnych połączeń do zaakceptowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-534">The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="a8dcf-535">Użyj `-1` dla nieskończonych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-535">Use `-1` for infinite.</span></span> <span data-ttu-id="a8dcf-536">Służy `null` do używania ustawienia całego rejestru.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-536">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="a8dcf-537">(w całej maszynie</span><span class="sxs-lookup"><span data-stu-id="a8dcf-537">(machine-wide</span></span><br><span data-ttu-id="a8dcf-538">ustawienia)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-538">setting)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | <span data-ttu-id="a8dcf-539">Zobacz <a href="#maxrequestbodysize">MaxRequestBodySize</a> sekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-539">See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> | <span data-ttu-id="a8dcf-540">3000000 bajtów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-540">30000000 bytes</span></span><br><span data-ttu-id="a8dcf-541">(~28,6 MB)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-541">(~28.6 MB)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | <span data-ttu-id="a8dcf-542">Maksymalna liczba żądań, które mogą być umieszczane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-542">The maximum number of requests that can be queued.</span></span> | <span data-ttu-id="a8dcf-543">1000</span><span class="sxs-lookup"><span data-stu-id="a8dcf-543">1000</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | <span data-ttu-id="a8dcf-544">Wskaż, czy treść odpowiedzi zapisuje, że nie z powodu rozłączenia klienta należy zgłaszać wyjątki lub zakończyć normalnie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-544">Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="a8dcf-545">(normalnie)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-545">(complete normally)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | <span data-ttu-id="a8dcf-546">Uwidacznianie konfiguracji <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> HTTP.sys, która może być również skonfigurowana w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-546">Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="a8dcf-547">Postępuj zgodnie z łączami interfejsu API, aby dowiedzieć się więcej o każdym ustawieniu, w tym wartościach domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-547">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="a8dcf-548">[TimeoutManager.DrainEntityCzasciał dozwolony](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; dla interfejsu API serwera HTTP do opróżnienia treści jednostki w połączeniu Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-548">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="a8dcf-549">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Czas dozwolony dla treści jednostki żądania do przybycia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-549">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="a8dcf-550">[Czas timeoutmanager.headerWit](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; czas dozwolony dla interfejsu API serwera HTTP do analizować nagłówek żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-550">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="a8dcf-551">[Czas połączenia timeoutmanager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; dozwolony dla połączenia bezczynnego.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-551">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="a8dcf-552">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; Minimalna szybkość wysyłania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-552">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; The minimum send rate for the response.</span></span></li><li><span data-ttu-id="a8dcf-553">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Czas dozwolony dla żądania, aby pozostać w kolejce żądań, zanim aplikacja go odbierze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-553">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> |  |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | <span data-ttu-id="a8dcf-554"><xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> Określ, aby zarejestrować się w http.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-554">Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="a8dcf-555">Najbardziej przydatne jest [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), który jest używany do dodawania prefiksu do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-555">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="a8dcf-556">Mogą one zostać zmodyfikowane w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-556">These may be modified at any time prior to disposing the listener.</span></span> |  |

<a name="maxrequestbodysize"></a>

<span data-ttu-id="a8dcf-557">**Rozmiar MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-557">**MaxRequestBodySize**</span></span>

<span data-ttu-id="a8dcf-558">Maksymalny dozwolony rozmiar dowolnego treści żądania w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-558">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="a8dcf-559">Po `null`ustawieniu, maksymalny rozmiar treści żądania jest nieograniczony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-559">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="a8dcf-560">Ten limit nie ma wpływu na uaktualnione połączenia, które są zawsze nieograniczone.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-560">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="a8dcf-561">Zalecaną metodą zastąpienia limitu w ASP.NET podstawowej aplikacji MVC `IActionResult` dla pojedynczej <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> jest użycie atrybutu w metodzie akcji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-561">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="a8dcf-562">Wyjątek jest zgłaszany, jeśli aplikacja próbuje skonfigurować limit żądania po aplikacji rozpoczął odczytywanie żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-562">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="a8dcf-563">Właściwości `IsReadOnly` można użyć do wskazania, czy `MaxRequestBodySize` właściwość jest w stanie tylko do odczytu, co oznacza, że jest za późno, aby skonfigurować limit.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-563">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="a8dcf-564">Jeśli aplikacja powinna zastąpić <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> na żądanie, <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>użyj:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-564">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="a8dcf-565">Jeśli używasz programu Visual Studio, upewnij się, że aplikacja nie jest skonfigurowana do uruchamiania usługi IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-565">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-566">W programie Visual Studio domyślny profil uruchamiania jest dla usługi IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-566">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="a8dcf-567">Aby uruchomić projekt jako aplikację konsoli, ręcznie zmień wybrany profil, jak pokazano na poniższym zstrząśnięciu z ekranu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-567">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Wybieranie profilu aplikacji konsoli](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="a8dcf-569">Konfigurowanie systemu Windows Server</span><span class="sxs-lookup"><span data-stu-id="a8dcf-569">Configure Windows Server</span></span>

1. <span data-ttu-id="a8dcf-570">Określ porty do otwarcia aplikacji i użyj [Zapory systemu Windows](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) lub polecenia cmdlet [Programu New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell, aby otworzyć porty zapory, aby umożliwić ruchowi dostęp do pliku HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-570">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="a8dcf-571">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-571">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-572">Podczas wdrażania na maszynie wirtualnej platformy Azure otwórz porty w [sieciowej grupie zabezpieczeń](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-572">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="a8dcf-573">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-573">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-574">W razie potrzeby uzyskaj i zainstaluj certyfikaty X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-574">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="a8dcf-575">W systemie Windows utwórz certyfikaty z podpisem własnym przy użyciu [polecenia cmdlet Programu PowerShell new-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-575">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="a8dcf-576">Aby zapoznać się z nieobsługiwionym przykładem, zobacz [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-576">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="a8dcf-577">Zainstaluj certyfikaty z podpisem własnym lub certyfikatem urzędu certyfikacji w magazynie **Local Machine** > **Personal** serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-577">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="a8dcf-578">Jeśli aplikacja jest [wdrożeniem zależnym od struktury,](/dotnet/core/deploying/#framework-dependent-deployments-fdd)zainstaluj .NET Core, .NET Framework lub oba (jeśli aplikacja jest aplikacją .NET Core kierowaną na platformę .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-578">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="a8dcf-579">**.NET Core** &ndash; Jeśli aplikacja wymaga programu .NET Core, należy uzyskać i uruchomić instalator **.NET Core Runtime** z programu [.NET Core Downloads](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-579">**.NET Core** &ndash; If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="a8dcf-580">Nie instaluj pełnego pakietu SDK na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-580">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="a8dcf-581">**Program .NET Framework** &ndash; Jeśli aplikacja wymaga programu .NET Framework, zobacz [przewodnik po instalacji programu .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-581">**.NET Framework** &ndash; If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="a8dcf-582">Zainstaluj wymaganą platformę .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-582">Install the required .NET Framework.</span></span> <span data-ttu-id="a8dcf-583">Instalator najnowszej platformy .NET Framework jest dostępny na stronie [Pliki do pobrania .NET Core.](https://dotnet.microsoft.com/download)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-583">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="a8dcf-584">Jeśli aplikacja jest [samodzielnym wdrożeniem,](/dotnet/core/deploying/#self-contained-deployments-scd)aplikacja zawiera środowisko wykonawcze w swoim wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-584">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="a8dcf-585">Na serwerze nie jest wymagana żadna instalacja struktury.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-585">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="a8dcf-586">Skonfiguruj adresy URL i porty w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-586">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="a8dcf-587">Domyślnie ASP.NET Core wiąże się `http://localhost:5000`z programem .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-587">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="a8dcf-588">Aby skonfigurować prefiksy i porty adresów URL, dostępne są następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-588">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="a8dcf-589">`urls`argument wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-589">`urls` command-line argument</span></span>
   * <span data-ttu-id="a8dcf-590">`ASPNETCORE_URLS`zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a8dcf-590">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="a8dcf-591">Poniższy przykład kodu pokazuje, jak używać <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> z `10.0.0.4` lokalnym adresem IP serwera na porcie 443:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-591">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/2.x/Program.cs?highlight=6)]

   <span data-ttu-id="a8dcf-592">Zaletą `UrlPrefixes` jest to, że komunikat o błędzie jest generowany natychmiast dla nieprawidłowo sformatowanych prefiksów.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-592">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="a8dcf-593">Ustawienia w `UrlPrefixes` ustawieniach `UseUrls` / `urls` / `ASPNETCORE_URLS` zastępowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-593">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="a8dcf-594">W związku z `UseUrls`tym `urls`zaletą `ASPNETCORE_URLS` , i zmienną środowiskową jest to, że łatwiej jest przełączać się między Kestrel i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-594">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="a8dcf-595">Http.sys używa [formatów ciągów URLPrefix interfejsu API serwera HTTP](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-595">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="a8dcf-596">Wiązania wieloznaczne najwyższego`http://*:80/` `http://+:80`poziomu ( i ) **nie** powinny być używane.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-596">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="a8dcf-597">Powiązania symboli wieloznacznych najwyższego poziomu tworzą luki w zabezpieczeniach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-597">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="a8dcf-598">Dotyczy to zarówno silnych, jak i słabych symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-598">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="a8dcf-599">Użyj jawnych nazw hostów lub adresów IP, a nie symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-599">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="a8dcf-600">Powiązanie symboli wieloznacznych `*.mysub.com`poddomeny (na przykład) nie stanowi zagrożenia dla `*.com`bezpieczeństwa, jeśli kontrolujesz całą domenę nadrzędną (w przeciwieństwie do , która jest narażona).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-600">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="a8dcf-601">Aby uzyskać więcej informacji, zobacz [RFC 7230: Sekcja 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-601">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="a8dcf-602">Preregister prefiksy adresów URL na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-602">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="a8dcf-603">Wbudowanym narzędziem do konfigurowania pliku HTTP.sys jest *plik netsh.exe*.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-603">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="a8dcf-604">*netsh.exe* służy do rezerwowania prefiksów adresów URL i przypisywania certyfikatów X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-604">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="a8dcf-605">Narzędzie wymaga uprawnień administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-605">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-606">Użyj narzędzia *netsh.exe,* aby zarejestrować adresy URL aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-606">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="a8dcf-607">`<URL>`&ndash; W pełni kwalifikowany jednolity lokalizator zasobów (URL).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-607">`<URL>` &ndash; The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="a8dcf-608">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-608">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-609">Użyj prawidłowej nazwy hosta lub lokalnego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-609">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="a8dcf-610">*Adres URL musi zawierać końcowe ukośnik.*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-610">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="a8dcf-611">`<USER>`&ndash; Określa nazwę użytkownika lub grupy użytkowników.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-611">`<USER>` &ndash; Specifies the user or user-group name.</span></span>

   <span data-ttu-id="a8dcf-612">W poniższym przykładzie lokalny adres IP `10.0.0.4`serwera to:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-612">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="a8dcf-613">Gdy adres URL jest zarejestrowany, `URL reservation successfully added`narzędzie odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-613">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="a8dcf-614">Aby usunąć zarejestrowany adres `delete urlacl` URL, użyj polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-614">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="a8dcf-615">Zarejestruj certyfikaty X.509 na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-615">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="a8dcf-616">Użyj narzędzia *netsh.exe,* aby zarejestrować certyfikaty dla aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-616">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="a8dcf-617">`<IP>`&ndash; Określa lokalny adres IP powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-617">`<IP>` &ndash; Specifies the local IP address for the binding.</span></span> <span data-ttu-id="a8dcf-618">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-618">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-619">Użyj prawidłowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-619">Use a valid IP address.</span></span>
   * <span data-ttu-id="a8dcf-620">`<PORT>`&ndash; Określa port powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-620">`<PORT>` &ndash; Specifies the port for the binding.</span></span>
   * <span data-ttu-id="a8dcf-621">`<THUMBPRINT>`&ndash; Odcisk palca certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-621">`<THUMBPRINT>` &ndash; The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="a8dcf-622">`<GUID>`&ndash; Identyfikator GUID wygenerowany przez dewelopera do reprezentowania aplikacji w celach informacyjnych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-622">`<GUID>` &ndash; A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="a8dcf-623">W celach informacyjnych należy przechowywać identyfikator GUID w aplikacji jako tag pakietu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-623">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="a8dcf-624">W programie Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-624">In Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-625">Otwórz właściwości projektu aplikacji, klikając prawym przyciskiem myszy aplikację w **Eksploratorze rozwiązań** i wybierając pozycję **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-625">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="a8dcf-626">Wybierz kartę **Pakiet.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-626">Select the **Package** tab.</span></span>
     * <span data-ttu-id="a8dcf-627">Wprowadź identyfikator GUID utworzony w polu **Znaczniki.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-627">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="a8dcf-628">Jeśli nie jest używany program Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-628">When not using Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-629">Otwórz plik projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-629">Open the app's project file.</span></span>
     * <span data-ttu-id="a8dcf-630">Dodaj `<PackageTags>` właściwość do nowej `<PropertyGroup>` lub istniejącej z utworzonym identyfikatorem GUID:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-630">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="a8dcf-631">W poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-631">In the following example:</span></span>

   * <span data-ttu-id="a8dcf-632">Lokalny adres IP serwera `10.0.0.4`to .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-632">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="a8dcf-633">Generator identyfikatorów GUID `appid` online zapewnia wartość.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-633">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="a8dcf-634">Gdy certyfikat jest zarejestrowany, narzędzie `SSL Certificate successfully added`odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-634">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="a8dcf-635">Aby usunąć rejestrację certyfikatu, użyj `delete sslcert` polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-635">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="a8dcf-636">Dokumentacja referencyjna dla *netsh.exe:*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-636">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="a8dcf-637">Polecenia Netsh dla protokołu transferu hipertekstowego (HTTP)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-637">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="a8dcf-638">Ciągi UrlPrefix</span><span class="sxs-lookup"><span data-stu-id="a8dcf-638">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="a8dcf-639">Uruchom aplikację.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-639">Run the app.</span></span>

   <span data-ttu-id="a8dcf-640">Uprawnienia administratora nie są wymagane do uruchamiania aplikacji podczas powiązania z localhost przy użyciu protokołu HTTP (nie HTTPS) z numerem portu większym niż 1024.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-640">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="a8dcf-641">W przypadku innych konfiguracji (na przykład przy użyciu lokalnego adresu IP lub powiązania z portem 443) uruchom aplikację z uprawnieniami administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-641">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-642">Aplikacja odpowiada na publiczny adres IP serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-642">The app responds at the server's public IP address.</span></span> <span data-ttu-id="a8dcf-643">W tym przykładzie serwer jest osiągany z Internetu `104.214.79.47`pod jego publicznym adresem IP .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-643">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="a8dcf-644">Certyfikat dewelopera jest używany w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-644">A development certificate is used in this example.</span></span> <span data-ttu-id="a8dcf-645">Strona ładuje się bezpiecznie po pominięciu ostrzeżenia o niezaufanym certyfikacie przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-645">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno przeglądarki z załadowaną stroną Indeks aplikacji](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="a8dcf-647">Scenariusze serwera proxy i modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-647">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="a8dcf-648">W przypadku aplikacji obsługiwanych przez http.sys, które współdziałają z żądaniami z Internetu lub sieci firmowej, dodatkowa konfiguracja może być wymagana podczas hostowania za serwerami proxy i modułami równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-648">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="a8dcf-649">Aby uzyskać więcej informacji, zobacz [Konfigurowanie ASP.NET Core do pracy z serwerami proxy i modułami równoważenia obciążenia](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-649">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a8dcf-650">Zasoby dodatkowe</span><span class="sxs-lookup"><span data-stu-id="a8dcf-650">Additional resources</span></span>

* [<span data-ttu-id="a8dcf-651">Włączanie uwierzytelniania systemu Windows za pomocą protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-651">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="a8dcf-652">Interfejs API serwera HTTP</span><span class="sxs-lookup"><span data-stu-id="a8dcf-652">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="a8dcf-653">repozytorium aspnet/HttpSysServer GitHub (kod źródłowy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-653">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="a8dcf-654">Host</span><span class="sxs-lookup"><span data-stu-id="a8dcf-654">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="a8dcf-655">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) to [serwer sieci web dla ASP.NET Core,](xref:fundamentals/servers/index) który działa tylko w systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-655">[HTTP.sys](/iis/get-started/introduction-to-iis/introduction-to-iis-architecture#hypertext-transfer-protocol-stack-httpsys) is a [web server for ASP.NET Core](xref:fundamentals/servers/index) that only runs on Windows.</span></span> <span data-ttu-id="a8dcf-656">HTTP.sys jest alternatywą dla serwera [Kestrel](xref:fundamentals/servers/kestrel) i oferuje pewne funkcje, których Kestrel nie zapewnia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-656">HTTP.sys is an alternative to [Kestrel](xref:fundamentals/servers/kestrel) server and offers some features that Kestrel doesn't provide.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a8dcf-657">Protokół HTTP.sys nie jest zgodny z [modułem ASP.NET Core](xref:host-and-deploy/aspnet-core-module) module i nie może być używany z programami IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-657">HTTP.sys isn't compatible with the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) and can't be used with IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-658">Http.sys obsługuje następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-658">HTTP.sys supports the following features:</span></span>

* [<span data-ttu-id="a8dcf-659">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="a8dcf-659">Windows Authentication</span></span>](xref:security/authentication/windowsauth)
* <span data-ttu-id="a8dcf-660">Udostępnianie portów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-660">Port sharing</span></span>
* <span data-ttu-id="a8dcf-661">HTTPS z SNI</span><span class="sxs-lookup"><span data-stu-id="a8dcf-661">HTTPS with SNI</span></span>
* <span data-ttu-id="a8dcf-662">Protokół HTTP/2 przez protokół TLS (Windows 10 lub nowszy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-662">HTTP/2 over TLS (Windows 10 or later)</span></span>
* <span data-ttu-id="a8dcf-663">Bezpośrednia transmisja plików</span><span class="sxs-lookup"><span data-stu-id="a8dcf-663">Direct file transmission</span></span>
* <span data-ttu-id="a8dcf-664">Buforowanie odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="a8dcf-664">Response caching</span></span>
* <span data-ttu-id="a8dcf-665">WebSockets (Windows 8 lub nowsze)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-665">WebSockets (Windows 8 or later)</span></span>

<span data-ttu-id="a8dcf-666">Obsługiwane wersje systemu Windows:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-666">Supported Windows versions:</span></span>

* <span data-ttu-id="a8dcf-667">Windows 7 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-667">Windows 7 or later</span></span>
* <span data-ttu-id="a8dcf-668">Windows Server 2008 R2 lub nowszy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-668">Windows Server 2008 R2 or later</span></span>

<span data-ttu-id="a8dcf-669">[Wyświetl lub pobierz przykładowy kod](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([jak pobrać](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="a8dcf-669">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/servers/httpsys/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="when-to-use-httpsys"></a><span data-ttu-id="a8dcf-670">Kiedy używać protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-670">When to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-671">HTTP.sys jest przydatne w przypadku wdrożeń, w których:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-671">HTTP.sys is useful for deployments where:</span></span>

* <span data-ttu-id="a8dcf-672">Istnieje potrzeba udostępnienia serwera bezpośrednio do Internetu bez korzystania z usług IIS.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-672">There's a need to expose the server directly to the Internet without using IIS.</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z Internetem](httpsys/_static/httpsys-to-internet.png)

* <span data-ttu-id="a8dcf-674">Wdrożenie wewnętrzne wymaga funkcji niedostępnej w Kestrel, takiej jak [Uwierzytelnianie systemu Windows](xref:security/authentication/windowsauth).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-674">An internal deployment requires a feature not available in Kestrel, such as [Windows Authentication](xref:security/authentication/windowsauth).</span></span>

  ![HTTP.sys komunikuje się bezpośrednio z siecią wewnętrzną](httpsys/_static/httpsys-to-internal.png)

<span data-ttu-id="a8dcf-676">HTTP.sys to dojrzała technologia, która chroni przed wieloma typami ataków i zapewnia niezawodność, bezpieczeństwo i skalowalność w pełni funkcjonowego serwera sieci Web.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-676">HTTP.sys is mature technology that protects against many types of attacks and provides the robustness, security, and scalability of a full-featured web server.</span></span> <span data-ttu-id="a8dcf-677">Usługi IIS działa jako odbiornik HTTP na górze HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-677">IIS itself runs as an HTTP listener on top of HTTP.sys.</span></span>

## <a name="http2-support"></a><span data-ttu-id="a8dcf-678">Obsługa protokołu HTTP/2</span><span class="sxs-lookup"><span data-stu-id="a8dcf-678">HTTP/2 support</span></span>

<span data-ttu-id="a8dcf-679">[Protokół HTTP/2](https://httpwg.org/specs/rfc7540.html) jest włączony dla aplikacji ASP.NET Core, jeśli spełnione są następujące wymagania podstawowe:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-679">[HTTP/2](https://httpwg.org/specs/rfc7540.html) is enabled for ASP.NET Core apps if the following base requirements are met:</span></span>

* <span data-ttu-id="a8dcf-680">Windows Server 2016/Windows 10 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-680">Windows Server 2016/Windows 10 or later</span></span>
* <span data-ttu-id="a8dcf-681">Połączenie [negocjacji protokołu warstwy aplikacji (ALPN)](https://tools.ietf.org/html/rfc7301#section-3)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-681">[Application-Layer Protocol Negotiation (ALPN)](https://tools.ietf.org/html/rfc7301#section-3) connection</span></span>
* <span data-ttu-id="a8dcf-682">Połączenie TLS 1.2 lub nowsze</span><span class="sxs-lookup"><span data-stu-id="a8dcf-682">TLS 1.2 or later connection</span></span>

<span data-ttu-id="a8dcf-683">Jeśli zostanie nawiązane połączenie HTTP/2, [httpRequest.protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) zgłasza `HTTP/1.1`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-683">If an HTTP/2 connection is established, [HttpRequest.Protocol](xref:Microsoft.AspNetCore.Http.HttpRequest.Protocol*) reports `HTTP/1.1`.</span></span>

<span data-ttu-id="a8dcf-684">Protokół HTTP/2 jest domyślnie włączony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-684">HTTP/2 is enabled by default.</span></span> <span data-ttu-id="a8dcf-685">Jeśli połączenie HTTP/2 nie zostanie nawiązane, połączenie powróci do protokołu HTTP/1.1.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-685">If an HTTP/2 connection isn't established, the connection falls back to HTTP/1.1.</span></span> <span data-ttu-id="a8dcf-686">W przyszłej wersji systemu Windows dostępne będą flagi konfiguracji HTTP/2, w tym możliwość wyłączenia protokołu HTTP/2 za pomocą protokołu HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-686">In a future release of Windows, HTTP/2 configuration flags will be available, including the ability to disable HTTP/2 with HTTP.sys.</span></span>

## <a name="kernel-mode-authentication-with-kerberos"></a><span data-ttu-id="a8dcf-687">Uwierzytelnianie w trybie jądra za pomocą protokołu Kerberos</span><span class="sxs-lookup"><span data-stu-id="a8dcf-687">Kernel mode authentication with Kerberos</span></span>

<span data-ttu-id="a8dcf-688">Http.sys deleguje do uwierzytelniania w trybie jądra za pomocą protokołu uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-688">HTTP.sys delegates to kernel mode authentication with the Kerberos authentication protocol.</span></span> <span data-ttu-id="a8dcf-689">Uwierzytelnianie w trybie użytkownika nie jest obsługiwane w protokołach Kerberos i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-689">User mode authentication isn't supported with Kerberos and HTTP.sys.</span></span> <span data-ttu-id="a8dcf-690">Konto komputera musi służyć do odszyfrowania tokenu/biletu Protokołu Kerberos uzyskanego z usługi Active Directory i przekazanego przez klienta do serwera w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-690">The machine account must be used to decrypt the Kerberos token/ticket that's obtained from Active Directory and forwarded by the client to the server to authenticate the user.</span></span> <span data-ttu-id="a8dcf-691">Zarejestruj nazwę główną usługi (SPN) dla hosta, a nie użytkownika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-691">Register the Service Principal Name (SPN) for the host, not the user of the app.</span></span>

## <a name="how-to-use-httpsys"></a><span data-ttu-id="a8dcf-692">Jak korzystać z protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-692">How to use HTTP.sys</span></span>

### <a name="configure-the-aspnet-core-app-to-use-httpsys"></a><span data-ttu-id="a8dcf-693">Skonfiguruj aplikację core ASP.NET do używania protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-693">Configure the ASP.NET Core app to use HTTP.sys</span></span>

<span data-ttu-id="a8dcf-694">Odwołanie do pakietu w pliku projektu nie jest wymagane podczas korzystania z [metapakiety Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) ([nuget.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-694">A package reference in the project file isn't required when using the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) ([nuget.org](https://www.nuget.org/packages/Microsoft.AspNetCore.App/)).</span></span> <span data-ttu-id="a8dcf-695">Jeśli nie `Microsoft.AspNetCore.App` używasz metapakietu, dodaj odwołanie do pakietu [microsoft.AspNetCore.Server.HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-695">When not using the `Microsoft.AspNetCore.App` metapackage, add a package reference to [Microsoft.AspNetCore.Server.HttpSys](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.HttpSys/).</span></span>

<span data-ttu-id="a8dcf-696">Wywołanie <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> metody rozszerzenia podczas tworzenia hosta, <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>określając wszelkie wymagane .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-696">Call the <xref:Microsoft.AspNetCore.Hosting.WebHostBuilderHttpSysExtensions.UseHttpSys*> extension method when building the host, specifying any required <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions>.</span></span> <span data-ttu-id="a8dcf-697">W poniższym przykładzie ustawia się opcje wartości domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-697">The following example sets options to their default values:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Program.cs?name=snippet1&highlight=4-12)]

<span data-ttu-id="a8dcf-698">Dodatkowa konfiguracja HTTP.sys jest obsługiwana przez [ustawienia rejestru](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-698">Additional HTTP.sys configuration is handled through [registry settings](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span>

<span data-ttu-id="a8dcf-699">**Opcje HTTP.sys**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-699">**HTTP.sys options**</span></span>

| <span data-ttu-id="a8dcf-700">Właściwość</span><span class="sxs-lookup"><span data-stu-id="a8dcf-700">Property</span></span> | <span data-ttu-id="a8dcf-701">Opis</span><span class="sxs-lookup"><span data-stu-id="a8dcf-701">Description</span></span> | <span data-ttu-id="a8dcf-702">Domyślne</span><span class="sxs-lookup"><span data-stu-id="a8dcf-702">Default</span></span> |
| -------- | ----------- | :-----: |
| [<span data-ttu-id="a8dcf-703">AllowSynchronousIO</span><span class="sxs-lookup"><span data-stu-id="a8dcf-703">AllowSynchronousIO</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.AllowSynchronousIO) | <span data-ttu-id="a8dcf-704">Kontrolować, czy synchroniczne wejście/wyjście `HttpContext.Request.Body` jest `HttpContext.Response.Body`dozwolone dla i .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-704">Control whether synchronous input/output is allowed for the `HttpContext.Request.Body` and `HttpContext.Response.Body`.</span></span> | `true` |
| [<span data-ttu-id="a8dcf-705">Uwierzytelnianie.AllowAnonymous</span><span class="sxs-lookup"><span data-stu-id="a8dcf-705">Authentication.AllowAnonymous</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.AllowAnonymous) | <span data-ttu-id="a8dcf-706">Zezwalaj na żądania anonimowe.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-706">Allow anonymous requests.</span></span> | `true` |
| [<span data-ttu-id="a8dcf-707">Uwierzytelnianie.Schematy</span><span class="sxs-lookup"><span data-stu-id="a8dcf-707">Authentication.Schemes</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationManager.Schemes) | <span data-ttu-id="a8dcf-708">Określ dozwolone schematy uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-708">Specify the allowed authentication schemes.</span></span> <span data-ttu-id="a8dcf-709">Może być modyfikowany w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-709">May be modified at any time prior to disposing the listener.</span></span> <span data-ttu-id="a8dcf-710">Wartości są dostarczane przez [authenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate` `None`, i `NTLM`.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-710">Values are provided by the [AuthenticationSchemes enum](xref:Microsoft.AspNetCore.Server.HttpSys.AuthenticationSchemes): `Basic`, `Kerberos`, `Negotiate`, `None`, and `NTLM`.</span></span> | `None` |
| [<span data-ttu-id="a8dcf-711">Włącz Buforowanie reakcji</span><span class="sxs-lookup"><span data-stu-id="a8dcf-711">EnableResponseCaching</span></span>](xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.EnableResponseCaching) | <span data-ttu-id="a8dcf-712">Spróbuj buforować [w trybie jądra](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) dla odpowiedzi z kwalifikującymi się nagłówkami.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-712">Attempt [kernel-mode](/windows-hardware/drivers/gettingstarted/user-mode-and-kernel-mode) caching for responses with eligible headers.</span></span> <span data-ttu-id="a8dcf-713">Odpowiedź może nie `Set-Cookie` `Vary`zawierać `Pragma` , lub nagłówki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-713">The response may not include `Set-Cookie`, `Vary`, or `Pragma` headers.</span></span> <span data-ttu-id="a8dcf-714">Musi zawierać `Cache-Control` nagłówek, który `public` jest i `shared-max-age` `max-age` albo lub `Expires` wartość lub nagłówka.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-714">It must include a `Cache-Control` header that's `public` and either a `shared-max-age` or `max-age` value, or an `Expires` header.</span></span> | `true` |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxAccepts> | <span data-ttu-id="a8dcf-715">Maksymalna liczba równoczesnych akceptuje.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-715">The maximum number of concurrent accepts.</span></span> | <span data-ttu-id="a8dcf-716">5 &times; [Środowisko.<br> Liczba procesorów](xref:System.Environment.ProcessorCount)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-716">5 &times; [Environment.<br>ProcessorCount](xref:System.Environment.ProcessorCount)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxConnections> | <span data-ttu-id="a8dcf-717">Maksymalna liczba równoczesnych połączeń do zaakceptowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-717">The maximum number of concurrent connections to accept.</span></span> <span data-ttu-id="a8dcf-718">Użyj `-1` dla nieskończonych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-718">Use `-1` for infinite.</span></span> <span data-ttu-id="a8dcf-719">Służy `null` do używania ustawienia całego rejestru.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-719">Use `null` to use the registry's machine-wide setting.</span></span> | `null`<br><span data-ttu-id="a8dcf-720">(w całej maszynie</span><span class="sxs-lookup"><span data-stu-id="a8dcf-720">(machine-wide</span></span><br><span data-ttu-id="a8dcf-721">ustawienia)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-721">setting)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> | <span data-ttu-id="a8dcf-722">Zobacz <a href="#maxrequestbodysize">MaxRequestBodySize</a> sekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-722">See the <a href="#maxrequestbodysize">MaxRequestBodySize</a> section.</span></span> | <span data-ttu-id="a8dcf-723">3000000 bajtów</span><span class="sxs-lookup"><span data-stu-id="a8dcf-723">30000000 bytes</span></span><br><span data-ttu-id="a8dcf-724">(~28,6 MB)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-724">(~28.6 MB)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.RequestQueueLimit> | <span data-ttu-id="a8dcf-725">Maksymalna liczba żądań, które mogą być umieszczane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-725">The maximum number of requests that can be queued.</span></span> | <span data-ttu-id="a8dcf-726">1000</span><span class="sxs-lookup"><span data-stu-id="a8dcf-726">1000</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.ThrowWriteExceptions> | <span data-ttu-id="a8dcf-727">Wskaż, czy treść odpowiedzi zapisuje, że nie z powodu rozłączenia klienta należy zgłaszać wyjątki lub zakończyć normalnie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-727">Indicate if response body writes that fail due to client disconnects should throw exceptions or complete normally.</span></span> | `false`<br><span data-ttu-id="a8dcf-728">(normalnie)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-728">(complete normally)</span></span> |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.Timeouts> | <span data-ttu-id="a8dcf-729">Uwidacznianie konfiguracji <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> HTTP.sys, która może być również skonfigurowana w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-729">Expose the HTTP.sys <xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager> configuration, which may also be configured in the registry.</span></span> <span data-ttu-id="a8dcf-730">Postępuj zgodnie z łączami interfejsu API, aby dowiedzieć się więcej o każdym ustawieniu, w tym wartościach domyślnych:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-730">Follow the API links to learn more about each setting, including default values:</span></span><ul><li><span data-ttu-id="a8dcf-731">[TimeoutManager.DrainEntityCzasciał dozwolony](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; dla interfejsu API serwera HTTP do opróżnienia treści jednostki w połączeniu Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-731">[TimeoutManager.DrainEntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.DrainEntityBody) &ndash; Time allowed for the HTTP Server API to drain the entity body on a Keep-Alive connection.</span></span></li><li><span data-ttu-id="a8dcf-732">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Czas dozwolony dla treści jednostki żądania do przybycia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-732">[TimeoutManager.EntityBody](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.EntityBody) &ndash; Time allowed for the request entity body to arrive.</span></span></li><li><span data-ttu-id="a8dcf-733">[Czas timeoutmanager.headerWit](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; czas dozwolony dla interfejsu API serwera HTTP do analizować nagłówek żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-733">[TimeoutManager.HeaderWait](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.HeaderWait) &ndash; Time allowed for the HTTP Server API to parse the request header.</span></span></li><li><span data-ttu-id="a8dcf-734">[Czas połączenia timeoutmanager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; dozwolony dla połączenia bezczynnego.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-734">[TimeoutManager.IdleConnection](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.IdleConnection) &ndash; Time allowed for an idle connection.</span></span></li><li><span data-ttu-id="a8dcf-735">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; Minimalna szybkość wysyłania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-735">[TimeoutManager.MinSendBytesPerSecond](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.MinSendBytesPerSecond) &ndash; The minimum send rate for the response.</span></span></li><li><span data-ttu-id="a8dcf-736">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Czas dozwolony dla żądania, aby pozostać w kolejce żądań, zanim aplikacja go odbierze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-736">[TimeoutManager.RequestQueue](xref:Microsoft.AspNetCore.Server.HttpSys.TimeoutManager.RequestQueue) &ndash; Time allowed for the request to remain in the request queue before the app picks it up.</span></span></li></ul> |  |
| <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> | <span data-ttu-id="a8dcf-737"><xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> Określ, aby zarejestrować się w http.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-737">Specify the <xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection> to register with HTTP.sys.</span></span> <span data-ttu-id="a8dcf-738">Najbardziej przydatne jest [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), który jest używany do dodawania prefiksu do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-738">The most useful is [UrlPrefixCollection.Add](xref:Microsoft.AspNetCore.Server.HttpSys.UrlPrefixCollection.Add*), which is used to add a prefix to the collection.</span></span> <span data-ttu-id="a8dcf-739">Mogą one zostać zmodyfikowane w dowolnym momencie przed utylizowanym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-739">These may be modified at any time prior to disposing the listener.</span></span> |  |

<a name="maxrequestbodysize"></a>

<span data-ttu-id="a8dcf-740">**Rozmiar MaxRequestBodySize**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-740">**MaxRequestBodySize**</span></span>

<span data-ttu-id="a8dcf-741">Maksymalny dozwolony rozmiar dowolnego treści żądania w bajtach.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-741">The maximum allowed size of any request body in bytes.</span></span> <span data-ttu-id="a8dcf-742">Po `null`ustawieniu, maksymalny rozmiar treści żądania jest nieograniczony.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-742">When set to `null`, the maximum request body size is unlimited.</span></span> <span data-ttu-id="a8dcf-743">Ten limit nie ma wpływu na uaktualnione połączenia, które są zawsze nieograniczone.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-743">This limit has no effect on upgraded connections, which are always unlimited.</span></span>

<span data-ttu-id="a8dcf-744">Zalecaną metodą zastąpienia limitu w ASP.NET podstawowej aplikacji MVC `IActionResult` dla pojedynczej <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> jest użycie atrybutu w metodzie akcji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-744">The recommended method to override the limit in an ASP.NET Core MVC app for a single `IActionResult` is to use the <xref:Microsoft.AspNetCore.Mvc.RequestSizeLimitAttribute> attribute on an action method:</span></span>

```csharp
[RequestSizeLimit(100000000)]
public IActionResult MyActionMethod()
```

<span data-ttu-id="a8dcf-745">Wyjątek jest zgłaszany, jeśli aplikacja próbuje skonfigurować limit żądania po aplikacji rozpoczął odczytywanie żądania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-745">An exception is thrown if the app attempts to configure the limit on a request after the app has started reading the request.</span></span> <span data-ttu-id="a8dcf-746">Właściwości `IsReadOnly` można użyć do wskazania, czy `MaxRequestBodySize` właściwość jest w stanie tylko do odczytu, co oznacza, że jest za późno, aby skonfigurować limit.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-746">An `IsReadOnly` property can be used to indicate if the `MaxRequestBodySize` property is in a read-only state, meaning it's too late to configure the limit.</span></span>

<span data-ttu-id="a8dcf-747">Jeśli aplikacja powinna zastąpić <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> na żądanie, <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>użyj:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-747">If the app should override <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.MaxRequestBodySize> per-request, use the <xref:Microsoft.AspNetCore.Http.Features.IHttpMaxRequestBodySizeFeature>:</span></span>

[!code-csharp[](httpsys/samples/2.x/SampleApp/Startup.cs?name=snippet1&highlight=6-7)]

<span data-ttu-id="a8dcf-748">Jeśli używasz programu Visual Studio, upewnij się, że aplikacja nie jest skonfigurowana do uruchamiania usługi IIS lub IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-748">If using Visual Studio, make sure the app isn't configured to run IIS or IIS Express.</span></span>

<span data-ttu-id="a8dcf-749">W programie Visual Studio domyślny profil uruchamiania jest dla usługi IIS Express.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-749">In Visual Studio, the default launch profile is for IIS Express.</span></span> <span data-ttu-id="a8dcf-750">Aby uruchomić projekt jako aplikację konsoli, ręcznie zmień wybrany profil, jak pokazano na poniższym zstrząśnięciu z ekranu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-750">To run the project as a console app, manually change the selected profile, as shown in the following screen shot:</span></span>

![Wybieranie profilu aplikacji konsoli](httpsys/_static/vs-choose-profile.png)

### <a name="configure-windows-server"></a><span data-ttu-id="a8dcf-752">Konfigurowanie systemu Windows Server</span><span class="sxs-lookup"><span data-stu-id="a8dcf-752">Configure Windows Server</span></span>

1. <span data-ttu-id="a8dcf-753">Określ porty do otwarcia aplikacji i użyj [Zapory systemu Windows](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) lub polecenia cmdlet [Programu New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell, aby otworzyć porty zapory, aby umożliwić ruchowi dostęp do pliku HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-753">Determine the ports to open for the app and use [Windows Firewall](/windows/security/threat-protection/windows-firewall/create-an-inbound-port-rule) or the [New-NetFirewallRule](/powershell/module/netsecurity/new-netfirewallrule) PowerShell cmdlet to open firewall ports to allow traffic to reach HTTP.sys.</span></span> <span data-ttu-id="a8dcf-754">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-754">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-755">Podczas wdrażania na maszynie wirtualnej platformy Azure otwórz porty w [sieciowej grupie zabezpieczeń](/azure/virtual-machines/windows/nsg-quickstart-portal).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-755">When deploying to an Azure VM, open the ports in the [Network Security Group](/azure/virtual-machines/windows/nsg-quickstart-portal).</span></span> <span data-ttu-id="a8dcf-756">W następujących poleceniach i konfiguracji aplikacji jest używany port 443.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-756">In the following commands and app configuration, port 443 is used.</span></span>

1. <span data-ttu-id="a8dcf-757">W razie potrzeby uzyskaj i zainstaluj certyfikaty X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-757">Obtain and install X.509 certificates, if required.</span></span>

   <span data-ttu-id="a8dcf-758">W systemie Windows utwórz certyfikaty z podpisem własnym przy użyciu [polecenia cmdlet Programu PowerShell new-SelfSignedCertificate](/powershell/module/pkiclient/new-selfsignedcertificate).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-758">On Windows, create self-signed certificates using the [New-SelfSignedCertificate PowerShell cmdlet](/powershell/module/pkiclient/new-selfsignedcertificate).</span></span> <span data-ttu-id="a8dcf-759">Aby zapoznać się z nieobsługiwionym przykładem, zobacz [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-759">For an unsupported example, see [UpdateIISExpressSSLForChrome.ps1](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/includes/make-x509-cert/UpdateIISExpressSSLForChrome.ps1).</span></span>

   <span data-ttu-id="a8dcf-760">Zainstaluj certyfikaty z podpisem własnym lub certyfikatem urzędu certyfikacji w magazynie **Local Machine** > **Personal** serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-760">Install either self-signed or CA-signed certificates in the server's **Local Machine** > **Personal** store.</span></span>

1. <span data-ttu-id="a8dcf-761">Jeśli aplikacja jest [wdrożeniem zależnym od struktury,](/dotnet/core/deploying/#framework-dependent-deployments-fdd)zainstaluj .NET Core, .NET Framework lub oba (jeśli aplikacja jest aplikacją .NET Core kierowaną na platformę .NET Framework).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-761">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), install .NET Core, .NET Framework, or both (if the app is a .NET Core app targeting the .NET Framework).</span></span>

   * <span data-ttu-id="a8dcf-762">**.NET Core** &ndash; Jeśli aplikacja wymaga programu .NET Core, należy uzyskać i uruchomić instalator **.NET Core Runtime** z programu [.NET Core Downloads](https://dotnet.microsoft.com/download).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-762">**.NET Core** &ndash; If the app requires .NET Core, obtain and run the **.NET Core Runtime** installer from [.NET Core Downloads](https://dotnet.microsoft.com/download).</span></span> <span data-ttu-id="a8dcf-763">Nie instaluj pełnego pakietu SDK na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-763">Don't install the full SDK on the server.</span></span>
   * <span data-ttu-id="a8dcf-764">**Program .NET Framework** &ndash; Jeśli aplikacja wymaga programu .NET Framework, zobacz [przewodnik po instalacji programu .NET Framework](/dotnet/framework/install/).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-764">**.NET Framework** &ndash; If the app requires .NET Framework, see the [.NET Framework installation guide](/dotnet/framework/install/).</span></span> <span data-ttu-id="a8dcf-765">Zainstaluj wymaganą platformę .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-765">Install the required .NET Framework.</span></span> <span data-ttu-id="a8dcf-766">Instalator najnowszej platformy .NET Framework jest dostępny na stronie [Pliki do pobrania .NET Core.](https://dotnet.microsoft.com/download)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-766">The installer for the latest .NET Framework is available from the [.NET Core Downloads](https://dotnet.microsoft.com/download) page.</span></span>

   <span data-ttu-id="a8dcf-767">Jeśli aplikacja jest [samodzielnym wdrożeniem,](/dotnet/core/deploying/#self-contained-deployments-scd)aplikacja zawiera środowisko wykonawcze w swoim wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-767">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), the app includes the runtime in its deployment.</span></span> <span data-ttu-id="a8dcf-768">Na serwerze nie jest wymagana żadna instalacja struktury.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-768">No framework installation is required on the server.</span></span>

1. <span data-ttu-id="a8dcf-769">Skonfiguruj adresy URL i porty w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-769">Configure URLs and ports in the app.</span></span>

   <span data-ttu-id="a8dcf-770">Domyślnie ASP.NET Core wiąże się `http://localhost:5000`z programem .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-770">By default, ASP.NET Core binds to `http://localhost:5000`.</span></span> <span data-ttu-id="a8dcf-771">Aby skonfigurować prefiksy i porty adresów URL, dostępne są następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-771">To configure URL prefixes and ports, options include:</span></span>

   * <xref:Microsoft.AspNetCore.Hosting.HostingAbstractionsWebHostBuilderExtensions.UseUrls*>
   * <span data-ttu-id="a8dcf-772">`urls`argument wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-772">`urls` command-line argument</span></span>
   * <span data-ttu-id="a8dcf-773">`ASPNETCORE_URLS`zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="a8dcf-773">`ASPNETCORE_URLS` environment variable</span></span>
   * <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes>

   <span data-ttu-id="a8dcf-774">Poniższy przykład kodu pokazuje, jak używać <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> z `10.0.0.4` lokalnym adresem IP serwera na porcie 443:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-774">The following code example shows how to use <xref:Microsoft.AspNetCore.Server.HttpSys.HttpSysOptions.UrlPrefixes> with the server's local IP address `10.0.0.4` on port 443:</span></span>

   [!code-csharp[](httpsys/samples_snapshot/2.x/Program.cs?highlight=6)]

   <span data-ttu-id="a8dcf-775">Zaletą `UrlPrefixes` jest to, że komunikat o błędzie jest generowany natychmiast dla nieprawidłowo sformatowanych prefiksów.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-775">An advantage of `UrlPrefixes` is that an error message is generated immediately for improperly formatted prefixes.</span></span>

   <span data-ttu-id="a8dcf-776">Ustawienia w `UrlPrefixes` ustawieniach `UseUrls` / `urls` / `ASPNETCORE_URLS` zastępowania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-776">The settings in `UrlPrefixes` override `UseUrls`/`urls`/`ASPNETCORE_URLS` settings.</span></span> <span data-ttu-id="a8dcf-777">W związku z `UseUrls`tym `urls`zaletą `ASPNETCORE_URLS` , i zmienną środowiskową jest to, że łatwiej jest przełączać się między Kestrel i HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-777">Therefore, an advantage of `UseUrls`, `urls`, and the `ASPNETCORE_URLS` environment variable is that it's easier to switch between Kestrel and HTTP.sys.</span></span>

   <span data-ttu-id="a8dcf-778">Http.sys używa [formatów ciągów URLPrefix interfejsu API serwera HTTP](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-778">HTTP.sys uses the [HTTP Server API UrlPrefix string formats](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx).</span></span>

   > [!WARNING]
   > <span data-ttu-id="a8dcf-779">Wiązania wieloznaczne najwyższego`http://*:80/` `http://+:80`poziomu ( i ) **nie** powinny być używane.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-779">Top-level wildcard bindings (`http://*:80/` and `http://+:80`) should **not** be used.</span></span> <span data-ttu-id="a8dcf-780">Powiązania symboli wieloznacznych najwyższego poziomu tworzą luki w zabezpieczeniach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-780">Top-level wildcard bindings create app security vulnerabilities.</span></span> <span data-ttu-id="a8dcf-781">Dotyczy to zarówno silnych, jak i słabych symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-781">This applies to both strong and weak wildcards.</span></span> <span data-ttu-id="a8dcf-782">Użyj jawnych nazw hostów lub adresów IP, a nie symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-782">Use explicit host names or IP addresses rather than wildcards.</span></span> <span data-ttu-id="a8dcf-783">Powiązanie symboli wieloznacznych `*.mysub.com`poddomeny (na przykład) nie stanowi zagrożenia dla `*.com`bezpieczeństwa, jeśli kontrolujesz całą domenę nadrzędną (w przeciwieństwie do , która jest narażona).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-783">Subdomain wildcard binding (for example, `*.mysub.com`) isn't a security risk if you control the entire parent domain (as opposed to `*.com`, which is vulnerable).</span></span> <span data-ttu-id="a8dcf-784">Aby uzyskać więcej informacji, zobacz [RFC 7230: Sekcja 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-784">For more information, see [RFC 7230: Section 5.4: Host](https://tools.ietf.org/html/rfc7230#section-5.4).</span></span>

1. <span data-ttu-id="a8dcf-785">Preregister prefiksy adresów URL na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-785">Preregister URL prefixes on the server.</span></span>

   <span data-ttu-id="a8dcf-786">Wbudowanym narzędziem do konfigurowania pliku HTTP.sys jest *plik netsh.exe*.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-786">The built-in tool for configuring HTTP.sys is *netsh.exe*.</span></span> <span data-ttu-id="a8dcf-787">*netsh.exe* służy do rezerwowania prefiksów adresów URL i przypisywania certyfikatów X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-787">*netsh.exe* is used to reserve URL prefixes and assign X.509 certificates.</span></span> <span data-ttu-id="a8dcf-788">Narzędzie wymaga uprawnień administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-788">The tool requires administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-789">Użyj narzędzia *netsh.exe,* aby zarejestrować adresy URL aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-789">Use the *netsh.exe* tool to register URLs for the app:</span></span>

   ```console
   netsh http add urlacl url=<URL> user=<USER>
   ```

   * <span data-ttu-id="a8dcf-790">`<URL>`&ndash; W pełni kwalifikowany jednolity lokalizator zasobów (URL).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-790">`<URL>` &ndash; The fully qualified Uniform Resource Locator (URL).</span></span> <span data-ttu-id="a8dcf-791">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-791">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-792">Użyj prawidłowej nazwy hosta lub lokalnego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-792">Use a valid hostname or local IP address.</span></span> <span data-ttu-id="a8dcf-793">*Adres URL musi zawierać końcowe ukośnik.*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-793">*The URL must include a trailing slash.*</span></span>
   * <span data-ttu-id="a8dcf-794">`<USER>`&ndash; Określa nazwę użytkownika lub grupy użytkowników.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-794">`<USER>` &ndash; Specifies the user or user-group name.</span></span>

   <span data-ttu-id="a8dcf-795">W poniższym przykładzie lokalny adres IP `10.0.0.4`serwera to:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-795">In the following example, the local IP address of the server is `10.0.0.4`:</span></span>

   ```console
   netsh http add urlacl url=https://10.0.0.4:443/ user=Users
   ```

   <span data-ttu-id="a8dcf-796">Gdy adres URL jest zarejestrowany, `URL reservation successfully added`narzędzie odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-796">When a URL is registered, the tool responds with `URL reservation successfully added`.</span></span>

   <span data-ttu-id="a8dcf-797">Aby usunąć zarejestrowany adres `delete urlacl` URL, użyj polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-797">To delete a registered URL, use the `delete urlacl` command:</span></span>

   ```console
   netsh http delete urlacl url=<URL>
   ```

1. <span data-ttu-id="a8dcf-798">Zarejestruj certyfikaty X.509 na serwerze.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-798">Register X.509 certificates on the server.</span></span>

   <span data-ttu-id="a8dcf-799">Użyj narzędzia *netsh.exe,* aby zarejestrować certyfikaty dla aplikacji:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-799">Use the *netsh.exe* tool to register certificates for the app:</span></span>

   ```console
   netsh http add sslcert ipport=<IP>:<PORT> certhash=<THUMBPRINT> appid="{<GUID>}"
   ```

   * <span data-ttu-id="a8dcf-800">`<IP>`&ndash; Określa lokalny adres IP powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-800">`<IP>` &ndash; Specifies the local IP address for the binding.</span></span> <span data-ttu-id="a8dcf-801">Nie używaj powiązania z symbolami wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-801">Don't use a wildcard binding.</span></span> <span data-ttu-id="a8dcf-802">Użyj prawidłowego adresu IP.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-802">Use a valid IP address.</span></span>
   * <span data-ttu-id="a8dcf-803">`<PORT>`&ndash; Określa port powiązania.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-803">`<PORT>` &ndash; Specifies the port for the binding.</span></span>
   * <span data-ttu-id="a8dcf-804">`<THUMBPRINT>`&ndash; Odcisk palca certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-804">`<THUMBPRINT>` &ndash; The X.509 certificate thumbprint.</span></span>
   * <span data-ttu-id="a8dcf-805">`<GUID>`&ndash; Identyfikator GUID wygenerowany przez dewelopera do reprezentowania aplikacji w celach informacyjnych.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-805">`<GUID>` &ndash; A developer-generated GUID to represent the app for informational purposes.</span></span>

   <span data-ttu-id="a8dcf-806">W celach informacyjnych należy przechowywać identyfikator GUID w aplikacji jako tag pakietu:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-806">For reference purposes, store the GUID in the app as a package tag:</span></span>

   * <span data-ttu-id="a8dcf-807">W programie Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-807">In Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-808">Otwórz właściwości projektu aplikacji, klikając prawym przyciskiem myszy aplikację w **Eksploratorze rozwiązań** i wybierając pozycję **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-808">Open the app's project properties by right-clicking on the app in **Solution Explorer** and selecting **Properties**.</span></span>
     * <span data-ttu-id="a8dcf-809">Wybierz kartę **Pakiet.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-809">Select the **Package** tab.</span></span>
     * <span data-ttu-id="a8dcf-810">Wprowadź identyfikator GUID utworzony w polu **Znaczniki.**</span><span class="sxs-lookup"><span data-stu-id="a8dcf-810">Enter the GUID that you created in the **Tags** field.</span></span>
   * <span data-ttu-id="a8dcf-811">Jeśli nie jest używany program Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-811">When not using Visual Studio:</span></span>
     * <span data-ttu-id="a8dcf-812">Otwórz plik projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-812">Open the app's project file.</span></span>
     * <span data-ttu-id="a8dcf-813">Dodaj `<PackageTags>` właściwość do nowej `<PropertyGroup>` lub istniejącej z utworzonym identyfikatorem GUID:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-813">Add a `<PackageTags>` property to a new or existing `<PropertyGroup>` with the GUID that you created:</span></span>

       ```xml
       <PropertyGroup>
         <PackageTags>9412ee86-c21b-4eb8-bd89-f650fbf44931</PackageTags>
       </PropertyGroup>
       ```

   <span data-ttu-id="a8dcf-814">W poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-814">In the following example:</span></span>

   * <span data-ttu-id="a8dcf-815">Lokalny adres IP serwera `10.0.0.4`to .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-815">The local IP address of the server is `10.0.0.4`.</span></span>
   * <span data-ttu-id="a8dcf-816">Generator identyfikatorów GUID `appid` online zapewnia wartość.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-816">An online random GUID generator provides the `appid` value.</span></span>

   ```console
   netsh http add sslcert 
       ipport=10.0.0.4:443 
       certhash=b66ee04419d4ee37464ab8785ff02449980eae10 
       appid="{9412ee86-c21b-4eb8-bd89-f650fbf44931}"
   ```

   <span data-ttu-id="a8dcf-817">Gdy certyfikat jest zarejestrowany, narzędzie `SSL Certificate successfully added`odpowiada za pomocą pliku .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-817">When a certificate is registered, the tool responds with `SSL Certificate successfully added`.</span></span>

   <span data-ttu-id="a8dcf-818">Aby usunąć rejestrację certyfikatu, użyj `delete sslcert` polecenia:</span><span class="sxs-lookup"><span data-stu-id="a8dcf-818">To delete a certificate registration, use the `delete sslcert` command:</span></span>

   ```console
   netsh http delete sslcert ipport=<IP>:<PORT>
   ```

   <span data-ttu-id="a8dcf-819">Dokumentacja referencyjna dla *netsh.exe:*</span><span class="sxs-lookup"><span data-stu-id="a8dcf-819">Reference documentation for *netsh.exe*:</span></span>

   * [<span data-ttu-id="a8dcf-820">Polecenia Netsh dla protokołu transferu hipertekstowego (HTTP)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-820">Netsh Commands for Hypertext Transfer Protocol (HTTP)</span></span>](https://technet.microsoft.com/library/cc725882.aspx)
   * [<span data-ttu-id="a8dcf-821">Ciągi UrlPrefix</span><span class="sxs-lookup"><span data-stu-id="a8dcf-821">UrlPrefix Strings</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364698.aspx)

1. <span data-ttu-id="a8dcf-822">Uruchom aplikację.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-822">Run the app.</span></span>

   <span data-ttu-id="a8dcf-823">Uprawnienia administratora nie są wymagane do uruchamiania aplikacji podczas powiązania z localhost przy użyciu protokołu HTTP (nie HTTPS) z numerem portu większym niż 1024.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-823">Administrator privileges aren't required to run the app when binding to localhost using HTTP (not HTTPS) with a port number greater than 1024.</span></span> <span data-ttu-id="a8dcf-824">W przypadku innych konfiguracji (na przykład przy użyciu lokalnego adresu IP lub powiązania z portem 443) uruchom aplikację z uprawnieniami administratora.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-824">For other configurations (for example, using a local IP address or binding to port 443), run the app with administrator privileges.</span></span>

   <span data-ttu-id="a8dcf-825">Aplikacja odpowiada na publiczny adres IP serwera.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-825">The app responds at the server's public IP address.</span></span> <span data-ttu-id="a8dcf-826">W tym przykładzie serwer jest osiągany z Internetu `104.214.79.47`pod jego publicznym adresem IP .</span><span class="sxs-lookup"><span data-stu-id="a8dcf-826">In this example, the server is reached from the Internet at its public IP address of `104.214.79.47`.</span></span>

   <span data-ttu-id="a8dcf-827">Certyfikat dewelopera jest używany w tym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-827">A development certificate is used in this example.</span></span> <span data-ttu-id="a8dcf-828">Strona ładuje się bezpiecznie po pominięciu ostrzeżenia o niezaufanym certyfikacie przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-828">The page loads securely after bypassing the browser's untrusted certificate warning.</span></span>

   ![Okno przeglądarki z załadowaną stroną Indeks aplikacji](httpsys/_static/browser.png)

## <a name="proxy-server-and-load-balancer-scenarios"></a><span data-ttu-id="a8dcf-830">Scenariusze serwera proxy i modułu równoważenia obciążenia</span><span class="sxs-lookup"><span data-stu-id="a8dcf-830">Proxy server and load balancer scenarios</span></span>

<span data-ttu-id="a8dcf-831">W przypadku aplikacji obsługiwanych przez http.sys, które współdziałają z żądaniami z Internetu lub sieci firmowej, dodatkowa konfiguracja może być wymagana podczas hostowania za serwerami proxy i modułami równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="a8dcf-831">For apps hosted by HTTP.sys that interact with requests from the Internet or a corporate network, additional configuration might be required when hosting behind proxy servers and load balancers.</span></span> <span data-ttu-id="a8dcf-832">Aby uzyskać więcej informacji, zobacz [Konfigurowanie ASP.NET Core do pracy z serwerami proxy i modułami równoważenia obciążenia](xref:host-and-deploy/proxy-load-balancer).</span><span class="sxs-lookup"><span data-stu-id="a8dcf-832">For more information, see [Configure ASP.NET Core to work with proxy servers and load balancers](xref:host-and-deploy/proxy-load-balancer).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a8dcf-833">Zasoby dodatkowe</span><span class="sxs-lookup"><span data-stu-id="a8dcf-833">Additional resources</span></span>

* [<span data-ttu-id="a8dcf-834">Włączanie uwierzytelniania systemu Windows za pomocą protokołu HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="a8dcf-834">Enable Windows Authentication with HTTP.sys</span></span>](xref:security/authentication/windowsauth#httpsys)
* [<span data-ttu-id="a8dcf-835">Interfejs API serwera HTTP</span><span class="sxs-lookup"><span data-stu-id="a8dcf-835">HTTP Server API</span></span>](https://msdn.microsoft.com/library/windows/desktop/aa364510.aspx)
* [<span data-ttu-id="a8dcf-836">repozytorium aspnet/HttpSysServer GitHub (kod źródłowy)</span><span class="sxs-lookup"><span data-stu-id="a8dcf-836">aspnet/HttpSysServer GitHub repository (source code)</span></span>](https://github.com/aspnet/HttpSysServer/)
* [<span data-ttu-id="a8dcf-837">Host</span><span class="sxs-lookup"><span data-stu-id="a8dcf-837">The host</span></span>](xref:fundamentals/index#host)
* <xref:test/troubleshoot>

::: moniker-end
