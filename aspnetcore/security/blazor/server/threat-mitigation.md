---
<span data-ttu-id="9a4f8-101">title: "wskazówki dotyczące łagodzenia zagrożeń dla ASP.NET Core Blazor serwera" autor: Opis: "informacje na temat ograniczania zagrożeń bezpieczeństwa do Blazor aplikacji serwera".</span><span class="sxs-lookup"><span data-stu-id="9a4f8-101">title: 'Threat mitigation guidance for ASP.NET Core Blazor Server' author: description: 'Learn how to mitigate security threats to Blazor Server apps.'</span></span>
<span data-ttu-id="9a4f8-102">monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-102">monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="9a4f8-103">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="9a4f8-103">'Blazor'</span></span>
- <span data-ttu-id="9a4f8-104">'Identity'</span><span class="sxs-lookup"><span data-stu-id="9a4f8-104">'Identity'</span></span>
- <span data-ttu-id="9a4f8-105">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="9a4f8-105">'Let's Encrypt'</span></span>
- <span data-ttu-id="9a4f8-106">'Razor'</span><span class="sxs-lookup"><span data-stu-id="9a4f8-106">'Razor'</span></span>
- <span data-ttu-id="9a4f8-107">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-107">'SignalR' uid:</span></span> 

---
# <a name="threat-mitigation-guidance-for-aspnet-core-blazor-server"></a><span data-ttu-id="9a4f8-108">Wskazówki dotyczące ograniczania zagrożeń dla Blazor serwera ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="9a4f8-108">Threat mitigation guidance for ASP.NET Core Blazor Server</span></span>

<span data-ttu-id="9a4f8-109">Autor [Javier Calvarro Nelson](https://github.com/javiercn)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-109">By [Javier Calvarro Nelson](https://github.com/javiercn)</span></span>

Blazor<span data-ttu-id="9a4f8-110">Aplikacje serwera przyjmują model przetwarzania danych *stanowych* , w którym serwer i klient utrzymują długoterminową relację.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-110"> Server apps adopt a *stateful* data processing model, where the server and client maintain a long-lived relationship.</span></span> <span data-ttu-id="9a4f8-111">Stan trwały jest obsługiwany przez [obwód](xref:blazor/state-management), który może obejmować połączenia, które są również potencjalnie długotrwałe.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-111">The persistent state is maintained by a [circuit](xref:blazor/state-management), which can span connections that are also potentially long-lived.</span></span>

<span data-ttu-id="9a4f8-112">Gdy użytkownik odwiedza Blazor lokację serwera, serwer tworzy obwód w pamięci serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-112">When a user visits a Blazor Server site, the server creates a circuit in the server's memory.</span></span> <span data-ttu-id="9a4f8-113">Obwód wskazuje przeglądarce zawartość do renderowania i reagowanie na zdarzenia, na przykład gdy użytkownik wybierze przycisk w interfejsie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-113">The circuit indicates to the browser what content to render and responds to events, such as when the user selects a button in the UI.</span></span> <span data-ttu-id="9a4f8-114">Aby wykonać te czynności, obwód wywołuje funkcje języka JavaScript w przeglądarce użytkownika i metody .NET na serwerze.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-114">To perform these actions, a circuit invokes JavaScript functions in the user's browser and .NET methods on the server.</span></span> <span data-ttu-id="9a4f8-115">Ta dwukierunkowa interakcja oparta na języku JavaScript jest nazywana JavaScript międzyoperacyjną [(js Interop)](xref:blazor/call-javascript-from-dotnet).</span><span class="sxs-lookup"><span data-stu-id="9a4f8-115">This two-way JavaScript-based interaction is referred to as [JavaScript interop (JS interop)](xref:blazor/call-javascript-from-dotnet).</span></span>

<span data-ttu-id="9a4f8-116">Ponieważ program JS Interop działa za pośrednictwem Internetu, a klient korzysta z przeglądarki zdalnej, Blazor aplikacje serwera udostępniają większość zagadnień związanych z zabezpieczeniami aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-116">Because JS interop occurs over the Internet and the client uses a remote browser, Blazor Server apps share most web app security concerns.</span></span> <span data-ttu-id="9a4f8-117">W tym temacie opisano typowe zagrożenia dla Blazor aplikacji serwerowych i przedstawiono wskazówki dotyczące łagodzenia zagrożeń ukierunkowane na aplikacje internetowe.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-117">This topic describes common threats to Blazor Server apps and provides threat mitigation guidance focused on Internet-facing apps.</span></span>

<span data-ttu-id="9a4f8-118">W środowiskach z ograniczeniami, takimi jak wewnątrz sieci firmowej lub intranetów, niektóre wskazówki dotyczące ograniczenia są następujące:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-118">In constrained environments, such as inside corporate networks or intranets, some of the mitigation guidance either:</span></span>

* <span data-ttu-id="9a4f8-119">Nie dotyczy w ograniczonym środowisku.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-119">Doesn't apply in the constrained environment.</span></span>
* <span data-ttu-id="9a4f8-120">Nie jest kosztem wdrożenia, ponieważ zagrożenie bezpieczeństwa jest niskie w ograniczonym środowisku.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-120">Isn't worth the cost to implement because the security risk is low in a constrained environment.</span></span>

## <a name="blazor-and-shared-state"></a>Blazor<span data-ttu-id="9a4f8-121">i udostępniony stan</span><span class="sxs-lookup"><span data-stu-id="9a4f8-121"> and shared state</span></span>

[!INCLUDE[](~/includes/blazor-security/blazor-shared-state.md)]

## <a name="resource-exhaustion"></a><span data-ttu-id="9a4f8-122">Wyczerpanie zasobów</span><span class="sxs-lookup"><span data-stu-id="9a4f8-122">Resource exhaustion</span></span>

<span data-ttu-id="9a4f8-123">Wyczerpanie zasobów może wystąpić, gdy klient współdziała z serwerem i powoduje, że serwer zużywa nadmierne zasoby.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-123">Resource exhaustion can occur when a client interacts with the server and causes the server to consume excessive resources.</span></span> <span data-ttu-id="9a4f8-124">Nadmierne wykorzystanie zasobów dotyczy głównie:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-124">Excessive resource consumption primarily affects:</span></span>

* [<span data-ttu-id="9a4f8-125">Procesor CPU</span><span class="sxs-lookup"><span data-stu-id="9a4f8-125">CPU</span></span>](#cpu)
* [<span data-ttu-id="9a4f8-126">Memory (Pamięć)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-126">Memory</span></span>](#memory)
* [<span data-ttu-id="9a4f8-127">Połączenia klienta</span><span class="sxs-lookup"><span data-stu-id="9a4f8-127">Client connections</span></span>](#client-connections)

<span data-ttu-id="9a4f8-128">Ataki typu "odmowa usługi" (DoS) zwykle poszukują wyczerpania zasobów aplikacji lub serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-128">Denial of service (DoS) attacks usually seek to exhaust an app or server's resources.</span></span> <span data-ttu-id="9a4f8-129">Jednak wyczerpanie zasobów nie musi być przyczyną ataku w systemie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-129">However, resource exhaustion isn't necessarily the result of an attack on the system.</span></span> <span data-ttu-id="9a4f8-130">Na przykład ograniczone zasoby mogą być wyczerpane ze względu na wysokie zapotrzebowanie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-130">For example, finite resources can be exhausted due to high user demand.</span></span> <span data-ttu-id="9a4f8-131">System DoS został szczegółowo omówiony w sekcji [ataki typu "odmowa usługi" (DOS)](#denial-of-service-dos-attacks) .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-131">DoS is covered further in the [Denial of service (DoS) attacks](#denial-of-service-dos-attacks) section.</span></span>

<span data-ttu-id="9a4f8-132">Zasoby zewnętrzne dotyczące Blazor platformy, takie jak bazy danych i dojścia do plików (używane do odczytu i zapisu plików) mogą również powodować wyczerpanie zasobów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-132">Resources external to the Blazor framework, such as databases and file handles (used to read and write files), may also experience resource exhaustion.</span></span> <span data-ttu-id="9a4f8-133">Aby uzyskać więcej informacji, zobacz <xref:performance/performance-best-practices>.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-133">For more information, see <xref:performance/performance-best-practices>.</span></span>

### <a name="cpu"></a><span data-ttu-id="9a4f8-134">Procesor CPU</span><span class="sxs-lookup"><span data-stu-id="9a4f8-134">CPU</span></span>

<span data-ttu-id="9a4f8-135">Wyczerpanie procesora może wystąpić, gdy jeden lub więcej klientów wymusza intensywną realizację procesora CPU przez serwer.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-135">CPU exhaustion can occur when one or more clients force the server to perform intensive CPU work.</span></span>

<span data-ttu-id="9a4f8-136">Rozważmy na przykład Blazor aplikację serwerową, która oblicza *numer Fibonnacci*.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-136">For example, consider a Blazor Server app that calculates a *Fibonnacci number*.</span></span> <span data-ttu-id="9a4f8-137">Numer Fibonnacci jest tworzony z sekwencji Fibonnacci, gdzie każda liczba w sekwencji jest sumą dwóch poprzednich numerów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-137">A Fibonnacci number is produced from a Fibonnacci sequence, where each number in the sequence is the sum of the two preceding numbers.</span></span> <span data-ttu-id="9a4f8-138">Ilość pracy wymaganej do osiągnięcia odpowiedzi zależy od długości sekwencji i rozmiaru wartości początkowej.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-138">The amount of work required to reach the answer depends on the length of the sequence and the size of the initial value.</span></span> <span data-ttu-id="9a4f8-139">Jeśli aplikacja nie nakłada limitów na żądanie klienta, obliczenia intensywnie korzystające z procesora CPU mogą wzniżyć czas procesora i zmniejszyć wydajność innych zadań.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-139">If the app doesn't place limits on a client's request, the CPU-intensive calculations may dominate the CPU's time and diminish the performance of other tasks.</span></span> <span data-ttu-id="9a4f8-140">Nadmierne zużycie zasobów to wpływ na dostępność.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-140">Excessive resource consumption is a security concern impacting availability.</span></span>

<span data-ttu-id="9a4f8-141">Wykorzystanie procesora CPU jest problemem w przypadku wszystkich aplikacji publicznych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-141">CPU exhaustion is a concern for all public-facing apps.</span></span> <span data-ttu-id="9a4f8-142">W zwykłych aplikacjach sieci Web, żądania i połączenia przekroczą limit czasu jako zabezpieczenie, ale Blazor aplikacje serwera nie zapewniają tych samych zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-142">In regular web apps, requests and connections time out as a safeguard, but Blazor Server apps don't provide the same safeguards.</span></span> Blazor<span data-ttu-id="9a4f8-143">Aplikacje serwera muszą zawierać odpowiednie sprawdzenia i limity przed wykonaniem czasochłonnych zadań intensywnie korzystających z procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-143"> Server apps must include appropriate checks and limits before performing potentially CPU-intensive work.</span></span>

### <a name="memory"></a><span data-ttu-id="9a4f8-144">Memory (Pamięć)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-144">Memory</span></span>

<span data-ttu-id="9a4f8-145">Wyczerpanie pamięci może wystąpić, gdy co najmniej jeden klient wymusić zużywanie dużej ilości pamięci na serwerze.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-145">Memory exhaustion can occur when one or more clients force the server to consume a large amount of memory.</span></span>

<span data-ttu-id="9a4f8-146">Rozważmy na przykład Blazor aplikację po stronie serwera ze składnikiem akceptującym i wyświetlającym listę elementów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-146">For example, consider a Blazor-server side app with a component that accepts and displays a list of items.</span></span> <span data-ttu-id="9a4f8-147">Jeśli Blazor aplikacja nie nakłada limitów na liczbę dozwolonych elementów lub liczbę elementów, które zostały wyrenderowane z powrotem do klienta, przetwarzanie i renderowanie intensywnie korzystające z pamięci może wznieść ilość pamięci serwera do punktu, w którym pogorszy się wydajność serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-147">If the Blazor app doesn't place limits on the number of items allowed or the number of items rendered back to the client, the memory-intensive processing and rendering may dominate the server's memory to the point where performance of the server suffers.</span></span> <span data-ttu-id="9a4f8-148">Serwer może ulec awarii lub wolno do punktu, w którym wystąpiła awaria.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-148">The server may crash or slow to the point that it appears to have crashed.</span></span>

<span data-ttu-id="9a4f8-149">Rozważmy następujący scenariusz utrzymywania i wyświetlania listy elementów odnoszących się do potencjalnego scenariusza wyczerpania pamięci na serwerze:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-149">Consider the following scenario for maintaining and displaying a list of items that pertain to a potential memory exhaustion scenario on the server:</span></span>

* <span data-ttu-id="9a4f8-150">Elementy w `List<MyItem>` właściwości lub polu używają pamięci serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-150">The items in a `List<MyItem>` property or field use the server's memory.</span></span> <span data-ttu-id="9a4f8-151">Jeśli aplikacja zezwala na niepowiązaną listę elementów, istnieje ryzyko, że serwer kończy Brak pamięci.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-151">If the app allows the list of items to grow unbounded, there's a risk of the server running out of memory.</span></span> <span data-ttu-id="9a4f8-152">Brak pamięci powoduje, że bieżąca sesja na zakończenie (awaria) i wszystkie sesje współbieżne w tym wystąpieniu serwera odbierają wyjątek braku pamięci.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-152">Running out of memory causes the current session to end (crash) and all of the concurrent sessions in that server instance receive an out-of-memory exception.</span></span> <span data-ttu-id="9a4f8-153">Aby zapobiec wystąpieniu tego scenariusza, aplikacja musi używać struktury danych, która nakłada limit elementów na współbieżnych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-153">To prevent this scenario from occurring, the app must use a data structure that imposes an item limit on concurrent users.</span></span>
* <span data-ttu-id="9a4f8-154">Jeśli schemat stronicowania nie jest używany do renderowania, serwer używa dodatkowej pamięci dla obiektów, które nie są widoczne w interfejsie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-154">If a paging scheme isn't used for rendering, the server uses additional memory for objects that aren't visible in the UI.</span></span> <span data-ttu-id="9a4f8-155">Bez limitu liczby elementów, wymagania dotyczące pamięci mogą wyczerpać dostępną pamięć serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-155">Without a limit on the number of items, memory demands may exhaust the available server memory.</span></span> <span data-ttu-id="9a4f8-156">Aby uniknąć tego scenariusza, należy użyć jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-156">To prevent this scenario, use one of the following approaches:</span></span>
  * <span data-ttu-id="9a4f8-157">Użyj list z podziałem na strony podczas renderowania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-157">Use paginated lists when rendering.</span></span>
  * <span data-ttu-id="9a4f8-158">Wyświetlić tylko pierwsze 100 do 1 000 elementów i wymagać od użytkownika wprowadzenia kryteriów wyszukiwania, aby znaleźć elementy poza wyświetlanymi elementami.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-158">Only display the first 100 to 1,000 items and require the user to enter search criteria to find items beyond the items displayed.</span></span>
  * <span data-ttu-id="9a4f8-159">Aby zapoznać się z bardziej zaawansowanym scenariuszem renderowania, zaimplementuj listy lub siatki obsługujące *wirtualizację*.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-159">For a more advanced rendering scenario, implement lists or grids that support *virtualization*.</span></span> <span data-ttu-id="9a4f8-160">Przy użyciu wirtualizacji program wyświetla tylko podzbiór elementów, które są obecnie widoczne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-160">Using virtualization, lists only render a subset of items currently visible to the user.</span></span> <span data-ttu-id="9a4f8-161">Gdy użytkownik współdziała z paskiem przewijania w interfejsie użytkownika, składnik renderuje tylko te elementy, które są wymagane do wyświetlenia.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-161">When the user interacts with the scrollbar in the UI, the component renders only those items required for display.</span></span> <span data-ttu-id="9a4f8-162">Elementy, które nie są obecnie wymagane do wyświetlania, mogą być przechowywane w magazynie pomocniczym, co jest idealnym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-162">The items that aren't currently required for display can be held in secondary storage, which is the ideal approach.</span></span> <span data-ttu-id="9a4f8-163">Niewyświetlane elementy można również przechowywać w pamięci, co jest mniej idealne.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-163">Undisplayed items can also be held in memory, which is less ideal.</span></span>

Blazor<span data-ttu-id="9a4f8-164">Aplikacje serwera oferują podobny model programowania dla innych struktur interfejsu użytkownika dla aplikacji stanowych, takich jak WPF, Windows Forms lub Blazor webassembly.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-164"> Server apps offer a similar programming model to other UI frameworks for stateful apps, such as WPF, Windows Forms, or Blazor WebAssembly.</span></span> <span data-ttu-id="9a4f8-165">Główną różnicą jest to, że w kilku strukturach interfejsu użytkownika używana przez aplikację pamięć należy do klienta i ma wpływ tylko na danego klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-165">The main difference is that in several of the UI frameworks the memory consumed by the app belongs to the client and only affects that individual client.</span></span> <span data-ttu-id="9a4f8-166">Na przykład Blazor aplikacja webassembly działa wyłącznie na kliencie i używa zasobów pamięci klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-166">For example, a Blazor WebAssembly app runs entirely on the client and only uses client memory resources.</span></span> <span data-ttu-id="9a4f8-167">W Blazor scenariuszu serwera ilość pamięci używanej przez aplikację należy do serwera i jest współdzielona między klientami w wystąpieniu serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-167">In the Blazor Server scenario, the memory consumed by the app belongs to the server and is shared among clients on the server instance.</span></span>

<span data-ttu-id="9a4f8-168">Wymagania dotyczące pamięci po stronie serwera są rozważenia dla wszystkich Blazor aplikacji serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-168">Server-side memory demands are a consideration for all Blazor Server apps.</span></span> <span data-ttu-id="9a4f8-169">Większość aplikacji sieci Web jest jednak bezstanowa, a pamięć użyta podczas przetwarzania żądania jest wydawana po zwróceniu odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-169">However, most web apps are stateless, and the memory used while processing a request is released when the response is returned.</span></span> <span data-ttu-id="9a4f8-170">Zgodnie z ogólnym zaleceniem nie należy zezwalać klientom na przydzielanie nieograniczonej ilości pamięci, tak jak w przypadku innych aplikacji po stronie serwera, które utrzymują połączenia klientów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-170">As a general recommendation, don't permit clients to allocate an unbound amount of memory as in any other server-side app that persists client connections.</span></span> <span data-ttu-id="9a4f8-171">Ilość pamięci zużywanej przez Blazor aplikację serwera będzie trwała dłużej niż pojedyncze żądanie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-171">The memory consumed by a Blazor Server app persists for a longer time than a single request.</span></span>

> [!NOTE]
> <span data-ttu-id="9a4f8-172">Podczas programowania można użyć profilera lub przechwycić ślad w celu oceny wymagań pamięci klientów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-172">During development, a profiler can be used or a trace captured to assess memory demands of clients.</span></span> <span data-ttu-id="9a4f8-173">Program profilujący lub ślad nie będzie przechwytywać pamięci przyprzypisanej do określonego klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-173">A profiler or trace won't capture the memory allocated to a specific client.</span></span> <span data-ttu-id="9a4f8-174">Aby przechwycić wykorzystanie pamięci przez określonego klienta podczas tworzenia, Przechwyć zrzut i sprawdź zapotrzebowanie na pamięć wszystkich obiektów, które zostały umieszczone w obwodzie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-174">To capture the memory use of a specific client during development, capture a dump and examine the memory demand of all the objects rooted at a user's circuit.</span></span>

### <a name="client-connections"></a><span data-ttu-id="9a4f8-175">Połączenia klienta</span><span class="sxs-lookup"><span data-stu-id="9a4f8-175">Client connections</span></span>

<span data-ttu-id="9a4f8-176">Wyczerpanie połączenia może wystąpić, gdy co najmniej jeden klient otwiera zbyt wiele równoczesnych połączeń z serwerem, uniemożliwiając innym klientom nawiązywanie nowych połączeń.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-176">Connection exhaustion can occur when one or more clients open too many concurrent connections to the server, preventing other clients from establishing new connections.</span></span>

Blazor<span data-ttu-id="9a4f8-177">Klienci nawiązują pojedyncze połączenie dla każdej sesji i przechowują połączenie tak długo, jak okno przeglądarki jest otwarte.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-177"> clients establish a single connection per session and keep the connection open for as long as the browser window is open.</span></span> <span data-ttu-id="9a4f8-178">Wymagania na serwerze utrzymywania wszystkich połączeń nie są specyficzne dla Blazor aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-178">The demands on the server of maintaining all of the connections isn't specific to Blazor apps.</span></span> <span data-ttu-id="9a4f8-179">Ze względu na trwały charakter połączeń i stanowy charakter Blazor aplikacji serwerowych, wyczerpanie połączenia jest bardziej ryzykowne dla dostępności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-179">Given the persistent nature of the connections and the stateful nature of Blazor Server apps, connection exhaustion is a greater risk to availability of the app.</span></span>

<span data-ttu-id="9a4f8-180">Domyślnie nie ma żadnego limitu liczby połączeń na użytkownika dla Blazor aplikacji serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-180">By default, there's no limit on the number of connections per user for a Blazor Server app.</span></span> <span data-ttu-id="9a4f8-181">Jeśli aplikacja wymaga limitu połączeń, należy wykonać co najmniej jedną z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-181">If the app requires a connection limit, take one or more of the following approaches:</span></span>

* <span data-ttu-id="9a4f8-182">Wymaganie uwierzytelniania, które w sposób naturalny ogranicza możliwość łączenia się z aplikacją przez nieautoryzowanych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-182">Require authentication, which naturally limits the ability of unauthorized users to connect to the app.</span></span> <span data-ttu-id="9a4f8-183">Aby ten scenariusz był skuteczny, użytkownicy muszą mieć możliwość zapobiegania aprowizacji nowych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-183">For this scenario to be effective, users must be prevented from provisioning new users at will.</span></span>
* <span data-ttu-id="9a4f8-184">Ogranicz liczbę połączeń na użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-184">Limit the number of connections per user.</span></span> <span data-ttu-id="9a4f8-185">Ograniczenia połączeń można wykonać przy użyciu poniższych metod.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-185">Limiting connections can be accomplished via the following approaches.</span></span> <span data-ttu-id="9a4f8-186">Należy zachować ostrożność, aby zezwolić uprawnionym użytkownikom na dostęp do aplikacji (na przykład w przypadku ustanowienia limitu połączeń na podstawie adresu IP klienta).</span><span class="sxs-lookup"><span data-stu-id="9a4f8-186">Exercise care to allow legitimate users to access the app (for example, when a connection limit is established based on the client's IP address).</span></span>
  * <span data-ttu-id="9a4f8-187">Na poziomie aplikacji:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-187">At the app level:</span></span>
    * <span data-ttu-id="9a4f8-188">Rozszerzalność routingu punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-188">Endpoint routing extensibility.</span></span>
    * <span data-ttu-id="9a4f8-189">Wymagaj uwierzytelniania w celu nawiązania połączenia z aplikacją i śledzenia aktywnych sesji na użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-189">Require authentication to connect to the app and keep track of the active sessions per user.</span></span>
    * <span data-ttu-id="9a4f8-190">Odrzuć nowe sesje po osiągnięciu limitu.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-190">Reject new sessions upon reaching a limit.</span></span>
    * <span data-ttu-id="9a4f8-191">Połączenia protokołu WebSocket serwera proxy z aplikacją za pomocą serwera proxy, takiego jak [ SignalR usługa platformy Azure](/azure/azure-signalr/signalr-overview) , która umożliwia multiplekser połączeń klientów z aplikacją.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-191">Proxy WebSocket connections to an app through the use of a proxy, such as the [Azure SignalR Service](/azure/azure-signalr/signalr-overview) that multiplexes connections from clients to an app.</span></span> <span data-ttu-id="9a4f8-192">Zapewnia to aplikacji o większej pojemności połączenia niż może nawiązać pojedynczy klient, co uniemożliwia klientowi wyczerpanie połączeń z serwerem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-192">This provides an app with greater connection capacity than a single client can establish, preventing a client from exhausting the connections to the server.</span></span>
  * <span data-ttu-id="9a4f8-193">Na poziomie serwera: Użyj serwera proxy/bramy przed aplikacją.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-193">At the server level: Use a proxy/gateway in front of the app.</span></span> <span data-ttu-id="9a4f8-194">Na przykład, [frontony platformy Azure](/azure/frontdoor/front-door-overview) umożliwiają definiowanie i monitorowanie globalnego routingu ruchu internetowego do aplikacji oraz zarządzanie nim.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-194">For example, [Azure Front Door](/azure/frontdoor/front-door-overview) enables you to define, manage, and monitor the global routing of web traffic to an app.</span></span>

## <a name="denial-of-service-dos-attacks"></a><span data-ttu-id="9a4f8-195">Ataki typu "odmowa usługi" (DoS)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-195">Denial of service (DoS) attacks</span></span>

<span data-ttu-id="9a4f8-196">Ataki typu "odmowa usługi" (DoS) obejmują klienta, który powoduje, że serwer wyczerpuje jeden lub więcej zasobów, dzięki czemu aplikacja jest niedostępna.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-196">Denial of service (DoS) attacks involve a client causing the server to exhaust one or more of its resources making the app unavailable.</span></span> Blazor<span data-ttu-id="9a4f8-197">Aplikacje serwera obejmują pewne limity domyślne i polegają na innych ASP.NET Core i SignalR limitach ochrony przed atakami systemu DOS ustawionymi w systemie <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions> .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-197"> Server apps include some default limits and rely on other ASP.NET Core and SignalR limits to protect against DoS attacks that are set on <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions>.</span></span>

| Blazor<span data-ttu-id="9a4f8-198">Limit aplikacji serwera</span><span class="sxs-lookup"><span data-stu-id="9a4f8-198"> Server app limit</span></span> | <span data-ttu-id="9a4f8-199">Opis</span><span class="sxs-lookup"><span data-stu-id="9a4f8-199">Description</span></span> | <span data-ttu-id="9a4f8-200">Domyślne</span><span class="sxs-lookup"><span data-stu-id="9a4f8-200">Default</span></span> |
| --- | --- | --- |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DisconnectedCircuitMaxRetained> | <span data-ttu-id="9a4f8-201">Maksymalna liczba odłączonych obwodów, które dany serwer przechowuje w pamięci w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-201">Maximum number of disconnected circuits that a given server holds in memory at a time.</span></span> | <span data-ttu-id="9a4f8-202">100</span><span class="sxs-lookup"><span data-stu-id="9a4f8-202">100</span></span> |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DisconnectedCircuitRetentionPeriod> | <span data-ttu-id="9a4f8-203">Maksymalny czas przechowywania połączonego obwodu w pamięci przed jego usunięciem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-203">Maximum amount of time a disconnected circuit is held in memory before being torn down.</span></span> | <span data-ttu-id="9a4f8-204">3 minuty</span><span class="sxs-lookup"><span data-stu-id="9a4f8-204">3 minutes</span></span> |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout> | <span data-ttu-id="9a4f8-205">Maksymalny czas oczekiwania serwera przed upływem limitu czasu asynchronicznego wywołania funkcji JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-205">Maximum amount of time the server waits before timing out an asynchronous JavaScript function invocation.</span></span> | <span data-ttu-id="9a4f8-206">1 minuta</span><span class="sxs-lookup"><span data-stu-id="9a4f8-206">1 minute</span></span> |
| <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.MaxBufferedUnacknowledgedRenderBatches> | <span data-ttu-id="9a4f8-207">Maksymalna liczba niepotwierdzonych partii renderowania, które serwer przechowuje w pamięci na obwód w danym momencie do obsługi niezawodnego ponownego łączenia.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-207">Maximum number of unacknowledged render batches the server keeps in memory per circuit at a given time to support robust reconnection.</span></span> <span data-ttu-id="9a4f8-208">Po osiągnięciu limitu serwer przestaje tworzyć nowe partie renderowania do momentu potwierdzenia co najmniej jednej partii przez klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-208">After reaching the limit, the server stops producing new render batches until one or more batches have been acknowledged by the client.</span></span> | <span data-ttu-id="9a4f8-209">10</span><span class="sxs-lookup"><span data-stu-id="9a4f8-209">10</span></span> |

<span data-ttu-id="9a4f8-210">Ustaw maksymalny rozmiar komunikatu dla pojedynczego przychodzącego komunikatu z centrum <xref:Microsoft.AspNetCore.SignalR.HubConnectionContextOptions> .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-210">Set the maximum message size of a single incoming hub message with <xref:Microsoft.AspNetCore.SignalR.HubConnectionContextOptions>.</span></span>

| SignalR<span data-ttu-id="9a4f8-211">i limit ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="9a4f8-211"> and ASP.NET Core limit</span></span> | <span data-ttu-id="9a4f8-212">Opis</span><span class="sxs-lookup"><span data-stu-id="9a4f8-212">Description</span></span> | <span data-ttu-id="9a4f8-213">Domyślne</span><span class="sxs-lookup"><span data-stu-id="9a4f8-213">Default</span></span> |
| --- | --- | --- |
| <xref:Microsoft.AspNetCore.SignalR.HubConnectionContextOptions.MaximumReceiveMessageSize?displayProperty=nameWithType> | <span data-ttu-id="9a4f8-214">Rozmiar wiadomości dla pojedynczej wiadomości.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-214">Message size for an individual message.</span></span> | <span data-ttu-id="9a4f8-215">32 KB</span><span class="sxs-lookup"><span data-stu-id="9a4f8-215">32 KB</span></span> |

## <a name="interactions-with-the-browser-client"></a><span data-ttu-id="9a4f8-216">Interakcje z przeglądarką (klient)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-216">Interactions with the browser (client)</span></span>

<span data-ttu-id="9a4f8-217">Klient współdziała z serwerem za pomocą wysyłania zdarzeń międzyoperacyjnych w języku JS i uzupełniania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-217">A client interacts with the server through JS interop event dispatching and render completion.</span></span> <span data-ttu-id="9a4f8-218">Komunikacja międzyoperacyjna JS między językami JavaScript i .NET jest taka sama:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-218">JS interop communication goes both ways between JavaScript and .NET:</span></span>

* <span data-ttu-id="9a4f8-219">Zdarzenia przeglądarki są wysyłane z klienta do serwera w sposób asynchroniczny.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-219">Browser events are dispatched from the client to the server in an asynchronous fashion.</span></span>
* <span data-ttu-id="9a4f8-220">Serwer odpowiada asynchronicznie na odwzorowanie interfejsu użytkownika w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-220">The server responds asynchronously rerendering the UI as necessary.</span></span>

### <a name="javascript-functions-invoked-from-net"></a><span data-ttu-id="9a4f8-221">Funkcje języka JavaScript wywoływane z platformy .NET</span><span class="sxs-lookup"><span data-stu-id="9a4f8-221">JavaScript functions invoked from .NET</span></span>

<span data-ttu-id="9a4f8-222">Dla wywołań z metod .NET do języka JavaScript:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-222">For calls from .NET methods to JavaScript:</span></span>

* <span data-ttu-id="9a4f8-223">Wszystkie wywołania mają konfigurowalny limit czasu, po którym kończą się niepowodzeniem, zwracając <xref:System.OperationCanceledException> do obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-223">All invocations have a configurable timeout after which they fail, returning a <xref:System.OperationCanceledException> to the caller.</span></span>
  * <span data-ttu-id="9a4f8-224">Istnieje domyślny limit czasu dla wywołań ( <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType> ) o jednej minucie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-224">There's a default timeout for the calls (<xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType>) of one minute.</span></span> <span data-ttu-id="9a4f8-225">Aby skonfigurować ten limit, zobacz <xref:blazor/call-javascript-from-dotnet#harden-js-interop-calls> .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-225">To configure this limit, see <xref:blazor/call-javascript-from-dotnet#harden-js-interop-calls>.</span></span>
  * <span data-ttu-id="9a4f8-226">Można podać token anulowania, aby kontrolować anulowanie dla każdego wywołania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-226">A cancellation token can be provided to control the cancellation on a per-call basis.</span></span> <span data-ttu-id="9a4f8-227">Należy polegać na domyślnym limicie czasu wywołań, gdy jest to możliwe, oraz o każdym wywołaniu klienta w przypadku podanego tokenu anulowania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-227">Rely on the default call timeout where possible and time-bound any call to the client if a cancellation token is provided.</span></span>
* <span data-ttu-id="9a4f8-228">Nie można zaufać wyniku wywołania języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-228">The result of a JavaScript call can't be trusted.</span></span> <span data-ttu-id="9a4f8-229">BlazorKlient aplikacji uruchomiony w przeglądarce szuka funkcji języka JavaScript do wywołania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-229">The Blazor app client running in the browser searches for the JavaScript function to invoke.</span></span> <span data-ttu-id="9a4f8-230">Funkcja jest wywoływana, a wynik lub błąd jest generowany.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-230">The function is invoked, and either the result or an error is produced.</span></span> <span data-ttu-id="9a4f8-231">Złośliwy klient może próbować:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-231">A malicious client can attempt to:</span></span>
  * <span data-ttu-id="9a4f8-232">Przyczyna problemu w aplikacji przez zwrócenie błędu z funkcji JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-232">Cause an issue in the app by returning an error from the JavaScript function.</span></span>
  * <span data-ttu-id="9a4f8-233">Wywołują niezamierzone zachowanie na serwerze, zwracając nieoczekiwany wynik z funkcji języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-233">Induce an unintended behavior on the server by returning an unexpected result from the JavaScript function.</span></span>

<span data-ttu-id="9a4f8-234">Wykonaj następujące środki ostrożności, aby zabezpieczyć się przed poprzednimi scenariuszami:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-234">Take the following precautions to guard against the preceding scenarios:</span></span>

* <span data-ttu-id="9a4f8-235">Zawijaj wywołania programu JS Interop w instrukcjach [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) , aby uwzględnić błędy, które mogą wystąpić podczas wywołań.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-235">Wrap JS interop calls within [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statements to account for errors that might occur during the invocations.</span></span> <span data-ttu-id="9a4f8-236">Aby uzyskać więcej informacji, zobacz <xref:blazor/handle-errors#javascript-interop>.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-236">For more information, see <xref:blazor/handle-errors#javascript-interop>.</span></span>
* <span data-ttu-id="9a4f8-237">Sprawdź poprawność danych zwróconych przez wywołania międzyoperacyjności JS, w tym komunikaty o błędach, przed podjęciem jakiejkolwiek akcji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-237">Validate data returned from JS interop invocations, including error messages, before taking any action.</span></span>

### <a name="net-methods-invoked-from-the-browser"></a><span data-ttu-id="9a4f8-238">Metody .NET wywoływane z przeglądarki</span><span class="sxs-lookup"><span data-stu-id="9a4f8-238">.NET methods invoked from the browser</span></span>

<span data-ttu-id="9a4f8-239">Nie ufaj wywołań z języka JavaScript do metod .NET.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-239">Don't trust calls from JavaScript to .NET methods.</span></span> <span data-ttu-id="9a4f8-240">Gdy metoda .NET jest narażona na język JavaScript, należy rozważyć sposób wywołania metody .NET:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-240">When a .NET method is exposed to JavaScript, consider how the .NET method is invoked:</span></span>

* <span data-ttu-id="9a4f8-241">Traktuj każdą metodę .NET uwidocznioną w języku JavaScript tak jak w przypadku publicznego punktu końcowego do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-241">Treat any .NET method exposed to JavaScript as you would a public endpoint to the app.</span></span>
  * <span data-ttu-id="9a4f8-242">Sprawdź poprawność danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-242">Validate input.</span></span>
    * <span data-ttu-id="9a4f8-243">Upewnij się, że wartości są w zakresie oczekiwanych zakresów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-243">Ensure that values are within expected ranges.</span></span>
    * <span data-ttu-id="9a4f8-244">Upewnij się, że użytkownik ma uprawnienia do wykonywania żądanej akcji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-244">Ensure that the user has permission to perform the action requested.</span></span>
  * <span data-ttu-id="9a4f8-245">Nie przydzielaj nadmiernej ilości zasobów w ramach wywołania metody .NET.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-245">Don't allocate an excessive quantity of resources as part of the .NET method invocation.</span></span> <span data-ttu-id="9a4f8-246">Na przykład należy wykonać sprawdzenia i wprowadzić limity użycia procesora CPU i pamięci.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-246">For example, perform checks and place limits on CPU and memory use.</span></span>
  * <span data-ttu-id="9a4f8-247">Należy wziąć pod uwagę, że metody static i instance mogą być udostępniane klientom JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-247">Take into account that static and instance methods can be exposed to JavaScript clients.</span></span> <span data-ttu-id="9a4f8-248">Unikaj udostępniania stanu między sesjami, chyba że projekt nie wywołuje stanu udostępniania z odpowiednimi ograniczeniami.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-248">Avoid sharing state across sessions unless the design calls for sharing state with appropriate constraints.</span></span>
    * <span data-ttu-id="9a4f8-249">W przypadku metod wystąpienia uwidocznionych za pomocą `DotNetReference` obiektów, które są pierwotnie tworzone za pomocą iniekcji zależności (di), obiekty powinny być zarejestrowane jako obiekty z zakresem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-249">For instance methods exposed through `DotNetReference` objects that are originally created through dependency injection (DI), the objects should be registered as scoped objects.</span></span> <span data-ttu-id="9a4f8-250">Dotyczy to wszystkich usług DI, które są Blazor używane przez aplikację serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-250">This applies to any DI service that the Blazor Server app uses.</span></span>
    * <span data-ttu-id="9a4f8-251">W przypadku metod statycznych należy unikać ustanawiania stanu, którego nie można ograniczyć do klienta, o ile aplikacja nie jest jawnie udostępniana przez wszystkie użytkowników w wystąpieniu serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-251">For static methods, avoid establishing state that can't be scoped to the client unless the app is explicitly sharing state by-design across all users on a server instance.</span></span>
  * <span data-ttu-id="9a4f8-252">Należy unikać przekazywania danych dostarczonych przez użytkownika w parametrach do wywołań JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-252">Avoid passing user-supplied data in parameters to JavaScript calls.</span></span> <span data-ttu-id="9a4f8-253">Jeśli przekazywanie danych w parametrach jest absolutnie wymagane, należy się upewnić, że kod JavaScript obsługuje przekazywanie danych bez wprowadzania luk w zabezpieczeniach [skryptów między lokacjami (XSS)](#cross-site-scripting-xss) .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-253">If passing data in parameters is absolutely required, ensure that the JavaScript code handles passing the data without introducing [Cross-site scripting (XSS)](#cross-site-scripting-xss) vulnerabilities.</span></span> <span data-ttu-id="9a4f8-254">Na przykład nie zapisuj danych dostarczonych przez użytkownika do Document Object Model (DOM) przez ustawienie `innerHTML` właściwości elementu.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-254">For example, don't write user-supplied data to the Document Object Model (DOM) by setting the `innerHTML` property of an element.</span></span> <span data-ttu-id="9a4f8-255">Rozważ użycie [zasad zabezpieczeń zawartości (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) , aby wyłączyć `eval` i inne niebezpieczne elementy podstawowe języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-255">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to disable `eval` and other unsafe JavaScript primitives.</span></span>
* <span data-ttu-id="9a4f8-256">Unikaj implementowania niestandardowego wysyłania wywołań platformy .NET na podstawie implementacji wdrożenia platformy.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-256">Avoid implementing custom dispatching of .NET invocations on top of the framework's dispatching implementation.</span></span> <span data-ttu-id="9a4f8-257">Udostępnianie metod .NET w przeglądarce jest zaawansowanym scenariuszem, nie jest to zalecane w przypadku ogólnego Blazor opracowywania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-257">Exposing .NET methods to the browser is an advanced scenario, not recommended for general Blazor development.</span></span>

### <a name="events"></a><span data-ttu-id="9a4f8-258">Zdarzenia</span><span class="sxs-lookup"><span data-stu-id="9a4f8-258">Events</span></span>

<span data-ttu-id="9a4f8-259">Zdarzenia udostępniają punkt wejścia do Blazor aplikacji serwerowej.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-259">Events provide an entry point to a Blazor Server app.</span></span> <span data-ttu-id="9a4f8-260">Te same reguły zabezpieczania punktów końcowych w aplikacjach sieci Web mają zastosowanie do obsługi zdarzeń w Blazor aplikacjach serwerowych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-260">The same rules for safeguarding endpoints in web apps apply to event handling in Blazor Server apps.</span></span> <span data-ttu-id="9a4f8-261">Złośliwy klient może wysłać dowolne dane, które chcą wysłać jako ładunek dla zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-261">A malicious client can send any data it wishes to send as the payload for an event.</span></span>

<span data-ttu-id="9a4f8-262">Przykład:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-262">For example:</span></span>

* <span data-ttu-id="9a4f8-263">Zdarzenie zmiany dla elementu `<select>` może wysłać wartość, która nie należy do opcji prezentowanych przez aplikację dla klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-263">A change event for a `<select>` could send a value that isn't within the options that the app presented to the client.</span></span>
* <span data-ttu-id="9a4f8-264">`<input>`Może wysłać dowolne dane tekstowe do serwera, pomijając sprawdzanie poprawności po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-264">An `<input>` could send any text data to the server, bypassing client-side validation.</span></span>

<span data-ttu-id="9a4f8-265">Aplikacja musi sprawdzić poprawność danych dla każdego zdarzenia, które obsługuje aplikacja.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-265">The app must validate the data for any event that the app handles.</span></span> <span data-ttu-id="9a4f8-266">Blazor [Składniki formularzy](xref:blazor/forms-validation) struktury wykonują podstawowe walidacje.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-266">The Blazor framework [forms components](xref:blazor/forms-validation) perform basic validations.</span></span> <span data-ttu-id="9a4f8-267">Jeśli aplikacja używa składników formularzy niestandardowych, kod niestandardowy musi być zapisany, aby sprawdzić poprawność danych zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-267">If the app uses custom forms components, custom code must be written to validate event data as appropriate.</span></span>

Blazor<span data-ttu-id="9a4f8-268">Zdarzenia serwera są asynchroniczne, więc do serwera można wysłać wiele zdarzeń, zanim aplikacja ma czas na reagowanie, generując nowe renderowanie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-268"> Server events are asynchronous, so multiple events can be dispatched to the server before the app has time to react by producing a new render.</span></span> <span data-ttu-id="9a4f8-269">Ma to pewne konsekwencje dla bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-269">This has some security implications to consider.</span></span> <span data-ttu-id="9a4f8-270">Ograniczanie akcji klienta w aplikacji musi być wykonywane wewnątrz obsługi zdarzeń i nie zależy od aktualnie renderowanego stanu widoku.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-270">Limiting client actions in the app must be performed inside event handlers and not depend on the current rendered view state.</span></span>

<span data-ttu-id="9a4f8-271">Rozważmy składnik licznika, który powinien zezwalać użytkownikowi na zwiększenie licznika maksymalnie trzy razy.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-271">Consider a counter component that should allow a user to increment a counter a maximum of three times.</span></span> <span data-ttu-id="9a4f8-272">Przycisk służący do zwiększania licznika jest warunkowo oparty na wartości `count` :</span><span class="sxs-lookup"><span data-stu-id="9a4f8-272">The button to increment the counter is conditionally based on the value of `count`:</span></span>

```razor
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        count++;
    }
}
```

<span data-ttu-id="9a4f8-273">Klient może wysłać co najmniej jedno zdarzenie przyrostu, zanim środowisko generuje nowe renderowanie tego składnika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-273">A client can dispatch one or more increment events before the framework produces a new render of this component.</span></span> <span data-ttu-id="9a4f8-274">Wynikiem tego jest to, że wartość `count` może być zwiększana przez użytkownika *trzy razy* , ponieważ przycisk nie jest USUWANY przez interfejs użytkownika wystarczająco szybko.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-274">The result is that the `count` can be incremented *over three times* by the user because the button isn't removed by the UI quickly enough.</span></span> <span data-ttu-id="9a4f8-275">Poprawna Metoda osiągnięcia limitu trzech `count` przyrostów jest pokazana w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-275">The correct way to achieve the limit of three `count` increments is shown in the following example:</span></span>

```razor
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        if (count < 3)
        {
            count++;
        }
    }
}
```

<span data-ttu-id="9a4f8-276">Po dodaniu `if (count < 3) { ... }` kontroli wewnątrz procedury obsługi decyzja o zwiększeniu zależy od `count` bieżącego stanu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-276">By adding the `if (count < 3) { ... }` check inside the handler, the decision to increment `count` is based on the current app state.</span></span> <span data-ttu-id="9a4f8-277">Decyzja nie jest oparta na stanie interfejsu użytkownika, ponieważ była w poprzednim przykładzie, co może być czasowo przestarzałe.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-277">The decision isn't based on the state of the UI as it was in the previous example, which might be temporarily stale.</span></span>

### <a name="guard-against-multiple-dispatches"></a><span data-ttu-id="9a4f8-278">Ochrona przed wieloma operacjami wysyłania</span><span class="sxs-lookup"><span data-stu-id="9a4f8-278">Guard against multiple dispatches</span></span>

<span data-ttu-id="9a4f8-279">Jeśli wywołanie zwrotne zdarzenia wywołuje długotrwałą operację asynchroniczną, taką jak pobieranie danych z zewnętrznej usługi lub bazy danych, należy rozważyć użycie funkcji Guard.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-279">If an event callback invokes a long running operation asynchronously, such as fetching data from an external service or database, consider using a guard.</span></span> <span data-ttu-id="9a4f8-280">Funkcja Guard może uniemożliwić użytkownikowi kolejkowanie wielu operacji, gdy operacja jest w toku i zawiera wizualne Opinie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-280">The guard can prevent the user from queueing up multiple operations while the operation is in progress with visual feedback.</span></span> <span data-ttu-id="9a4f8-281">Poniższy kod składnika jest ustawiany `isLoading` na `true` podczas `GetForecastAsync` pobierania danych z serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-281">The following component code sets `isLoading` to `true` while `GetForecastAsync` obtains data from the server.</span></span> <span data-ttu-id="9a4f8-282">Mimo `isLoading` że `true` przycisk jest wyłączony w interfejsie użytkownika:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-282">While `isLoading` is `true`, the button is disabled in the UI:</span></span>

```razor
@page "/fetchdata"
@using BlazorServerSample.Data
@inject WeatherForecastService ForecastService

<button disabled="@isLoading" @onclick="UpdateForecasts">Update</button>

@code {
    private bool isLoading;
    private WeatherForecast[] forecasts;

    private async Task UpdateForecasts()
    {
        if (!isLoading)
        {
            isLoading = true;
            forecasts = await ForecastService.GetForecastAsync(DateTime.Now);
            isLoading = false;
        }
    }
}
```

<span data-ttu-id="9a4f8-283">Wzorzec Guard przedstawiony w poprzednim przykładzie działa, jeśli operacja w tle jest wykonywana asynchronicznie ze `async` - `await` wzorcem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-283">The guard pattern demonstrated in the preceding example works if the background operation is executed asynchronously with the `async`-`await` pattern.</span></span>

### <a name="cancel-early-and-avoid-use-after-dispose"></a><span data-ttu-id="9a4f8-284">Anuluj wczesne i Unikaj używania-After-Dispose</span><span class="sxs-lookup"><span data-stu-id="9a4f8-284">Cancel early and avoid use-after-dispose</span></span>

<span data-ttu-id="9a4f8-285">Oprócz używania ochrony opisanej w sekcji [Guard dla wielu odniesień](#guard-against-multiple-dispatches) należy rozważyć użycie elementu, <xref:System.Threading.CancellationToken> Aby anulować długotrwałe operacje, gdy składnik zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-285">In addition to using a guard as described in the [Guard against multiple dispatches](#guard-against-multiple-dispatches) section, consider using a <xref:System.Threading.CancellationToken> to cancel long-running operations when the component is disposed.</span></span> <span data-ttu-id="9a4f8-286">Takie podejście ma dodatkową korzyść, unikając *użycia-After-Dispose* w składnikach:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-286">This approach has the added benefit of avoiding *use-after-dispose* in components:</span></span>

```razor
@implements IDisposable

...

@code {
    private readonly CancellationTokenSource TokenSource = 
        new CancellationTokenSource();

    private async Task UpdateForecasts()
    {
        ...

        forecasts = await ForecastService.GetForecastAsync(DateTime.Now, 
            TokenSource.Token);

        if (TokenSource.Token.IsCancellationRequested)
        {
           return;
        }

        ...
    }

    public void Dispose()
    {
        TokenSource.Cancel();
    }
}
```

### <a name="avoid-events-that-produce-large-amounts-of-data"></a><span data-ttu-id="9a4f8-287">Unikaj zdarzeń, które generują duże ilości danych</span><span class="sxs-lookup"><span data-stu-id="9a4f8-287">Avoid events that produce large amounts of data</span></span>

<span data-ttu-id="9a4f8-288">Niektóre zdarzenia DOM, takie jak `oninput` lub `onscroll` , mogą generować dużą ilość danych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-288">Some DOM events, such as `oninput` or `onscroll`, can produce a large amount of data.</span></span> <span data-ttu-id="9a4f8-289">Unikaj używania tych zdarzeń w Blazor aplikacjach serwerowych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-289">Avoid using these events in Blazor server apps.</span></span>

## <a name="additional-security-guidance"></a><span data-ttu-id="9a4f8-290">Dodatkowe wskazówki dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="9a4f8-290">Additional security guidance</span></span>

<span data-ttu-id="9a4f8-291">Wskazówki dotyczące zabezpieczania aplikacji ASP.NET Core mają zastosowanie do Blazor aplikacji serwerowych i zostały omówione w następujących sekcjach:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-291">The guidance for securing ASP.NET Core apps apply to Blazor Server apps and are covered in the following sections:</span></span>

* [<span data-ttu-id="9a4f8-292">Rejestrowanie i dane poufne</span><span class="sxs-lookup"><span data-stu-id="9a4f8-292">Logging and sensitive data</span></span>](#logging-and-sensitive-data)
* [<span data-ttu-id="9a4f8-293">Ochrona informacji przesyłanych przy użyciu protokołu HTTPS</span><span class="sxs-lookup"><span data-stu-id="9a4f8-293">Protect information in transit with HTTPS</span></span>](#protect-information-in-transit-with-https)
* [<span data-ttu-id="9a4f8-294">Skrypty między lokacjami (XSS)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-294">Cross-site scripting (XSS)</span></span>](#cross-site-scripting-xss)
* [<span data-ttu-id="9a4f8-295">Ochrona między źródłami</span><span class="sxs-lookup"><span data-stu-id="9a4f8-295">Cross-origin protection</span></span>](#cross-origin-protection)
* [<span data-ttu-id="9a4f8-296">Gniazdo kliknięcia</span><span class="sxs-lookup"><span data-stu-id="9a4f8-296">Click-jacking</span></span>](#click-jacking)
* [<span data-ttu-id="9a4f8-297">Otwórz przekierowania</span><span class="sxs-lookup"><span data-stu-id="9a4f8-297">Open redirects</span></span>](#open-redirects)

### <a name="logging-and-sensitive-data"></a><span data-ttu-id="9a4f8-298">Rejestrowanie i dane poufne</span><span class="sxs-lookup"><span data-stu-id="9a4f8-298">Logging and sensitive data</span></span>

<span data-ttu-id="9a4f8-299">Interakcje między klientem a serwerem są rejestrowane w dziennikach serwera z <xref:Microsoft.Extensions.Logging.ILogger> wystąpieniami.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-299">JS interop interactions between the client and server are recorded in the server's logs with <xref:Microsoft.Extensions.Logging.ILogger> instances.</span></span> Blazor<span data-ttu-id="9a4f8-300">pozwala uniknąć rejestrowania poufnych informacji, takich jak zdarzenia rzeczywiste lub dane wejściowe i wyjściowe w programie JS.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-300"> avoids logging sensitive information, such as actual events or JS interop inputs and outputs.</span></span>

<span data-ttu-id="9a4f8-301">Gdy na serwerze wystąpi błąd, struktura powiadamia klienta i rozłączy sesję.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-301">When an error occurs on the server, the framework notifies the client and tears down the session.</span></span> <span data-ttu-id="9a4f8-302">Domyślnie klient otrzymuje ogólny komunikat o błędzie, który można zobaczyć w narzędziach deweloperskich w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-302">By default, the client receives a generic error message that can be seen in the browser's developer tools.</span></span>

<span data-ttu-id="9a4f8-303">Błąd po stronie klienta nie zawiera stosu wywołań i nie zawiera szczegółów dotyczących przyczyny błędu, ale Dzienniki serwera zawierają takie informacje.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-303">The client-side error doesn't include the callstack and doesn't provide detail on the cause of the error, but server logs do contain such information.</span></span> <span data-ttu-id="9a4f8-304">W celach programistycznych informacje o poufnych informacjach o błędzie można udostępnić klientowi, włączając szczegółowe błędy.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-304">For development purposes, sensitive error information can be made available to the client by enabling detailed errors.</span></span>

<span data-ttu-id="9a4f8-305">Włącz szczegółowe błędy w języku JavaScript za pomocą:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-305">Enable detailed errors in JavaScript with:</span></span>

* <span data-ttu-id="9a4f8-306"><xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DetailedErrors?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-306"><xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.DetailedErrors?displayProperty=nameWithType>.</span></span>
* <span data-ttu-id="9a4f8-307">`DetailedErrors`Klucz konfiguracji ustawiony na `true` , który można ustawić w pliku ustawień aplikacji (*appSettings. JSON*).</span><span class="sxs-lookup"><span data-stu-id="9a4f8-307">The `DetailedErrors` configuration key set to `true`, which can be set in the app settings file (*appsettings.json*).</span></span> <span data-ttu-id="9a4f8-308">Klucz można również ustawić przy użyciu `ASPNETCORE_DETAILEDERRORS` zmiennej środowiskowej o wartości `true` .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-308">The key can also be set using the `ASPNETCORE_DETAILEDERRORS` environment variable with a value of `true`.</span></span>

> [!WARNING]
> <span data-ttu-id="9a4f8-309">Ujawnienie informacji o błędach klientom w Internecie stanowi zagrożenie bezpieczeństwa, które należy zawsze uniknąć.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-309">Exposing error information to clients on the Internet is a security risk that should always be avoided.</span></span>

### <a name="protect-information-in-transit-with-https"></a><span data-ttu-id="9a4f8-310">Ochrona informacji przesyłanych przy użyciu protokołu HTTPS</span><span class="sxs-lookup"><span data-stu-id="9a4f8-310">Protect information in transit with HTTPS</span></span>

Blazor<span data-ttu-id="9a4f8-311">Serwer używa SignalR do komunikacji między klientem a serwerem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-311"> Server uses SignalR for communication between the client and the server.</span></span> Blazor<span data-ttu-id="9a4f8-312">Serwer zazwyczaj używa transportu, który SignalR negocjuje, który jest zwykle gniazdem WebSockets.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-312"> Server normally uses the transport that SignalR negotiates, which is typically WebSockets.</span></span>

Blazor<span data-ttu-id="9a4f8-313">Serwer nie zapewnia integralności i poufności danych przesyłanych między serwerem a klientem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-313"> Server doesn't ensure the integrity and confidentiality of the data sent between the server and the client.</span></span> <span data-ttu-id="9a4f8-314">Zawsze używaj protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-314">Always use HTTPS.</span></span>

### <a name="cross-site-scripting-xss"></a><span data-ttu-id="9a4f8-315">Skrypty między lokacjami (XSS)</span><span class="sxs-lookup"><span data-stu-id="9a4f8-315">Cross-site scripting (XSS)</span></span>

<span data-ttu-id="9a4f8-316">Skrypty między lokacjami (XSS) umożliwiają nieautoryzowanym podmiotom wykonywanie arbitralnej logiki w kontekście przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-316">Cross-site scripting (XSS) allows an unauthorized party to execute arbitrary logic in the context of the browser.</span></span> <span data-ttu-id="9a4f8-317">Naruszona aplikacja może potencjalnie uruchomić dowolny kod na kliencie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-317">A compromised app could potentially run arbitrary code on the client.</span></span> <span data-ttu-id="9a4f8-318">Ta luka w zabezpieczeniach może być używana do potencjalnie wykonywania wielu złośliwych działań na serwerze:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-318">The vulnerability could be used to potentially perform a number of malicious actions against the server:</span></span>

* <span data-ttu-id="9a4f8-319">Wysyłaj fałszywe lub nieprawidłowe zdarzenia do serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-319">Dispatch fake/invalid events to the server.</span></span>
* <span data-ttu-id="9a4f8-320">Niepowodzenie wysyłania/nieprawidłowe uzupełnianie renderowania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-320">Dispatch fail/invalid render completions.</span></span>
* <span data-ttu-id="9a4f8-321">Unikaj wysyłania uzupełniania renderowania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-321">Avoid dispatching render completions.</span></span>
* <span data-ttu-id="9a4f8-322">Wysyłaj wywołania międzyoperacyjne z JavaScript do platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-322">Dispatch interop calls from JavaScript to .NET.</span></span>
* <span data-ttu-id="9a4f8-323">Modyfikowanie odpowiedzi wywołań międzyoperacyjnych z platformy .NET do języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-323">Modify the response of interop calls from .NET to JavaScript.</span></span>
* <span data-ttu-id="9a4f8-324">Unikaj wysyłania do wyników międzyoperacyjnych platformy .NET i JS.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-324">Avoid dispatching .NET to JS interop results.</span></span>

<span data-ttu-id="9a4f8-325">BlazorPlatforma serwera podejmuje kroki w celu ochrony przed niektórymi z poprzednich zagrożeń:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-325">The Blazor Server framework takes steps to protect against some of the preceding threats:</span></span>

* <span data-ttu-id="9a4f8-326">Powoduje zatrzymanie tworzenia nowych aktualizacji interfejsu użytkownika, jeśli klient nie potwierdza partii renderowania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-326">Stops producing new UI updates if the client isn't acknowledging render batches.</span></span> <span data-ttu-id="9a4f8-327">Skonfigurowane przy użyciu <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.MaxBufferedUnacknowledgedRenderBatches?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-327">Configured with <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.MaxBufferedUnacknowledgedRenderBatches?displayProperty=nameWithType>.</span></span>
* <span data-ttu-id="9a4f8-328">Przeprowadzenie dowolnego wywołania platformy .NET do języka JavaScript po jednej minucie bez otrzymania odpowiedzi od klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-328">Times out any .NET to JavaScript call after one minute without receiving a response from the client.</span></span> <span data-ttu-id="9a4f8-329">Skonfigurowane przy użyciu <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-329">Configured with <xref:Microsoft.AspNetCore.Components.Server.CircuitOptions.JSInteropDefaultCallTimeout?displayProperty=nameWithType>.</span></span>
* <span data-ttu-id="9a4f8-330">Wykonuje podstawowe sprawdzanie poprawności wszystkich danych wejściowych pochodzących z przeglądarki podczas współdziałania JS:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-330">Performs basic validation on all input coming from the browser during JS interop:</span></span>
  * <span data-ttu-id="9a4f8-331">Odwołania platformy .NET są prawidłowe i typu oczekiwanego przez metodę .NET.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-331">.NET references are valid and of the type expected by the .NET method.</span></span>
  * <span data-ttu-id="9a4f8-332">Dane nie są źle sformułowane.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-332">The data isn't malformed.</span></span>
  * <span data-ttu-id="9a4f8-333">Poprawna liczba argumentów dla metody znajduje się w ładunku.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-333">The correct number of arguments for the method are present in the payload.</span></span>
  * <span data-ttu-id="9a4f8-334">Argumenty lub wynik można przeprowadzić w deserializacji prawidłowo przed wywołaniem metody.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-334">The arguments or result can be deserialized correctly before invoking the method.</span></span>
* <span data-ttu-id="9a4f8-335">Wykonuje podstawowe walidacje we wszystkich danych wejściowych pochodzących z przeglądarki z wysłanych zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-335">Performs basic validation in all input coming from the browser from dispatched events:</span></span>
  * <span data-ttu-id="9a4f8-336">Zdarzenie ma prawidłowy typ.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-336">The event has a valid type.</span></span>
  * <span data-ttu-id="9a4f8-337">Dane dla zdarzenia można deserializować.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-337">The data for the event can be deserialized.</span></span>
  * <span data-ttu-id="9a4f8-338">Istnieje procedura obsługi zdarzeń skojarzona ze zdarzeniem.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-338">There's an event handler associated with the event.</span></span>

<span data-ttu-id="9a4f8-339">Oprócz zabezpieczeń wdrożonych przez platformę, aplikacja musi być kodowana przez dewelopera, aby chronić przed zagrożeniami i podejmować odpowiednie działania:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-339">In addition to the safeguards that the framework implements, the app must be coded by the developer to safeguard against threats and take appropriate actions:</span></span>

* <span data-ttu-id="9a4f8-340">Zawsze sprawdzaj poprawność danych podczas obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-340">Always validate data when handling events.</span></span>
* <span data-ttu-id="9a4f8-341">Podejmij odpowiednią akcję po odebraniu nieprawidłowych danych:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-341">Take appropriate action upon receiving invalid data:</span></span>
  * <span data-ttu-id="9a4f8-342">Ignoruj dane i zwracają.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-342">Ignore the data and return.</span></span> <span data-ttu-id="9a4f8-343">Dzięki temu aplikacja może kontynuować przetwarzanie żądań.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-343">This allows the app to continue processing requests.</span></span>
  * <span data-ttu-id="9a4f8-344">Jeśli aplikacja ustali, że dane wejściowe są illegitimate i nie mogły zostać utworzone przez legalnego klienta, Zgłoś wyjątek.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-344">If the app determines that the input is illegitimate and couldn't be produced by legitimate client, throw an exception.</span></span> <span data-ttu-id="9a4f8-345">Zgłaszanie wyjątku spowoduje rozbicie obwodu i zakończenie sesji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-345">Throwing an exception tears down the circuit and ends the session.</span></span>
* <span data-ttu-id="9a4f8-346">Nie ufaj komunikatowi o błędzie dostarczonym przez uzupełnianie wsadowe renderowania zawarte w dziennikach.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-346">Don't trust the error message provided by render batch completions included in the logs.</span></span> <span data-ttu-id="9a4f8-347">Ten błąd jest dostarczany przez klienta i nie może być zazwyczaj zaufany, ponieważ klient może zostać naruszony.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-347">The error is provided by the client and can't generally be trusted, as the client might be compromised.</span></span>
* <span data-ttu-id="9a4f8-348">Nie ufaj danych wejściowych w wywołaniach międzyoperacyjnych JS w obu kierunkach między językami JavaScript i .NET.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-348">Don't trust the input on JS interop calls in either direction between JavaScript and .NET methods.</span></span>
* <span data-ttu-id="9a4f8-349">Aplikacja jest odpowiedzialna za sprawdzenie, czy zawartość argumentów i wyników są prawidłowe, nawet jeśli argumenty lub wyniki są prawidłowo deserializowane.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-349">The app is responsible for validating that the content of arguments and results are valid, even if the arguments or results are correctly deserialized.</span></span>

<span data-ttu-id="9a4f8-350">W przypadku luki w zabezpieczeniach XSS aplikacja musi zawierać dane wejściowe użytkownika na renderowanej stronie.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-350">For a XSS vulnerability to exist, the app must incorporate user input in the rendered page.</span></span> Blazor<span data-ttu-id="9a4f8-351">Składniki serwera wykonują krok czasu kompilowania, w którym adiustację w pliku *Razor* są przekształcane do procedury proceduralnej logiki C#.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-351"> Server components execute a compile-time step where the markup in a *.razor* file is transformed into procedural C# logic.</span></span> <span data-ttu-id="9a4f8-352">W czasie wykonywania logika języka C# kompiluje *drzewo renderowania* opisujące elementy, tekst i składniki podrzędne.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-352">At runtime, the C# logic builds a *render tree* describing the elements, text, and child components.</span></span> <span data-ttu-id="9a4f8-353">Jest on stosowany do modelu DOM przeglądarki za pośrednictwem sekwencji instrukcji języka JavaScript (lub jest serializowany do HTML w przypadku prerenderowania):</span><span class="sxs-lookup"><span data-stu-id="9a4f8-353">This is applied to the browser's DOM via a sequence of JavaScript instructions (or is serialized to HTML in the case of prerendering):</span></span>

* <span data-ttu-id="9a4f8-354">Dane wejściowe użytkownika renderowane za pośrednictwem normalnej Razor składni (na przykład `@someStringValue` ) nie ujawniają luki w zabezpieczeniach programu XSS, ponieważ Razor składnia jest DODAWANA do modelu Dom za pośrednictwem poleceń, które mogą zapisywać tekst.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-354">User input rendered via normal Razor syntax (for example, `@someStringValue`) doesn't expose a XSS vulnerability because the Razor syntax is added to the DOM via commands that can only write text.</span></span> <span data-ttu-id="9a4f8-355">Nawet jeśli wartość zawiera znacznik HTML, wartość jest wyświetlana jako tekst statyczny.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-355">Even if the value includes HTML markup, the value is displayed as static text.</span></span> <span data-ttu-id="9a4f8-356">Podczas renderowania wstępnego dane wyjściowe są kodowane w formacie HTML, co spowoduje również wyświetlenie zawartości jako tekst statyczny.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-356">When prerendering, the output is HTML-encoded, which also displays the content as static text.</span></span>
* <span data-ttu-id="9a4f8-357">Tagi skryptu nie są dozwolone i nie powinny być uwzględnione w drzewie renderowania składnika aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-357">Script tags aren't allowed and shouldn't be included in the app's component render tree.</span></span> <span data-ttu-id="9a4f8-358">Jeśli tag skryptu jest zawarty w znaczniku składnika, generowany jest błąd czasu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-358">If a script tag is included in a component's markup, a compile-time error is generated.</span></span>
* <span data-ttu-id="9a4f8-359">Autorzy składników mogą tworzyć składniki w języku C# bez użycia programu Razor .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-359">Component authors can author components in C# without using Razor.</span></span> <span data-ttu-id="9a4f8-360">Autor składnika jest odpowiedzialny za korzystanie z odpowiednich interfejsów API podczas emitowania danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-360">The component author is responsible for using the correct APIs when emitting output.</span></span> <span data-ttu-id="9a4f8-361">Na przykład użyj, `builder.AddContent(0, someUserSuppliedString)` a *nie* `builder.AddMarkupContent(0, someUserSuppliedString)` , ponieważ drugie może utworzyć lukę w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-361">For example, use `builder.AddContent(0, someUserSuppliedString)` and *not* `builder.AddMarkupContent(0, someUserSuppliedString)`, as the latter could create a XSS vulnerability.</span></span>

<span data-ttu-id="9a4f8-362">W ramach ochrony przed atakami typu XSS należy rozważyć zaimplementowanie rozwiązań XSS, takich jak [zasady zabezpieczeń zawartości (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP).</span><span class="sxs-lookup"><span data-stu-id="9a4f8-362">As part of protecting against XSS attacks, consider implementing XSS mitigations, such as [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP).</span></span>

<span data-ttu-id="9a4f8-363">Aby uzyskać więcej informacji, zobacz <xref:security/cross-site-scripting>.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-363">For more information, see <xref:security/cross-site-scripting>.</span></span>

### <a name="cross-origin-protection"></a><span data-ttu-id="9a4f8-364">Ochrona między źródłami</span><span class="sxs-lookup"><span data-stu-id="9a4f8-364">Cross-origin protection</span></span>

<span data-ttu-id="9a4f8-365">Ataki między źródłami obejmują klienta z innego źródła, wykonującego akcję względem serwera.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-365">Cross-origin attacks involve a client from a different origin performing an action against the server.</span></span> <span data-ttu-id="9a4f8-366">Złośliwa akcja to zwykle żądanie GET lub formularz POST (CSRF żądania między lokacjami), ale możliwe jest również otwarcie złośliwego protokołu WebSocket.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-366">The malicious action is typically a GET request or a form POST (Cross-Site Request Forgery, CSRF), but opening a malicious WebSocket is also possible.</span></span> Blazor<span data-ttu-id="9a4f8-367">Aplikacje serwera oferują te [same gwarancje, że wszystkie inne SignalR aplikacje korzystające](xref:signalr/security)z usługi Hub:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-367"> Server apps offer [the same guarantees that any other SignalR app using the hub protocol offer](xref:signalr/security):</span></span>

* Blazor<span data-ttu-id="9a4f8-368">Dostęp do aplikacji serwerowych można uzyskać, chyba że zostaną podjęte dodatkowe środki w celu ich uniemożliwienia.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-368"> Server apps can be accessed cross-origin unless additional measures are taken to prevent it.</span></span> <span data-ttu-id="9a4f8-369">Aby wyłączyć dostęp między źródłami, wyłącz funkcję CORS w punkcie końcowym przez dodanie oprogramowania pośredniczącego CORS do potoku i dodanie <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute> do Blazor metadanych punktu końcowego lub ograniczenie zestawu dozwolonych źródeł przez [skonfigurowanie SignalR dla udostępniania zasobów między źródłami](xref:signalr/security#cross-origin-resource-sharing).</span><span class="sxs-lookup"><span data-stu-id="9a4f8-369">To disable cross-origin access, either disable CORS in the endpoint by adding the CORS middleware to the pipeline and adding the <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute> to the Blazor endpoint metadata or limit the set of allowed origins by [configuring SignalR for cross-origin resource sharing](xref:signalr/security#cross-origin-resource-sharing).</span></span>
* <span data-ttu-id="9a4f8-370">Jeśli jest włączona funkcja CORS, w zależności od konfiguracji specyfikacji CORS może być wymagane wykonanie dodatkowych czynności w celu ochrony aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-370">If CORS is enabled, extra steps might be required to protect the app depending on the CORS configuration.</span></span> <span data-ttu-id="9a4f8-371">Jeśli funkcja CORS jest włączona globalnie, funkcję CORS można wyłączyć dla Blazor centrum serwera, dodając <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute> metadane do metadanych punktu końcowego po wywołaniu <xref:Microsoft.AspNetCore.Builder.ComponentEndpointRouteBuilderExtensions.MapBlazorHub%2A> konstruktora trasy punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-371">If CORS is globally enabled, CORS can be disabled for the Blazor Server hub by adding the <xref:Microsoft.AspNetCore.Cors.DisableCorsAttribute> metadata to the endpoint metadata after calling <xref:Microsoft.AspNetCore.Builder.ComponentEndpointRouteBuilderExtensions.MapBlazorHub%2A> on the endpoint route builder.</span></span>

<span data-ttu-id="9a4f8-372">Aby uzyskać więcej informacji, zobacz <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-372">For more information, see <xref:security/anti-request-forgery>.</span></span>

### <a name="click-jacking"></a><span data-ttu-id="9a4f8-373">Gniazdo kliknięcia</span><span class="sxs-lookup"><span data-stu-id="9a4f8-373">Click-jacking</span></span>

<span data-ttu-id="9a4f8-374">Gniazda kliknięcia obejmują renderowanie lokacji jako `<iframe>` wewnątrz lokacji z innego źródła w celu nakłonienia użytkownika do wykonywania działań w lokacji w ramach ataku.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-374">Click-jacking involves rendering a site as an `<iframe>` inside a site from a different origin in order to trick the user into performing actions on the site under attack.</span></span>

<span data-ttu-id="9a4f8-375">Aby chronić aplikację przed renderowaniem w ramach programu `<iframe>` , należy użyć [zasad zabezpieczeń zawartości (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) i `X-Frame-Options` nagłówka.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-375">To protect an app from rendering inside of an `<iframe>`, use [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) and the `X-Frame-Options` header.</span></span> <span data-ttu-id="9a4f8-376">Aby uzyskać więcej informacji, zobacz [powiadomienia MDN Web docs: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span><span class="sxs-lookup"><span data-stu-id="9a4f8-376">For more information, see [MDN web docs: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span></span>

### <a name="open-redirects"></a><span data-ttu-id="9a4f8-377">Otwórz przekierowania</span><span class="sxs-lookup"><span data-stu-id="9a4f8-377">Open redirects</span></span>

<span data-ttu-id="9a4f8-378">Po Blazor uruchomieniu sesji aplikacji serwera serwer przeprowadza podstawowe sprawdzanie poprawności adresów URL wysyłanych w ramach uruchamiania sesji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-378">When a Blazor Server app session starts, the server performs basic validation of the URLs sent as part of starting the session.</span></span> <span data-ttu-id="9a4f8-379">Struktura sprawdza, czy podstawowy adres URL jest nadrzędnym bieżącym adresem URL przed ustanowieniem obwodu.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-379">The framework checks that the base URL is a parent of the current URL before establishing the circuit.</span></span> <span data-ttu-id="9a4f8-380">Struktura nie wykonuje żadnych dodatkowych testów.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-380">No additional checks are performed by the framework.</span></span>

<span data-ttu-id="9a4f8-381">Gdy użytkownik wybierze link na kliencie, adres URL łącza jest wysyłany do serwera, który określa akcję do wykonania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-381">When a user selects a link on the client, the URL for the link is sent to the server, which determines what action to take.</span></span> <span data-ttu-id="9a4f8-382">Na przykład aplikacja może wykonać nawigację po stronie klienta lub wskazać przeglądarkę, aby przejść do nowej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-382">For example, the app may perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="9a4f8-383">Składniki mogą również wyzwalać żądania nawigacji programowo za pomocą programu <xref:Microsoft.AspNetCore.Components.NavigationManager> .</span><span class="sxs-lookup"><span data-stu-id="9a4f8-383">Components can also trigger navigation requests programatically through the use of <xref:Microsoft.AspNetCore.Components.NavigationManager>.</span></span> <span data-ttu-id="9a4f8-384">W takich scenariuszach aplikacja może wykonać nawigację po stronie klienta lub wskazać przeglądarkę, aby przejść do nowej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-384">In such scenarios, the app might perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="9a4f8-385">Składniki muszą:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-385">Components must:</span></span>

* <span data-ttu-id="9a4f8-386">Unikaj używania danych wejściowych użytkownika jako części argumentów wywołania nawigacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-386">Avoid using user input as part of the navigation call arguments.</span></span>
* <span data-ttu-id="9a4f8-387">Sprawdź poprawność argumentów, aby upewnić się, że element docelowy jest dozwolony przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-387">Validate arguments to ensure that the target is allowed by the app.</span></span>

<span data-ttu-id="9a4f8-388">W przeciwnym razie złośliwy użytkownik może wymusić przejście przeglądarki do witryny kontrolowanej przez osobę atakującą.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-388">Otherwise, a malicious user can force the browser to go to an attacker-controlled site.</span></span> <span data-ttu-id="9a4f8-389">W tym scenariuszu osoba atakująca dodaliśmy aplikację do korzystania z niektórych danych wejściowych użytkownika w ramach wywołania <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-389">In this scenario, the attacker tricks the app into using some user input as part of the invocation of the <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType> method.</span></span>

<span data-ttu-id="9a4f8-390">To zalecenie ma zastosowanie również w przypadku renderowania linków w ramach aplikacji:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-390">This advice also applies when rendering links as part of the app:</span></span>

* <span data-ttu-id="9a4f8-391">Jeśli to możliwe, użyj linków względnych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-391">If possible, use relative links.</span></span>
* <span data-ttu-id="9a4f8-392">Sprawdź, czy bezwzględne miejsca docelowe linków są prawidłowe przed dołączeniem ich do strony.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-392">Validate that absolute link destinations are valid before including them in a page.</span></span>

<span data-ttu-id="9a4f8-393">Aby uzyskać więcej informacji, zobacz <xref:security/preventing-open-redirects>.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-393">For more information, see <xref:security/preventing-open-redirects>.</span></span>

## <a name="security-checklist"></a><span data-ttu-id="9a4f8-394">Lista kontrolna zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="9a4f8-394">Security checklist</span></span>

<span data-ttu-id="9a4f8-395">Poniżej wymieniono zagadnienia dotyczące zabezpieczeń, które nie są wyczerpujące:</span><span class="sxs-lookup"><span data-stu-id="9a4f8-395">The following list of security considerations isn't comprehensive:</span></span>

* <span data-ttu-id="9a4f8-396">Sprawdź poprawność argumentów z zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-396">Validate arguments from events.</span></span>
* <span data-ttu-id="9a4f8-397">Sprawdź poprawność danych wejściowych i wyników z wywołań międzyoperacyjnych JS.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-397">Validate inputs and results from JS interop calls.</span></span>
* <span data-ttu-id="9a4f8-398">Należy unikać używania (lub weryfikowania wcześniej) danych wejściowych użytkownika dla wywołań międzyoperacyjnych platformy .NET i JS.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-398">Avoid using (or validate beforehand) user input for .NET to JS interop calls.</span></span>
* <span data-ttu-id="9a4f8-399">Uniemożliwiaj klientowi alokowanie nieograniczonej ilości pamięci.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-399">Prevent the client from allocating an unbound amount of memory.</span></span>
  * <span data-ttu-id="9a4f8-400">Dane w składniku.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-400">Data within the component.</span></span>
  * <span data-ttu-id="9a4f8-401">`DotNetObject`odwołania zwracane do klienta.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-401">`DotNetObject` references returned to the client.</span></span>
* <span data-ttu-id="9a4f8-402">Ochrona przed wieloma operacjami wysyłania.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-402">Guard against multiple dispatches.</span></span>
* <span data-ttu-id="9a4f8-403">Anuluj długotrwałe operacje, gdy składnik zostanie usunięty.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-403">Cancel long-running operations when the component is disposed.</span></span>
* <span data-ttu-id="9a4f8-404">Unikaj zdarzeń, które generują duże ilości danych.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-404">Avoid events that produce large amounts of data.</span></span>
* <span data-ttu-id="9a4f8-405">Unikaj korzystania z danych wejściowych użytkownika jako części wywołań <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType> i weryfikowania danych wejściowych użytkownika dla adresów URL w odniesieniu do zestawu dozwolonych źródeł najpierw w przypadku, gdy jest to nieuniknione.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-405">Avoid using user input as part of calls to <xref:Microsoft.AspNetCore.Components.NavigationManager.NavigateTo%2A?displayProperty=nameWithType> and validate user input for URLs against a set of allowed origins first if unavoidable.</span></span>
* <span data-ttu-id="9a4f8-406">Nie należy podejmować decyzji dotyczących autoryzacji na podstawie stanu interfejsu użytkownika, ale tylko ze stanu składnika.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-406">Don't make authorization decisions based on the state of the UI but only from component state.</span></span>
* <span data-ttu-id="9a4f8-407">Rozważ użycie [zasad zabezpieczeń zawartości (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) do ochrony przed atakami XSS.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-407">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to protect against XSS attacks.</span></span>
* <span data-ttu-id="9a4f8-408">Należy rozważyć użycie usług CSP i [X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) do ochrony przed kliknięciami.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-408">Consider using CSP and [X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) to protect against click-jacking.</span></span>
* <span data-ttu-id="9a4f8-409">Upewnij się, że ustawienia CORS są odpowiednie podczas włączania funkcji CORS lub jawnie wyłącz funkcję CORS dla Blazor aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-409">Ensure CORS settings are appropriate when enabling CORS or explicitly disable CORS for Blazor apps.</span></span>
* <span data-ttu-id="9a4f8-410">Przetestuj, aby upewnić się, że limity po stronie serwera dla Blazor aplikacji zapewniają akceptowalne środowisko użytkownika bez nieakceptowalnego poziomu ryzyka.</span><span class="sxs-lookup"><span data-stu-id="9a4f8-410">Test to ensure that the server-side limits for the Blazor app provide an acceptable user experience without unacceptable levels of risk.</span></span>
