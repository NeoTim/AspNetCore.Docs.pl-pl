---
<span data-ttu-id="c62e4-101">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-101">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-102">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-102">'Blazor'</span></span>
- <span data-ttu-id="c62e4-103">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-103">'Identity'</span></span>
- <span data-ttu-id="c62e4-104">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-104">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-105">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-105">'Razor'</span></span>
- <span data-ttu-id="c62e4-106">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-106">'SignalR' uid:</span></span> 

---
# <a name="host-aspnet-core-in-a-web-farm"></a><span data-ttu-id="c62e4-107">ASP.NET Core hosta w kolektywie serwerów sieci Web</span><span class="sxs-lookup"><span data-stu-id="c62e4-107">Host ASP.NET Core in a web farm</span></span>

<span data-ttu-id="c62e4-108">[Krzysztof Ross](https://github.com/Tratcher)</span><span class="sxs-lookup"><span data-stu-id="c62e4-108">By [Chris Ross](https://github.com/Tratcher)</span></span>

<span data-ttu-id="c62e4-109">*Farma sieci Web* jest grupą zawierającą co najmniej dwa serwery sieci Web (lub *węzły*), które obsługują wiele wystąpień aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c62e4-109">A *web farm* is a group of two or more web servers (or *nodes*) that host multiple instances of an app.</span></span> <span data-ttu-id="c62e4-110">Gdy żądania użytkowników docierają do kolektywu serwerów sieci Web, *moduł równoważenia obciążenia* dystrybuuje żądania do węzłów kolektywu serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-110">When requests from users arrive to a web farm, a *load balancer* distributes the requests to the web farm's nodes.</span></span> <span data-ttu-id="c62e4-111">Usprawnienia farmy sieci Web:</span><span class="sxs-lookup"><span data-stu-id="c62e4-111">Web farms improve:</span></span>

* <span data-ttu-id="c62e4-112">**Niezawodność/dostępność**: Jeśli co najmniej jeden węzeł ulegnie awarii, moduł równoważenia obciążenia może kierować żądania do innych działających węzłów, aby kontynuować przetwarzanie żądań.</span><span class="sxs-lookup"><span data-stu-id="c62e4-112">**Reliability/availability**: When one or more nodes fail, the load balancer can route requests to other functioning nodes to continue processing requests.</span></span>
* <span data-ttu-id="c62e4-113">**Pojemność/wydajność**: wiele węzłów może przetwarzać więcej żądań niż pojedynczy serwer.</span><span class="sxs-lookup"><span data-stu-id="c62e4-113">**Capacity/performance**: Multiple nodes can process more requests than a single server.</span></span> <span data-ttu-id="c62e4-114">Moduł równoważenia obciążenia równoważy obciążenie przez dystrybuowanie żądań do węzłów.</span><span class="sxs-lookup"><span data-stu-id="c62e4-114">The load balancer balances the workload by distributing requests to the nodes.</span></span>
* <span data-ttu-id="c62e4-115">**Skalowalność**: gdy wymagana jest większa lub mniejsza pojemność, można zwiększyć lub zmniejszyć liczbę aktywnych węzłów w celu dopasowania do obciążenia.</span><span class="sxs-lookup"><span data-stu-id="c62e4-115">**Scalability**: When more or less capacity is required, the number of active nodes can be increased or decreased to match the workload.</span></span> <span data-ttu-id="c62e4-116">Technologie platformy farmy sieci Web, takie jak [Azure App Service](https://azure.microsoft.com/services/app-service/), mogą automatycznie dodawać lub usuwać węzły na żądanie administratora systemu lub automatycznie bez udziału człowieka.</span><span class="sxs-lookup"><span data-stu-id="c62e4-116">Web farm platform technologies, such as [Azure App Service](https://azure.microsoft.com/services/app-service/), can automatically add or remove nodes at the request of the system administrator or automatically without human intervention.</span></span>
* <span data-ttu-id="c62e4-117">**Łatwość konserwacji**: węzły kolektywu serwerów sieci Web mogą polegać na zestawie usług udostępnionych, co ułatwia zarządzanie systemem.</span><span class="sxs-lookup"><span data-stu-id="c62e4-117">**Maintainability**: Nodes of a web farm can rely on a set of shared services, which results in easier system management.</span></span> <span data-ttu-id="c62e4-118">Na przykład węzły kolektywu serwerów sieci Web mogą polegać na jednym serwerze bazy danych i wspólnej lokalizacji sieciowej dla zasobów statycznych, takich jak obrazy i pliki do pobrania.</span><span class="sxs-lookup"><span data-stu-id="c62e4-118">For example, the nodes of a web farm can rely upon a single database server and a common network location for static resources, such as images and downloadable files.</span></span>

<span data-ttu-id="c62e4-119">W tym temacie opisano konfigurację i zależności dla aplikacji ASP.NET Core hostowanych w kolektywie serwerów sieci Web, które są zależne od udostępnionych zasobów.</span><span class="sxs-lookup"><span data-stu-id="c62e4-119">This topic describes configuration and dependencies for ASP.NET core apps hosted in a web farm that rely upon shared resources.</span></span>

## <a name="general-configuration"></a><span data-ttu-id="c62e4-120">Konfiguracja ogólna</span><span class="sxs-lookup"><span data-stu-id="c62e4-120">General configuration</span></span>

<xref:host-and-deploy/index>  
<span data-ttu-id="c62e4-121">Dowiedz się, jak konfigurować środowiska hostingu i wdrażać ASP.NET Core aplikacje.</span><span class="sxs-lookup"><span data-stu-id="c62e4-121">Learn how to set up hosting environments and deploy ASP.NET Core apps.</span></span> <span data-ttu-id="c62e4-122">Skonfiguruj Menedżera procesów na każdym węźle kolektywu serwerów sieci Web, aby zautomatyzować uruchamianie i ponowne uruchamianie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c62e4-122">Configure a process manager on each node of the web farm to automate app starts and restarts.</span></span> <span data-ttu-id="c62e4-123">Każdy węzeł wymaga środowiska uruchomieniowego ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="c62e4-123">Each node requires the ASP.NET Core runtime.</span></span> <span data-ttu-id="c62e4-124">Aby uzyskać więcej informacji, zobacz tematy w obszarze [host i wdrażanie](xref:host-and-deploy/index) w dokumentacji.</span><span class="sxs-lookup"><span data-stu-id="c62e4-124">For more information, see the topics in the [Host and deploy](xref:host-and-deploy/index) area of the documentation.</span></span>

<xref:host-and-deploy/proxy-load-balancer>  
<span data-ttu-id="c62e4-125">Dowiedz się więcej o konfigurowaniu aplikacji hostowanych za serwerami proxy i usługami równoważenia obciążenia, które często zasłaniają ważne informacje o żądaniu.</span><span class="sxs-lookup"><span data-stu-id="c62e4-125">Learn about configuration for apps hosted behind proxy servers and load balancers, which often obscure important request information.</span></span>

<xref:host-and-deploy/azure-apps/index>  
<span data-ttu-id="c62e4-126">[Azure App Service](https://azure.microsoft.com/services/app-service/) to [usługa platformy obliczeniowej w chmurze firmy Microsoft](https://azure.microsoft.com/) do hostowania aplikacji sieci web, w tym ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="c62e4-126">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a [Microsoft cloud computing platform service](https://azure.microsoft.com/) for hosting web apps, including ASP.NET Core.</span></span> <span data-ttu-id="c62e4-127">App Service to w pełni zarządzana platforma, która zapewnia automatyczne skalowanie, równoważenie obciążenia, stosowanie poprawek i ciągłe wdrażanie.</span><span class="sxs-lookup"><span data-stu-id="c62e4-127">App Service is a fully managed platform that provides automatic scaling, load balancing, patching, and continuous deployment.</span></span>

## <a name="app-data"></a><span data-ttu-id="c62e4-128">Dane aplikacji</span><span class="sxs-lookup"><span data-stu-id="c62e4-128">App data</span></span>

<span data-ttu-id="c62e4-129">Gdy aplikacja jest skalowana w wielu wystąpieniach, może być stan aplikacji, który wymaga udostępniania między węzłami.</span><span class="sxs-lookup"><span data-stu-id="c62e4-129">When an app is scaled to multiple instances, there might be app state that requires sharing across nodes.</span></span> <span data-ttu-id="c62e4-130">Jeśli stan jest przejściowy, rozważ udostępnienie [IDistributedCache](/dotnet/api/microsoft.extensions.caching.distributed.idistributedcache).</span><span class="sxs-lookup"><span data-stu-id="c62e4-130">If the state is transient, consider sharing an [IDistributedCache](/dotnet/api/microsoft.extensions.caching.distributed.idistributedcache).</span></span> <span data-ttu-id="c62e4-131">Jeśli współużytkowany stan wymaga trwałości, rozważ zapisanie stanu udostępnionego w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="c62e4-131">If the shared state requires persistence, consider storing the shared state in a database.</span></span>

## <a name="required-configuration"></a><span data-ttu-id="c62e4-132">Wymagana konfiguracja</span><span class="sxs-lookup"><span data-stu-id="c62e4-132">Required configuration</span></span>

<span data-ttu-id="c62e4-133">Ochrona danych i buforowanie wymagają konfiguracji aplikacji wdrożonych w kolektywie serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-133">Data Protection and Caching require configuration for apps deployed to a web farm.</span></span>

### <a name="data-protection"></a><span data-ttu-id="c62e4-134">Ochrona danych</span><span class="sxs-lookup"><span data-stu-id="c62e4-134">Data Protection</span></span>

<span data-ttu-id="c62e4-135">[System ochrony danych ASP.NET Core](xref:security/data-protection/introduction) jest używany przez aplikacje do ochrony danych.</span><span class="sxs-lookup"><span data-stu-id="c62e4-135">The [ASP.NET Core Data Protection system](xref:security/data-protection/introduction) is used by apps to protect data.</span></span> <span data-ttu-id="c62e4-136">Ochrona danych opiera się na zestawie kluczy kryptograficznych przechowywanych w *pęku kluczy*.</span><span class="sxs-lookup"><span data-stu-id="c62e4-136">Data Protection relies upon a set of cryptographic keys stored in a *key ring*.</span></span> <span data-ttu-id="c62e4-137">Gdy system ochrony danych jest zainicjowany, stosuje [domyślne ustawienia](xref:security/data-protection/configuration/default-settings) , które przechowują pierścień kluczy lokalnie.</span><span class="sxs-lookup"><span data-stu-id="c62e4-137">When the Data Protection system is initialized, it applies [default settings](xref:security/data-protection/configuration/default-settings) that store the key ring locally.</span></span> <span data-ttu-id="c62e4-138">W ramach konfiguracji domyślnej unikatowy pierścień kluczy jest przechowywany w każdym węźle kolektywu serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-138">Under the default configuration, a unique key ring is stored on each node of the web farm.</span></span> <span data-ttu-id="c62e4-139">W związku z tym każdy węzeł kolektywu serwerów sieci Web nie może odszyfrować danych szyfrowanych przez aplikację w żadnym innym węźle.</span><span class="sxs-lookup"><span data-stu-id="c62e4-139">Consequently, each web farm node can't decrypt data that's encrypted by an app on any other node.</span></span> <span data-ttu-id="c62e4-140">Konfiguracja domyślna nie jest zazwyczaj odpowiednia do hostowania aplikacji w kolektywie serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-140">The default configuration isn't generally appropriate for hosting apps in a web farm.</span></span> <span data-ttu-id="c62e4-141">Alternatywą dla implementacji pierścienia klucza współdzielonego jest zawsze kierowanie żądań użytkowników do tego samego węzła.</span><span class="sxs-lookup"><span data-stu-id="c62e4-141">An alternative to implementing a shared key ring is to always route user requests to the same node.</span></span> <span data-ttu-id="c62e4-142">Aby uzyskać więcej informacji na temat konfiguracji systemu ochrony danych dla wdrożeń farmy sieci Web, zobacz <xref:security/data-protection/configuration/overview> .</span><span class="sxs-lookup"><span data-stu-id="c62e4-142">For more information on Data Protection system configuration for web farm deployments, see <xref:security/data-protection/configuration/overview>.</span></span>

### <a name="caching"></a><span data-ttu-id="c62e4-143">Buforowanie</span><span class="sxs-lookup"><span data-stu-id="c62e4-143">Caching</span></span>

<span data-ttu-id="c62e4-144">W środowisku kolektywu serwerów sieci Web mechanizm buforowania musi współdzielić elementy w pamięci podręcznej w węzłach kolektywu serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-144">In a web farm environment, the caching mechanism must share cached items across the web farm's nodes.</span></span> <span data-ttu-id="c62e4-145">Buforowanie musi być zależne od typowej pamięci podręcznej Redis, udostępnionej bazy danych SQL Server lub niestandardowej implementacji buforowania, która udostępnia elementy w pamięci podręcznej w ramach kolektywu serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-145">Caching must either rely upon a common Redis cache, a shared SQL Server database, or a custom caching implementation that shares cached items across the web farm.</span></span> <span data-ttu-id="c62e4-146">Aby uzyskać więcej informacji, zobacz <xref:performance/caching/distributed>.</span><span class="sxs-lookup"><span data-stu-id="c62e4-146">For more information, see <xref:performance/caching/distributed>.</span></span>

## <a name="dependent-components"></a><span data-ttu-id="c62e4-147">Składniki zależne</span><span class="sxs-lookup"><span data-stu-id="c62e4-147">Dependent components</span></span>

<span data-ttu-id="c62e4-148">Poniższe scenariusze nie wymagają dodatkowej konfiguracji, ale zależą od technologii, które wymagają konfiguracji farmy serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-148">The following scenarios don't require additional configuration, but they depend on technologies that require configuration for web farms.</span></span>

| <span data-ttu-id="c62e4-149">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="c62e4-149">Scenario</span></span> | <span data-ttu-id="c62e4-150">Zależy od&hellip;</span><span class="sxs-lookup"><span data-stu-id="c62e4-150">Depends on &hellip;</span></span> |
| ---
<span data-ttu-id="c62e4-151">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-151">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-152">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-152">'Blazor'</span></span>
- <span data-ttu-id="c62e4-153">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-153">'Identity'</span></span>
- <span data-ttu-id="c62e4-154">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-154">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-155">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-155">'Razor'</span></span>
- <span data-ttu-id="c62e4-156">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-156">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-157">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-157">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-158">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-158">'Blazor'</span></span>
- <span data-ttu-id="c62e4-159">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-159">'Identity'</span></span>
- <span data-ttu-id="c62e4-160">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-160">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-161">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-161">'Razor'</span></span>
- <span data-ttu-id="c62e4-162">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-162">'SignalR' uid:</span></span> 

<span data-ttu-id="c62e4-163">---- | ---title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-163">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-164">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-164">'Blazor'</span></span>
- <span data-ttu-id="c62e4-165">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-165">'Identity'</span></span>
- <span data-ttu-id="c62e4-166">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-166">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-167">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-167">'Razor'</span></span>
- <span data-ttu-id="c62e4-168">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-168">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-169">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-169">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-170">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-170">'Blazor'</span></span>
- <span data-ttu-id="c62e4-171">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-171">'Identity'</span></span>
- <span data-ttu-id="c62e4-172">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-172">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-173">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-173">'Razor'</span></span>
- <span data-ttu-id="c62e4-174">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-174">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-175">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-175">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-176">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-176">'Blazor'</span></span>
- <span data-ttu-id="c62e4-177">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-177">'Identity'</span></span>
- <span data-ttu-id="c62e4-178">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-178">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-179">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-179">'Razor'</span></span>
- <span data-ttu-id="c62e4-180">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-180">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-181">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-181">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-182">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-182">'Blazor'</span></span>
- <span data-ttu-id="c62e4-183">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-183">'Identity'</span></span>
- <span data-ttu-id="c62e4-184">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-184">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-185">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-185">'Razor'</span></span>
- <span data-ttu-id="c62e4-186">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-186">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-187">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-187">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-188">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-188">'Blazor'</span></span>
- <span data-ttu-id="c62e4-189">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-189">'Identity'</span></span>
- <span data-ttu-id="c62e4-190">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-190">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-191">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-191">'Razor'</span></span>
- <span data-ttu-id="c62e4-192">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-192">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-193">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-193">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-194">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-194">'Blazor'</span></span>
- <span data-ttu-id="c62e4-195">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-195">'Identity'</span></span>
- <span data-ttu-id="c62e4-196">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-196">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-197">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-197">'Razor'</span></span>
- <span data-ttu-id="c62e4-198">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-198">'SignalR' uid:</span></span> 

-
<span data-ttu-id="c62e4-199">title: Author: Description: monikerRange: MS. Author: MS. Custom: MS. Date: No-Loc:</span><span class="sxs-lookup"><span data-stu-id="c62e4-199">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="c62e4-200">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-200">'Blazor'</span></span>
- <span data-ttu-id="c62e4-201">'Identity'</span><span class="sxs-lookup"><span data-stu-id="c62e4-201">'Identity'</span></span>
- <span data-ttu-id="c62e4-202">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="c62e4-202">'Let's Encrypt'</span></span>
- <span data-ttu-id="c62e4-203">'Razor'</span><span class="sxs-lookup"><span data-stu-id="c62e4-203">'Razor'</span></span>
- <span data-ttu-id="c62e4-204">SignalRIdentyfikator UID:</span><span class="sxs-lookup"><span data-stu-id="c62e4-204">'SignalR' uid:</span></span> 

<span data-ttu-id="c62e4-205">---------- | | Uwierzytelnianie | Ochrona danych (zobacz <xref:security/data-protection/configuration/overview> ).</span><span class="sxs-lookup"><span data-stu-id="c62e4-205">---------- | | Authentication | Data Protection (see <xref:security/data-protection/configuration/overview>).</span></span><br><br><span data-ttu-id="c62e4-206">Aby uzyskać więcej informacji, zobacz <xref:security/authentication/cookie> i <xref:security/cookie-sharing>.</span><span class="sxs-lookup"><span data-stu-id="c62e4-206">For more information, see <xref:security/authentication/cookie> and <xref:security/cookie-sharing>.</span></span> <span data-ttu-id="c62e4-207">| | Identity | Konfiguracja uwierzytelniania i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c62e4-207">| | Identity | Authentication and database configuration.</span></span><br><br><span data-ttu-id="c62e4-208">Aby uzyskać więcej informacji, zobacz <xref:security/authentication/identity>.</span><span class="sxs-lookup"><span data-stu-id="c62e4-208">For more information, see <xref:security/authentication/identity>.</span></span> <span data-ttu-id="c62e4-209">| | Sesja | Ochrona danych (zaszyfrowane pliki cookie) (zobacz <xref:security/data-protection/configuration/overview> ) i buforowanie (zobacz <xref:performance/caching/distributed> ).</span><span class="sxs-lookup"><span data-stu-id="c62e4-209">| | Session | Data Protection (encrypted cookies) (see <xref:security/data-protection/configuration/overview>) and Caching (see <xref:performance/caching/distributed>).</span></span><br><br><span data-ttu-id="c62e4-210">Aby uzyskać więcej informacji, zobacz [Zarządzanie sesjami i Stanami: stan sesji](xref:fundamentals/app-state#session-state).</span><span class="sxs-lookup"><span data-stu-id="c62e4-210">For more information, see [Session and state management: Session state](xref:fundamentals/app-state#session-state).</span></span> <span data-ttu-id="c62e4-211">| | TempData | Ochrona danych (zaszyfrowane pliki cookie) (zobacz <xref:security/data-protection/configuration/overview> ) lub sesja (zobacz [Zarządzanie sesjami i Stanami: stan sesji](xref:fundamentals/app-state#session-state)).</span><span class="sxs-lookup"><span data-stu-id="c62e4-211">| | TempData | Data Protection (encrypted cookies) (see <xref:security/data-protection/configuration/overview>) or Session (see [Session and state management: Session state](xref:fundamentals/app-state#session-state)).</span></span><br><br><span data-ttu-id="c62e4-212">Aby uzyskać więcej informacji, zobacz temat [Zarządzanie sesjami i Stanami: TempData](xref:fundamentals/app-state#tempdata).</span><span class="sxs-lookup"><span data-stu-id="c62e4-212">For more information, see [Session and state management: TempData](xref:fundamentals/app-state#tempdata).</span></span> <span data-ttu-id="c62e4-213">| | Ochrona przed fałszerstwem | Ochrona danych (zobacz <xref:security/data-protection/configuration/overview> ).</span><span class="sxs-lookup"><span data-stu-id="c62e4-213">| | Anti-forgery | Data Protection (see <xref:security/data-protection/configuration/overview>).</span></span><br><br><span data-ttu-id="c62e4-214">Aby uzyskać więcej informacji, zobacz <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="c62e4-214">For more information, see <xref:security/anti-request-forgery>.</span></span> |

## <a name="troubleshoot"></a><span data-ttu-id="c62e4-215">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="c62e4-215">Troubleshoot</span></span>

### <a name="data-protection-and-caching"></a><span data-ttu-id="c62e4-216">Ochrona i buforowanie danych</span><span class="sxs-lookup"><span data-stu-id="c62e4-216">Data Protection and caching</span></span>

<span data-ttu-id="c62e4-217">Gdy ochrona danych lub buforowanie nie jest skonfigurowane dla środowiska kolektywu serwerów sieci Web, podczas przetwarzania żądań występują sporadyczne błędy.</span><span class="sxs-lookup"><span data-stu-id="c62e4-217">When Data Protection or caching isn't configured for a web farm environment, intermittent errors occur when requests are processed.</span></span> <span data-ttu-id="c62e4-218">Dzieje się tak, ponieważ węzły nie współdzielą tych samych zasobów i żądania użytkownika nie zawsze są kierowane do tego samego węzła.</span><span class="sxs-lookup"><span data-stu-id="c62e4-218">This occurs because nodes don't share the same resources and user requests aren't always routed back to the same node.</span></span>

<span data-ttu-id="c62e4-219">Rozważ użytkownikowi, który zaloguje się do aplikacji przy użyciu uwierzytelniania plików cookie.</span><span class="sxs-lookup"><span data-stu-id="c62e4-219">Consider a user who signs into the app using cookie authentication.</span></span> <span data-ttu-id="c62e4-220">Użytkownik loguje się do aplikacji w jednym węźle kolektywu serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c62e4-220">The user signs into the app on one web farm node.</span></span> <span data-ttu-id="c62e4-221">Jeśli następne żądanie zostanie odebrane w tym samym węźle, na którym się zalogowano, aplikacja będzie mogła odszyfrować plik cookie uwierzytelniania i zezwalać na dostęp do zasobu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c62e4-221">If their next request arrives at the same node where they signed in, the app is able to decrypt the authentication cookie and allows access to the app's resource.</span></span> <span data-ttu-id="c62e4-222">Jeśli kolejne żądanie dociera do innego węzła, aplikacja nie może odszyfrować pliku cookie uwierzytelniania z węzła, w którym zalogowany jest użytkownik, a autoryzacja dla żądanego zasobu kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="c62e4-222">If their next request arrives at a different node, the app can't decrypt the authentication cookie from the node where the user signed in, and authorization for the requested resource fails.</span></span>

<span data-ttu-id="c62e4-223">Gdy którykolwiek z następujących objawów występuje **sporadycznie**, problem zwykle jest śledzony do nieprawidłowej ochrony danych lub konfiguracji buforowania dla środowiska farmy sieci Web:</span><span class="sxs-lookup"><span data-stu-id="c62e4-223">When any of the following symptoms occur **intermittently**, the problem is usually traced to improper Data Protection or caching configuration for a web farm environment:</span></span>

* <span data-ttu-id="c62e4-224">Przerwy uwierzytelniania: plik cookie uwierzytelniania jest niepoprawnie skonfigurowany lub nie można go odszyfrować.</span><span class="sxs-lookup"><span data-stu-id="c62e4-224">Authentication breaks: The authentication cookie is misconfigured or can't be decrypted.</span></span> <span data-ttu-id="c62e4-225">Logowanie OAuth (Facebook, Microsoft, Twitter) lub OpenIdConnect kończy się niepowodzeniem z błędem "korelacja nie powiodła się".</span><span class="sxs-lookup"><span data-stu-id="c62e4-225">OAuth (Facebook, Microsoft, Twitter) or OpenIdConnect logins fail with the error "Correlation failed."</span></span>
* <span data-ttu-id="c62e4-226">Przerwy autoryzacji: Identity zostały utracone.</span><span class="sxs-lookup"><span data-stu-id="c62e4-226">Authorization breaks: Identity is lost.</span></span>
* <span data-ttu-id="c62e4-227">Stan sesji utraci dane.</span><span class="sxs-lookup"><span data-stu-id="c62e4-227">Session state loses data.</span></span>
* <span data-ttu-id="c62e4-228">Wyznikane elementy w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="c62e4-228">Cached items disappear.</span></span>
* <span data-ttu-id="c62e4-229">TempData kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="c62e4-229">TempData fails.</span></span>
* <span data-ttu-id="c62e4-230">Wpisy nie powiodły się: sprawdzenie ochrony przed fałszerstwem nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="c62e4-230">POSTs fail: The anti-forgery check fails.</span></span>

<span data-ttu-id="c62e4-231">Aby uzyskać więcej informacji na temat konfiguracji ochrony danych dla wdrożeń farmy sieci Web, zobacz <xref:security/data-protection/configuration/overview> .</span><span class="sxs-lookup"><span data-stu-id="c62e4-231">For more information on Data Protection configuration for web farm deployments, see <xref:security/data-protection/configuration/overview>.</span></span> <span data-ttu-id="c62e4-232">Aby uzyskać więcej informacji na temat buforowania konfiguracji dla wdrożeń farmy sieci Web, zobacz <xref:performance/caching/distributed> .</span><span class="sxs-lookup"><span data-stu-id="c62e4-232">For more information on caching configuration for web farm deployments, see <xref:performance/caching/distributed>.</span></span>

## <a name="obtain-data-from-apps"></a><span data-ttu-id="c62e4-233">Uzyskiwanie danych z aplikacji</span><span class="sxs-lookup"><span data-stu-id="c62e4-233">Obtain data from apps</span></span>

<span data-ttu-id="c62e4-234">Jeśli aplikacje kolektywu serwerów sieci Web mogą odpowiadać na żądania, uzyskiwać żądania, połączenia i dodatkowe dane z aplikacji przy użyciu wbudowanego oprogramowania terminala.</span><span class="sxs-lookup"><span data-stu-id="c62e4-234">If the web farm apps are capable of responding to requests, obtain request, connection, and additional data from the apps using terminal inline middleware.</span></span> <span data-ttu-id="c62e4-235">Aby uzyskać więcej informacji i przykładowy kod, zobacz <xref:test/troubleshoot#obtain-data-from-an-app> .</span><span class="sxs-lookup"><span data-stu-id="c62e4-235">For more information and sample code, see <xref:test/troubleshoot#obtain-data-from-an-app>.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="c62e4-236">Zasoby dodatkowe</span><span class="sxs-lookup"><span data-stu-id="c62e4-236">Additional resources</span></span>

* <span data-ttu-id="c62e4-237">[Rozszerzenie niestandardowego skryptu dla systemu Windows](/azure/virtual-machines/extensions/custom-script-windows): Pobiera i wykonuje skrypty na maszynach wirtualnych platformy Azure, co jest przydatne w przypadku konfiguracji po wdrożeniu i instalacji oprogramowania.</span><span class="sxs-lookup"><span data-stu-id="c62e4-237">[Custom Script Extension for Windows](/azure/virtual-machines/extensions/custom-script-windows): Downloads and executes scripts on Azure virtual machines, which is useful for post-deployment configuration and software installation.</span></span>
* <xref:host-and-deploy/proxy-load-balancer>
 